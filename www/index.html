<html>
    <head>
        <title>WebRealms</title>
    </head>
    <body>
        <script type="text/javascript">document.write('<script src="http://'+window.location.hostname+':35729/livereload.js?snipver=1" type="text/javascript"><\/script>');!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a,b,c){function d(a,e){if(d.count<=0)throw new Error("after called too many times");--d.count,a?(f=!0,b(a),b=c):0!==d.count||f||b(null,e)}var f=!1;return c=c||e,d.count=a,0===a?b():d}function e(){}b.exports=d},{}],2:[function(a,b,c){b.exports=function(a,b,c){var d=a.byteLength;if(b=b||0,c=c||d,a.slice)return a.slice(b,c);if(b<0&&(b+=d),c<0&&(c+=d),c>d&&(c=d),b>=d||b>=c||0===d)return new ArrayBuffer(0);for(var e=new Uint8Array(a),f=new Uint8Array(c-b),g=b,h=0;g<c;g++,h++)f[h]=e[g];return f.buffer}},{}],3:[function(a,b,c){function d(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}b.exports=d,d.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var b=Math.random(),c=Math.floor(b*this.jitter*a);a=0==(1&Math.floor(10*b))?a-c:a+c}return 0|Math.min(a,this.max)},d.prototype.reset=function(){this.attempts=0},d.prototype.setMin=function(a){this.ms=a},d.prototype.setMax=function(a){this.max=a},d.prototype.setJitter=function(a){this.jitter=a}},{}],4:[function(a,b,c){!function(){"use strict";for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b=new Uint8Array(256),d=0;d<a.length;d++)b[a.charCodeAt(d)]=d;c.encode=function(b){var c,d=new Uint8Array(b),e=d.length,f="";for(c=0;c<e;c+=3)f+=a[d[c]>>2],f+=a[(3&d[c])<<4|d[c+1]>>4],f+=a[(15&d[c+1])<<2|d[c+2]>>6],f+=a[63&d[c+2]];return e%3==2?f=f.substring(0,f.length-1)+"=":e%3==1&&(f=f.substring(0,f.length-2)+"=="),f},c.decode=function(a){var c,d,e,f,g,h=.75*a.length,i=a.length,j=0;"="===a[a.length-1]&&(h--,"="===a[a.length-2]&&h--);var k=new ArrayBuffer(h),l=new Uint8Array(k);for(c=0;c<i;c+=4)d=b[a.charCodeAt(c)],e=b[a.charCodeAt(c+1)],f=b[a.charCodeAt(c+2)],g=b[a.charCodeAt(c+3)],l[j++]=d<<2|e>>4,l[j++]=(15&e)<<4|f>>2,l[j++]=(3&f)<<6|63&g;return k}}()},{}],5:[function(a,b,c){"use strict";"use restrict";function d(a){var b=32;return a&=-a,a&&b--,65535&a&&(b-=16),16711935&a&&(b-=8),252645135&a&&(b-=4),858993459&a&&(b-=2),1431655765&a&&(b-=1),b}c.INT_BITS=32,c.INT_MAX=2147483647,c.INT_MIN=-1<<31,c.sign=function(a){return(a>0)-(a<0)},c.abs=function(a){var b=a>>31;return(a^b)-b},c.min=function(a,b){return b^(a^b)&-(a<b)},c.max=function(a,b){return a^(a^b)&-(a<b)},c.isPow2=function(a){return!(a&a-1||!a)},c.log2=function(a){var b,c;return b=(a>65535)<<4,a>>>=b,c=(a>255)<<3,a>>>=c,b|=c,c=(a>15)<<2,a>>>=c,b|=c,c=(a>3)<<1,a>>>=c,(b|=c)|a>>1},c.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},c.popCount=function(a){return a-=a>>>1&1431655765,16843009*((a=(858993459&a)+(a>>>2&858993459))+(a>>>4)&252645135)>>>24},c.countTrailingZeros=d,c.nextPow2=function(a){return a+=0===a,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,(a|=a>>>16)+1},c.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,(a|=a>>>16)-(a>>>1)},c.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,27030>>>(a&=15)&1};var e=new Array(256);!function(a){for(var b=0;b<256;++b){var c=b,d=b,e=7;for(c>>>=1;c;c>>>=1)d<<=1,d|=1&c,--e;a[b]=d<<e&255}}(e),c.reverse=function(a){return e[255&a]<<24|e[a>>>8&255]<<16|e[a>>>16&255]<<8|e[a>>>24&255]},c.interleave2=function(a,b){return a&=65535,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b&=65535,b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1},c.deinterleave2=function(a,b){return a=a>>>b&1431655765,a=858993459&(a|a>>>1),a=252645135&(a|a>>>2),a=16711935&(a|a>>>4),(a=65535&(a|a>>>16))<<16>>16},c.interleave3=function(a,b,c){return a&=1023,a=4278190335&(a|a<<16),a=251719695&(a|a<<8),a=3272356035&(a|a<<4),a=1227133513&(a|a<<2),b&=1023,b=4278190335&(b|b<<16),b=251719695&(b|b<<8),b=3272356035&(b|b<<4),b=1227133513&(b|b<<2),a|=b<<1,c&=1023,c=4278190335&(c|c<<16),c=251719695&(c|c<<8),c=3272356035&(c|c<<4),c=1227133513&(c|c<<2),a|c<<2},c.deinterleave3=function(a,b){return a=a>>>b&1227133513,a=3272356035&(a|a>>>2),a=251719695&(a|a>>>4),a=4278190335&(a|a>>>8),(a=1023&(a|a>>>16))<<22>>22},c.nextCombination=function(a){var b=a|a-1;return b+1|(~b&-~b)-1>>>d(a)+1}},{}],6:[function(a,b,c){(function(a){function c(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.buffer instanceof ArrayBuffer){var d=c.buffer;if(c.byteLength!==d.byteLength){var e=new Uint8Array(c.byteLength);e.set(new Uint8Array(d,c.byteOffset,c.byteLength)),d=e.buffer}a[b]=d}}}function d(a,b){b=b||{};var d=new f;c(a);for(var e=0;e<a.length;e++)d.append(a[e]);return b.type?d.getBlob(b.type):d.getBlob()}function e(a,b){return c(a),new Blob(a,b||{})}var f=a.BlobBuilder||a.WebKitBlobBuilder||a.MSBlobBuilder||a.MozBlobBuilder,g=function(){try{return 2===new Blob(["hi"]).size}catch(a){return!1}}(),h=g&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(a){return!1}}(),i=f&&f.prototype.append&&f.prototype.getBlob;b.exports=function(){return g?h?a.Blob:e:i?d:void 0}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(a,b,c){},{}],8:[function(a,b,c){var d=[].slice;b.exports=function(a,b){if("string"==typeof b&&(b=a[b]),"function"!=typeof b)throw new Error("bind() requires a function");var c=d.call(arguments,2);return function(){return b.apply(a,c.concat(d.call(arguments)))}}},{}],9:[function(a,b,c){function d(a){if(a)return e(a)}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}void 0!==b&&(b.exports=d),d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){this.off(a,c),b.apply(this,arguments)}return c.fn=b,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks["$"+a];if(!c)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(var d,e=0;e<c.length;e++)if((d=c[e])===b||d.fn===b){c.splice(e,1);break}return this},d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks["$"+a];if(c){c=c.slice(0);for(var d=0,e=c.length;d<e;++d)c[d].apply(this,b)}return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],10:[function(a,b,c){b.exports=function(a,b){var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],11:[function(a,b,c){"use strict";function d(a,b,c){c=c||2;var d=b&&b.length,f=d?b[0]*c:a.length,h=e(a,0,f,c,!0),i=[];if(!h)return i;var j,k,m,n,o,p,q;if(d&&(h=l(a,b,h,c)),a.length>80*c){j=m=a[0],k=n=a[1];for(var r=c;r<f;r+=c)o=a[r],p=a[r+1],o<j&&(j=o),p<k&&(k=p),o>m&&(m=o),p>n&&(n=p);q=Math.max(m-j,n-k)}return g(h,i,c,j,k,q),i}function e(a,b,c,d,e){var f,g;if(e===F(a,b,c,d)>0)for(f=b;f<c;f+=d)g=C(f,a[f],a[f+1],g);else for(f=c-d;f>=b;f-=d)g=C(f,a[f],a[f+1],g);return g&&w(g,g.next)&&(D(g),g=g.next),g}function f(a,b){if(!a)return a;b||(b=a);var c,d=a;do{if(c=!1,d.steiner||!w(d,d.next)&&0!==v(d.prev,d,d.next))d=d.next;else{if(D(d),(d=b=d.prev)===d.next)return null;c=!0}}while(c||d!==b);return b}function g(a,b,c,d,e,l,m){if(a){!m&&l&&p(a,d,e,l);for(var n,o,q=a;a.prev!==a.next;)if(n=a.prev,o=a.next,l?i(a,d,e,l):h(a))b.push(n.i/c),b.push(a.i/c),b.push(o.i/c),D(a),a=o.next,q=o.next;else if((a=o)===q){m?1===m?(a=j(a,b,c),g(a,b,c,d,e,l,2)):2===m&&k(a,b,c,d,e,l):g(f(a),b,c,d,e,l,1);break}}}function h(a){var b=a.prev,c=a,d=a.next;if(v(b,c,d)>=0)return!1;for(var e=a.next.next;e!==a.prev;){if(t(b.x,b.y,c.x,c.y,d.x,d.y,e.x,e.y)&&v(e.prev,e,e.next)>=0)return!1;e=e.next}return!0}function i(a,b,c,d){var e=a.prev,f=a,g=a.next;if(v(e,f,g)>=0)return!1;for(var h=e.x<f.x?e.x<g.x?e.x:g.x:f.x<g.x?f.x:g.x,i=e.y<f.y?e.y<g.y?e.y:g.y:f.y<g.y?f.y:g.y,j=e.x>f.x?e.x>g.x?e.x:g.x:f.x>g.x?f.x:g.x,k=e.y>f.y?e.y>g.y?e.y:g.y:f.y>g.y?f.y:g.y,l=r(h,i,b,c,d),m=r(j,k,b,c,d),n=a.nextZ;n&&n.z<=m;){if(n!==a.prev&&n!==a.next&&t(e.x,e.y,f.x,f.y,g.x,g.y,n.x,n.y)&&v(n.prev,n,n.next)>=0)return!1;n=n.nextZ}for(n=a.prevZ;n&&n.z>=l;){if(n!==a.prev&&n!==a.next&&t(e.x,e.y,f.x,f.y,g.x,g.y,n.x,n.y)&&v(n.prev,n,n.next)>=0)return!1;n=n.prevZ}return!0}function j(a,b,c){var d=a;do{var e=d.prev,f=d.next.next;!w(e,f)&&x(e,d,d.next,f)&&z(e,f)&&z(f,e)&&(b.push(e.i/c),b.push(d.i/c),b.push(f.i/c),D(d),D(d.next),d=a=f),d=d.next}while(d!==a);return d}function k(a,b,c,d,e,h){var i=a;do{for(var j=i.next.next;j!==i.prev;){if(i.i!==j.i&&u(i,j)){var k=B(i,j);return i=f(i,i.next),k=f(k,k.next),g(i,b,c,d,e,h),void g(k,b,c,d,e,h)}j=j.next}i=i.next}while(i!==a)}function l(a,b,c,d){var g,h,i,j,k,l=[];for(g=0,h=b.length;g<h;g++)i=b[g]*d,j=g<h-1?b[g+1]*d:a.length,k=e(a,i,j,d,!1),k===k.next&&(k.steiner=!0),l.push(s(k));for(l.sort(m),g=0;g<l.length;g++)n(l[g],c),c=f(c,c.next);return c}function m(a,b){return a.x-b.x}function n(a,b){if(b=o(a,b)){var c=B(b,a);f(c,c.next)}}function o(a,b){var c,d=b,e=a.x,f=a.y,g=-1/0;do{if(f<=d.y&&f>=d.next.y){var h=d.x+(f-d.y)*(d.next.x-d.x)/(d.next.y-d.y);if(h<=e&&h>g){if(g=h,h===e){if(f===d.y)return d;if(f===d.next.y)return d.next}c=d.x<d.next.x?d:d.next}}d=d.next}while(d!==b);if(!c)return null;if(e===g)return c.prev;var i,j=c,k=c.x,l=c.y,m=1/0;for(d=c.next;d!==j;)e>=d.x&&d.x>=k&&t(f<l?e:g,f,k,l,f<l?g:e,f,d.x,d.y)&&((i=Math.abs(f-d.y)/(e-d.x))<m||i===m&&d.x>c.x)&&z(d,a)&&(c=d,m=i),d=d.next;return c}function p(a,b,c,d){var e=a;do{null===e.z&&(e.z=r(e.x,e.y,b,c,d)),e.prevZ=e.prev,e.nextZ=e.next,e=e.next}while(e!==a);e.prevZ.nextZ=null,e.prevZ=null,q(e)}function q(a){var b,c,d,e,f,g,h,i,j=1;do{for(c=a,a=null,f=null,g=0;c;){for(g++,d=c,h=0,b=0;b<j&&(h++,d=d.nextZ);b++);for(i=j;h>0||i>0&&d;)0===h?(e=d,d=d.nextZ,i--):0!==i&&d?c.z<=d.z?(e=c,c=c.nextZ,h--):(e=d,d=d.nextZ,i--):(e=c,c=c.nextZ,h--),f?f.nextZ=e:a=e,e.prevZ=f,f=e;c=d}f.nextZ=null,j*=2}while(g>1);return a}function r(a,b,c,d,e){return a=32767*(a-c)/e,b=32767*(b-d)/e,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1}function s(a){var b=a,c=a;do{b.x<c.x&&(c=b),b=b.next}while(b!==a);return c}function t(a,b,c,d,e,f,g,h){return(e-g)*(b-h)-(a-g)*(f-h)>=0&&(a-g)*(d-h)-(c-g)*(b-h)>=0&&(c-g)*(f-h)-(e-g)*(d-h)>=0}function u(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!y(a,b)&&z(a,b)&&z(b,a)&&A(a,b)}function v(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function w(a,b){return a.x===b.x&&a.y===b.y}function x(a,b,c,d){return!!(w(a,b)&&w(c,d)||w(a,d)&&w(c,b))||v(a,b,c)>0!=v(a,b,d)>0&&v(c,d,a)>0!=v(c,d,b)>0}function y(a,b){var c=a;do{if(c.i!==a.i&&c.next.i!==a.i&&c.i!==b.i&&c.next.i!==b.i&&x(c,c.next,a,b))return!0;c=c.next}while(c!==a);return!1}function z(a,b){return v(a.prev,a,a.next)<0?v(a,b,a.next)>=0&&v(a,a.prev,b)>=0:v(a,b,a.prev)<0||v(a,a.next,b)<0}function A(a,b){var c=a,d=!1,e=(a.x+b.x)/2,f=(a.y+b.y)/2;do{c.y>f!=c.next.y>f&&e<(c.next.x-c.x)*(f-c.y)/(c.next.y-c.y)+c.x&&(d=!d),c=c.next}while(c!==a);return d}function B(a,b){var c=new E(a.i,a.x,a.y),d=new E(b.i,b.x,b.y),e=a.next,f=b.prev;return a.next=b,b.prev=a,c.next=e,e.prev=c,d.next=c,c.prev=d,f.next=d,d.prev=f,d}function C(a,b,c,d){var e=new E(a,b,c);return d?(e.next=d.next,e.prev=d,d.next.prev=e,d.next=e):(e.prev=e,e.next=e),e}function D(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function E(a,b,c){this.i=a,this.x=b,this.y=c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function F(a,b,c,d){for(var e=0,f=b,g=c-d;f<c;f+=d)e+=(a[g]-a[f])*(a[f+1]+a[g+1]),g=f;return e}b.exports=d,d.deviation=function(a,b,c,d){var e=b&&b.length,f=e?b[0]*c:a.length,g=Math.abs(F(a,0,f,c));if(e)for(var h=0,i=b.length;h<i;h++){var j=b[h]*c,k=h<i-1?b[h+1]*c:a.length;g-=Math.abs(F(a,j,k,c))}var l=0;for(h=0;h<d.length;h+=3){var m=d[h]*c,n=d[h+1]*c,o=d[h+2]*c;l+=Math.abs((a[m]-a[o])*(a[n+1]-a[m+1])-(a[m]-a[n])*(a[o+1]-a[m+1]))}return 0===g&&0===l?0:Math.abs((l-g)/g)},d.flatten=function(a){for(var b=a[0][0].length,c={vertices:[],holes:[],dimensions:b},d=0,e=0;e<a.length;e++){for(var f=0;f<a[e].length;f++)for(var g=0;g<b;g++)c.vertices.push(a[e][f][g]);e>0&&(d+=a[e-1].length,c.holes.push(d))}return c}},{}],12:[function(a,b,c){b.exports=a("./lib/index")},{"./lib/index":13}],13:[function(a,b,c){b.exports=a("./socket"),b.exports.parser=a("engine.io-parser")},{"./socket":14,"engine.io-parser":25}],14:[function(a,b,c){(function(c){function d(a,b){if(!(this instanceof d))return new d(a,b);b=b||{},a&&"object"==typeof a&&(b=a,a=null),a?(a=k(a),b.hostname=a.host,b.secure="https"===a.protocol||"wss"===a.protocol,b.port=a.port,a.query&&(b.query=a.query)):b.host&&(b.hostname=k(b.host).host),this.secure=null!=b.secure?b.secure:c.location&&"https:"===location.protocol,b.hostname&&!b.port&&(b.port=this.secure?"443":"80"),this.agent=b.agent||!1,this.hostname=b.hostname||(c.location?location.hostname:"localhost"),this.port=b.port||(c.location&&location.port?location.port:this.secure?443:80),this.query=b.query||{},"string"==typeof this.query&&(this.query=m.decode(this.query)),this.upgrade=!1!==b.upgrade,this.path=(b.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!b.forceJSONP,this.jsonp=!1!==b.jsonp,this.forceBase64=!!b.forceBase64,this.enablesXDR=!!b.enablesXDR,this.timestampParam=b.timestampParam||"t",this.timestampRequests=b.timestampRequests,this.transports=b.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=b.policyPort||843,this.rememberUpgrade=b.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=b.onlyBinaryUpgrades,this.perMessageDeflate=!1!==b.perMessageDeflate&&(b.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=b.pfx||null,this.key=b.key||null,this.passphrase=b.passphrase||null,this.cert=b.cert||null,this.ca=b.ca||null,this.ciphers=b.ciphers||null,this.rejectUnauthorized=void 0===b.rejectUnauthorized?null:b.rejectUnauthorized,this.forceNode=!!b.forceNode;var e="object"==typeof c&&c;e.global===e&&(b.extraHeaders&&Object.keys(b.extraHeaders).length>0&&(this.extraHeaders=b.extraHeaders),b.localAddress&&(this.localAddress=b.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function e(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}var f=a("./transports/index"),g=a("component-emitter"),h=a("debug")("engine.io-client:socket"),i=a("indexof"),j=a("engine.io-parser"),k=a("parseuri"),l=a("parsejson"),m=a("parseqs");b.exports=d,d.priorWebsocketSuccess=!1,g(d.prototype),d.protocol=j.protocol,d.Socket=d,d.Transport=a("./transport"),d.transports=a("./transports/index"),d.parser=a("engine.io-parser"),d.prototype.createTransport=function(a){h('creating transport "%s"',a);var b=e(this.query);return b.EIO=j.protocol,b.transport=a,this.id&&(b.sid=this.id),new f[a]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:b,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders,forceNode:this.forceNode,localAddress:this.localAddress})},d.prototype.open=function(){var a;if(this.rememberUpgrade&&d.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))a="websocket";else{if(0===this.transports.length){var b=this;return void setTimeout(function(){b.emit("error","No transports available")},0)}a=this.transports[0]}this.readyState="opening";try{a=this.createTransport(a)}catch(a){return this.transports.shift(),void this.open()}a.open(),this.setTransport(a)},d.prototype.setTransport=function(a){h("setting transport %s",a.name);var b=this;this.transport&&(h("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=a,a.on("drain",function(){b.onDrain()}).on("packet",function(a){b.onPacket(a)}).on("error",function(a){b.onError(a)}).on("close",function(){b.onClose("transport close")})},d.prototype.probe=function(a){function b(){if(m.onlyBinaryUpgrades){var b=!this.supportsBinary&&m.transport.supportsBinary;l=l||b}l||(h('probe transport "%s" opened',a),k.send([{type:"ping",data:"probe"}]),k.once("packet",function(b){if(!l)if("pong"===b.type&&"probe"===b.data){if(h('probe transport "%s" pong',a),m.upgrading=!0,m.emit("upgrading",k),!k)return;d.priorWebsocketSuccess="websocket"===k.name,h('pausing current transport "%s"',m.transport.name),m.transport.pause(function(){l||"closed"!==m.readyState&&(h("changing transport and sending upgrade packet"),j(),m.setTransport(k),k.send([{type:"upgrade"}]),m.emit("upgrade",k),k=null,m.upgrading=!1,m.flush())})}else{h('probe transport "%s" failed',a);var c=new Error("probe error");c.transport=k.name,m.emit("upgradeError",c)}}))}function c(){l||(l=!0,j(),k.close(),k=null)}function e(b){var d=new Error("probe error: "+b);d.transport=k.name,c(),h('probe transport "%s" failed because of error: %s',a,b),m.emit("upgradeError",d)}function f(){e("transport closed")}function g(){e("socket closed")}function i(a){k&&a.name!==k.name&&(h('"%s" works - aborting "%s"',a.name,k.name),c())}function j(){k.removeListener("open",b),k.removeListener("error",e),k.removeListener("close",f),m.removeListener("close",g),m.removeListener("upgrading",i)}h('probing transport "%s"',a);var k=this.createTransport(a,{probe:1}),l=!1,m=this;d.priorWebsocketSuccess=!1,k.once("open",b),k.once("error",e),k.once("close",f),this.once("close",g),this.once("upgrading",i),k.open()},d.prototype.onOpen=function(){if(h("socket open"),this.readyState="open",d.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){h("starting upgrade probes");for(var a=0,b=this.upgrades.length;a<b;a++)this.probe(this.upgrades[a])}},d.prototype.onPacket=function(a){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(h('socket receive: type "%s", data "%s"',a.type,a.data),this.emit("packet",a),this.emit("heartbeat"),a.type){case"open":this.onHandshake(l(a.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var b=new Error("server error");b.code=a.data,this.onError(b);break;case"message":this.emit("data",a.data),this.emit("message",a.data)}else h('packet received with socket readyState "%s"',this.readyState)},d.prototype.onHandshake=function(a){this.emit("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this.upgrades=this.filterUpgrades(a.upgrades),this.pingInterval=a.pingInterval,this.pingTimeout=a.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},d.prototype.onHeartbeat=function(a){clearTimeout(this.pingTimeoutTimer);var b=this;b.pingTimeoutTimer=setTimeout(function(){"closed"!==b.readyState&&b.onClose("ping timeout")},a||b.pingInterval+b.pingTimeout)},d.prototype.setPing=function(){var a=this;clearTimeout(a.pingIntervalTimer),a.pingIntervalTimer=setTimeout(function(){h("writing ping packet - expecting pong within %sms",a.pingTimeout),a.ping(),a.onHeartbeat(a.pingTimeout)},a.pingInterval)},d.prototype.ping=function(){var a=this;this.sendPacket("ping",function(){a.emit("ping")})},d.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},d.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(h("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},d.prototype.write=d.prototype.send=function(a,b,c){return this.sendPacket("message",a,b,c),this},d.prototype.sendPacket=function(a,b,c,d){if("function"==typeof b&&(d=b,b=void 0),"function"==typeof c&&(d=c,c=null),"closing"!==this.readyState&&"closed"!==this.readyState){c=c||{},c.compress=!1!==c.compress;var e={type:a,data:b,options:c};this.emit("packetCreate",e),this.writeBuffer.push(e),d&&this.once("flush",d),this.flush()}},d.prototype.close=function(){function a(){d.onClose("forced close"),h("socket closing - telling transport to close"),d.transport.close()}function b(){d.removeListener("upgrade",b),d.removeListener("upgradeError",b),a()}function c(){d.once("upgrade",b),d.once("upgradeError",b)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var d=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?c():a()}):this.upgrading?c():a()}return this},d.prototype.onError=function(a){h("socket error %j",a),d.priorWebsocketSuccess=!1,this.emit("error",a),this.onClose("transport error",a)},d.prototype.onClose=function(a,b){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){h('socket close with reason: "%s"',a);var c=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",a,b),c.writeBuffer=[],c.prevBufferLen=0}},d.prototype.filterUpgrades=function(a){for(var b=[],c=0,d=a.length;c<d;c++)~i(this.transports,a[c])&&b.push(a[c]);return b}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":15,"./transports/index":16,"component-emitter":9,debug:22,"engine.io-parser":25,indexof:31,parsejson:37,parseqs:38,parseuri:39}],15:[function(a,b,c){function d(a){this.path=a.path,this.hostname=a.hostname,this.port=a.port,this.secure=a.secure,this.query=a.query,this.timestampParam=a.timestampParam,this.timestampRequests=a.timestampRequests,this.readyState="",this.agent=a.agent||!1,this.socket=a.socket,this.enablesXDR=a.enablesXDR,this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized,this.forceNode=a.forceNode,this.extraHeaders=a.extraHeaders,this.localAddress=a.localAddress}var e=a("engine.io-parser"),f=a("component-emitter");b.exports=d,f(d.prototype),d.prototype.onError=function(a,b){var c=new Error(a);return c.type="TransportError",c.description=b,this.emit("error",c),this},d.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},d.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},d.prototype.send=function(a){if("open"!==this.readyState)throw new Error("Transport not open");this.write(a)},d.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},d.prototype.onData=function(a){var b=e.decodePacket(a,this.socket.binaryType);this.onPacket(b)},d.prototype.onPacket=function(a){this.emit("packet",a)},d.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":9,"engine.io-parser":25}],16:[function(a,b,c){(function(b){function d(a){var c=!1,d=!1,h=!1!==a.jsonp;if(b.location){var i="https:"===location.protocol,j=location.port;j||(j=i?443:80),c=a.hostname!==location.hostname||j!==a.port,d=a.secure!==i}if(a.xdomain=c,a.xscheme=d,"open"in new e(a)&&!a.forceJSONP)return new f(a);if(!h)throw new Error("JSONP disabled");return new g(a)}var e=a("xmlhttprequest-ssl"),f=a("./polling-xhr"),g=a("./polling-jsonp"),h=a("./websocket");c.polling=d,c.websocket=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":17,"./polling-xhr":18,"./websocket":20,"xmlhttprequest-ssl":21}],17:[function(a,b,c){(function(c){function d(){}function e(a){f.call(this,a),this.query=this.query||{},h||(c.___eio||(c.___eio=[]),h=c.___eio),this.index=h.length;var b=this;h.push(function(a){b.onData(a)}),this.query.j=this.index,c.document&&c.addEventListener&&c.addEventListener("beforeunload",function(){b.script&&(b.script.onerror=d)},!1)}var f=a("./polling"),g=a("component-inherit");b.exports=e;var h;g(e,f),e.prototype.supportsBinary=!1,e.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),f.prototype.doClose.call(this)},e.prototype.doPoll=function(){var a=this,b=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),b.async=!0,b.src=this.uri(),b.onerror=function(b){a.onError("jsonp poll error",b)};var c=document.getElementsByTagName("script")[0];c?c.parentNode.insertBefore(b,c):(document.head||document.body).appendChild(b),this.script=b,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a),document.body.removeChild(a)},100)},e.prototype.doWrite=function(a,b){function c(){d(),b()}function d(){if(e.iframe)try{e.form.removeChild(e.iframe)}catch(a){e.onError("jsonp polling iframe removal error",a)}try{var a='<iframe src="javascript:0" name="'+e.iframeId+'">';f=document.createElement(a)}catch(a){f=document.createElement("iframe"),f.name=e.iframeId,f.src="javascript:0"}f.id=e.iframeId,e.form.appendChild(f),e.iframe=f}var e=this;if(!this.form){var f,g=document.createElement("form"),h=document.createElement("textarea"),i=this.iframeId="eio_iframe_"+this.index;g.className="socketio",g.style.position="absolute",g.style.top="-1000px",g.style.left="-1000px",g.target=i,g.method="POST",g.setAttribute("accept-charset","utf-8"),h.name="d",g.appendChild(h),document.body.appendChild(g),this.form=g,this.area=h}this.form.action=this.uri(),d(),a=a.replace(/\\n/g,"\\\n"),this.area.value=a.replace(/\n/g,"\\n");try{this.form.submit()}catch(a){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===e.iframe.readyState&&c()}:this.iframe.onload=c}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":19,"component-inherit":10}],18:[function(a,b,c){(function(c){function d(){}function e(a){if(i.call(this,a),this.requestTimeout=a.requestTimeout,c.location){var b="https:"===location.protocol,d=location.port;d||(d=b?443:80),this.xd=a.hostname!==c.location.hostname||d!==a.port,this.xs=a.secure!==b}else this.extraHeaders=a.extraHeaders}function f(a){this.method=a.method||"GET",this.uri=a.uri,this.xd=!!a.xd,this.xs=!!a.xs,this.async=!1!==a.async,this.data=void 0!==a.data?a.data:null,this.agent=a.agent,this.isBinary=a.isBinary,this.supportsBinary=a.supportsBinary,this.enablesXDR=a.enablesXDR,this.requestTimeout=a.requestTimeout,this.pfx=a.pfx,this.key=a.key,this.passphrase=a.passphrase,this.cert=a.cert,this.ca=a.ca,this.ciphers=a.ciphers,this.rejectUnauthorized=a.rejectUnauthorized,this.extraHeaders=a.extraHeaders,this.create()}function g(){for(var a in f.requests)f.requests.hasOwnProperty(a)&&f.requests[a].abort()}var h=a("xmlhttprequest-ssl"),i=a("./polling"),j=a("component-emitter"),k=a("component-inherit"),l=a("debug")("engine.io-client:polling-xhr");b.exports=e,b.exports.Request=f,k(e,i),e.prototype.supportsBinary=!0,e.prototype.request=function(a){return a=a||{},a.uri=this.uri(),a.xd=this.xd,a.xs=this.xs,a.agent=this.agent||!1,a.supportsBinary=this.supportsBinary,a.enablesXDR=this.enablesXDR,a.pfx=this.pfx,a.key=this.key,a.passphrase=this.passphrase,a.cert=this.cert,a.ca=this.ca,a.ciphers=this.ciphers,a.rejectUnauthorized=this.rejectUnauthorized,a.requestTimeout=this.requestTimeout,a.extraHeaders=this.extraHeaders,new f(a)},e.prototype.doWrite=function(a,b){var c="string"!=typeof a&&void 0!==a,d=this.request({method:"POST",data:a,isBinary:c}),e=this;d.on("success",b),d.on("error",function(a){e.onError("xhr post error",a)}),this.sendXhr=d},e.prototype.doPoll=function(){l("xhr poll");var a=this.request(),b=this;a.on("data",function(a){b.onData(a)}),a.on("error",function(a){b.onError("xhr poll error",a)}),this.pollXhr=a},j(f.prototype),f.prototype.create=function(){var a={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};a.pfx=this.pfx,a.key=this.key,a.passphrase=this.passphrase,a.cert=this.cert,a.ca=this.ca,a.ciphers=this.ciphers,a.rejectUnauthorized=this.rejectUnauthorized;var b=this.xhr=new h(a),d=this;try{l("xhr open %s: %s",this.method,this.uri),b.open(this.method,this.uri,this.async);try{if(this.extraHeaders){b.setDisableHeaderCheck(!0);for(var e in this.extraHeaders)this.extraHeaders.hasOwnProperty(e)&&b.setRequestHeader(e,this.extraHeaders[e])}}catch(a){}if(this.supportsBinary&&(b.responseType="arraybuffer"),"POST"===this.method)try{this.isBinary?b.setRequestHeader("Content-type","application/octet-stream"):b.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(a){}try{b.setRequestHeader("Accept","*/*")}catch(a){}"withCredentials"in b&&(b.withCredentials=!0),this.requestTimeout&&(b.timeout=this.requestTimeout),this.hasXDR()?(b.onload=function(){d.onLoad()},b.onerror=function(){d.onError(b.responseText)}):b.onreadystatechange=function(){4===b.readyState&&(200===b.status||1223===b.status?d.onLoad():setTimeout(function(){d.onError(b.status)},0))},l("xhr data %s",this.data),b.send(this.data)}catch(a){return void setTimeout(function(){d.onError(a)},0)}c.document&&(this.index=f.requestsCount++,f.requests[this.index]=this)},f.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},f.prototype.onData=function(a){this.emit("data",a),this.onSuccess()},f.prototype.onError=function(a){this.emit("error",a),this.cleanup(!0)},f.prototype.cleanup=function(a){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=d:this.xhr.onreadystatechange=d,a)try{this.xhr.abort()}catch(a){}c.document&&delete f.requests[this.index],this.xhr=null}},f.prototype.onLoad=function(){var a;try{var b;try{b=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(a){}if("application/octet-stream"===b)a=this.xhr.response||this.xhr.responseText;else if(this.supportsBinary)try{a=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(b){for(var c=new Uint8Array(this.xhr.response),d=[],e=0,f=c.length;e<f;e++)d.push(c[e]);a=String.fromCharCode.apply(null,d)}else a=this.xhr.responseText}catch(a){this.onError(a)}null!=a&&this.onData(a)},f.prototype.hasXDR=function(){return void 0!==c.XDomainRequest&&!this.xs&&this.enablesXDR},f.prototype.abort=function(){this.cleanup()},f.requestsCount=0,f.requests={},c.document&&(c.attachEvent?c.attachEvent("onunload",g):c.addEventListener&&c.addEventListener("beforeunload",g,!1))
}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":19,"component-emitter":9,"component-inherit":10,debug:22,"xmlhttprequest-ssl":21}],19:[function(a,b,c){function d(a){var b=a&&a.forceBase64;k&&!b||(this.supportsBinary=!1),e.call(this,a)}var e=a("../transport"),f=a("parseqs"),g=a("engine.io-parser"),h=a("component-inherit"),i=a("yeast"),j=a("debug")("engine.io-client:polling");b.exports=d;var k=function(){return null!=new(a("xmlhttprequest-ssl"))({xdomain:!1}).responseType}();h(d,e),d.prototype.name="polling",d.prototype.doOpen=function(){this.poll()},d.prototype.pause=function(a){function b(){j("paused"),c.readyState="paused",a()}var c=this;if(this.readyState="pausing",this.polling||!this.writable){var d=0;this.polling&&(j("we are currently polling - waiting to pause"),d++,this.once("pollComplete",function(){j("pre-pause polling complete"),--d||b()})),this.writable||(j("we are currently writing - waiting to pause"),d++,this.once("drain",function(){j("pre-pause writing complete"),--d||b()}))}else b()},d.prototype.poll=function(){j("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},d.prototype.onData=function(a){var b=this;j("polling got data %s",a);var c=function(a,c,d){if("opening"===b.readyState&&b.onOpen(),"close"===a.type)return b.onClose(),!1;b.onPacket(a)};g.decodePayload(a,this.socket.binaryType,c),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():j('ignoring poll - transport state "%s"',this.readyState))},d.prototype.doClose=function(){function a(){j("writing close packet"),b.write([{type:"close"}])}var b=this;"open"===this.readyState?(j("transport open - closing"),a()):(j("transport not open - deferring close"),this.once("open",a))},d.prototype.write=function(a){var b=this;this.writable=!1;var c=function(){b.writable=!0,b.emit("drain")};g.encodePayload(a,this.supportsBinary,function(a){b.doWrite(a,c)})},d.prototype.uri=function(){var a=this.query||{},b=this.secure?"https":"http",c="";return!1!==this.timestampRequests&&(a[this.timestampParam]=i()),this.supportsBinary||a.sid||(a.b64=1),a=f.encode(a),this.port&&("https"===b&&443!==Number(this.port)||"http"===b&&80!==Number(this.port))&&(c=":"+this.port),a.length&&(a="?"+a),b+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+c+this.path+a}},{"../transport":15,"component-inherit":10,debug:22,"engine.io-parser":25,parseqs:38,"xmlhttprequest-ssl":21,yeast:237}],20:[function(a,b,c){(function(c){function d(a){a&&a.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=a.perMessageDeflate,this.usingBrowserWebSocket=l&&!a.forceNode,this.usingBrowserWebSocket||(m=e),f.call(this,a)}var e,f=a("../transport"),g=a("engine.io-parser"),h=a("parseqs"),i=a("component-inherit"),j=a("yeast"),k=a("debug")("engine.io-client:websocket"),l=c.WebSocket||c.MozWebSocket;if("undefined"==typeof window)try{e=a("ws")}catch(a){}var m=l;m||"undefined"!=typeof window||(m=e),b.exports=d,i(d,f),d.prototype.name="websocket",d.prototype.supportsBinary=!0,d.prototype.doOpen=function(){if(this.check()){var a=this.uri(),b={agent:this.agent,perMessageDeflate:this.perMessageDeflate};b.pfx=this.pfx,b.key=this.key,b.passphrase=this.passphrase,b.cert=this.cert,b.ca=this.ca,b.ciphers=this.ciphers,b.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(b.headers=this.extraHeaders),this.localAddress&&(b.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?new m(a):new m(a,void 0,b)}catch(a){return this.emit("error",a)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},d.prototype.addEventListeners=function(){var a=this;this.ws.onopen=function(){a.onOpen()},this.ws.onclose=function(){a.onClose()},this.ws.onmessage=function(b){a.onData(b.data)},this.ws.onerror=function(b){a.onError("websocket error",b)}},d.prototype.write=function(a){function b(){d.emit("flush"),setTimeout(function(){d.writable=!0,d.emit("drain")},0)}var d=this;this.writable=!1;for(var e=a.length,f=0,h=e;f<h;f++)!function(a){g.encodePacket(a,d.supportsBinary,function(f){if(!d.usingBrowserWebSocket){var g={};if(a.options&&(g.compress=a.options.compress),d.perMessageDeflate){("string"==typeof f?c.Buffer.byteLength(f):f.length)<d.perMessageDeflate.threshold&&(g.compress=!1)}}try{d.usingBrowserWebSocket?d.ws.send(f):d.ws.send(f,g)}catch(a){k("websocket closed before onclose event")}--e||b()})}(a[f])},d.prototype.onClose=function(){f.prototype.onClose.call(this)},d.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},d.prototype.uri=function(){var a=this.query||{},b=this.secure?"wss":"ws",c="";return this.port&&("wss"===b&&443!==Number(this.port)||"ws"===b&&80!==Number(this.port))&&(c=":"+this.port),this.timestampRequests&&(a[this.timestampParam]=j()),this.supportsBinary||(a.b64=1),a=h.encode(a),a.length&&(a="?"+a),b+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+c+this.path+a},d.prototype.check=function(){return!(!m||"__initialize"in m&&this.name===d.prototype.name)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../transport":15,"component-inherit":10,debug:22,"engine.io-parser":25,parseqs:38,ws:7,yeast:237}],21:[function(a,b,c){(function(c){var d=a("has-cors");b.exports=function(a){var b=a.xdomain,e=a.xscheme,f=a.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!b||d))return new XMLHttpRequest}catch(a){}try{if("undefined"!=typeof XDomainRequest&&!e&&f)return new XDomainRequest}catch(a){}if(!b)try{return new(c[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(a){}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"has-cors":30}],22:[function(a,b,c){(function(d){function e(){return"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function f(){var a=arguments,b=this.useColors;if(a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+c.humanize(this.diff),!b)return a;var d="color: "+this.color;a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,1));var e=0,f=0;return a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(f=e))}),a.splice(f,0,d),a}function g(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function h(a){try{null==a?c.storage.removeItem("debug"):c.storage.debug=a}catch(a){}}function i(){try{return c.storage.debug}catch(a){}if(void 0!==d&&"env"in d)return d.env.DEBUG}c=b.exports=a("./debug"),c.log=g,c.formatArgs=f,c.save=h,c.load=i,c.useColors=e,c.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(a){}}(),c.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],c.formatters.j=function(a){try{return JSON.stringify(a)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}},c.enable(i())}).call(this,a("_process"))},{"./debug":23,_process:206}],23:[function(a,b,c){function d(){return c.colors[k++%c.colors.length]}function e(a){function b(){}function e(){var a=e,b=+new Date,f=b-(j||b);a.diff=f,a.prev=j,a.curr=b,j=b,null==a.useColors&&(a.useColors=c.useColors()),null==a.color&&a.useColors&&(a.color=d());for(var g=new Array(arguments.length),h=0;h<g.length;h++)g[h]=arguments[h];g[0]=c.coerce(g[0]),"string"!=typeof g[0]&&(g=["%o"].concat(g));var i=0;g[0]=g[0].replace(/%([a-z%])/g,function(b,d){if("%%"===b)return b;i++;var e=c.formatters[d];if("function"==typeof e){var f=g[i];b=e.call(a,f),g.splice(i,1),i--}return b}),g=c.formatArgs.apply(a,g),(e.log||c.log||console.log.bind(console)).apply(a,g)}b.enabled=!1,e.enabled=!0;var f=c.enabled(a)?e:b;return f.namespace=a,f}function f(a){c.save(a);for(var b=(a||"").split(/[\s,]+/),d=b.length,e=0;e<d;e++)b[e]&&(a=b[e].replace(/[\\^$+?.()|[\]{}]/g,"\\<!-- inject -->").replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$")))}function g(){c.enable("")}function h(a){var b,d;for(b=0,d=c.skips.length;b<d;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;b<d;b++)if(c.names[b].test(a))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}c=b.exports=e.debug=e,c.coerce=i,c.disable=g,c.enable=f,c.enabled=h,c.humanize=a("ms"),c.names=[],c.skips=[],c.formatters={};var j,k=0},{ms:24}],24:[function(a,b,c){function d(a){if(a=String(a),!(a.length>1e4)){var b=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1]);switch((b[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*l;case"days":case"day":case"d":return c*k;case"hours":case"hour":case"hrs":case"hr":case"h":return c*j;case"minutes":case"minute":case"mins":case"min":case"m":return c*i;case"seconds":case"second":case"secs":case"sec":case"s":return c*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}}}function e(a){return a>=k?Math.round(a/k)+"d":a>=j?Math.round(a/j)+"h":a>=i?Math.round(a/i)+"m":a>=h?Math.round(a/h)+"s":a+"ms"}function f(a){return g(a,k,"day")||g(a,j,"hour")||g(a,i,"minute")||g(a,h,"second")||a+" ms"}function g(a,b,c){if(!(a<b))return a<1.5*b?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var h=1e3,i=60*h,j=60*i,k=24*j,l=365.25*k;b.exports=function(a,b){b=b||{};var c=typeof a;if("string"===c&&a.length>0)return d(a);if("number"===c&&!1===isNaN(a))return b.long?f(a):e(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))}},{}],25:[function(a,b,c){(function(b){function d(a,b){return b("b"+c.packets[a.type]+a.data.data)}function e(a,b,d){if(!b)return c.encodeBase64Packet(a,d);var e=a.data,f=new Uint8Array(e),g=new Uint8Array(1+e.byteLength);g[0]=s[a.type];for(var h=0;h<f.length;h++)g[h+1]=f[h];return d(g.buffer)}function f(a,b,d){if(!b)return c.encodeBase64Packet(a,d);var e=new FileReader;return e.onload=function(){a.data=e.result,c.encodePacket(a,b,!0,d)},e.readAsArrayBuffer(a.data)}function g(a,b,d){if(!b)return c.encodeBase64Packet(a,d);if(r)return f(a,b,d);var e=new Uint8Array(1);return e[0]=s[a.type],d(new v([e.buffer,a.data]))}function h(a){try{a=o.decode(a)}catch(a){return!1}return a}function i(a,b,c){for(var d=new Array(a.length),e=n(a.length,c),f=0;f<a.length;f++)!function(a,c,e){b(c,function(b,c){d[a]=c,e(b,d)})}(f,a[f],e)}var j,k=a("./keys"),l=a("has-binary"),m=a("arraybuffer.slice"),n=a("after"),o=a("wtf-8");b&&b.ArrayBuffer&&(j=a("base64-arraybuffer"));var p="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),q="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),r=p||q;c.protocol=3;var s=c.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},t=k(s),u={type:"error",data:"parser error"},v=a("blob");c.encodePacket=function(a,c,f,h){"function"==typeof c&&(h=c,c=!1),"function"==typeof f&&(h=f,f=null);var i=void 0===a.data?void 0:a.data.buffer||a.data;if(b.ArrayBuffer&&i instanceof ArrayBuffer)return e(a,c,h);if(v&&i instanceof b.Blob)return g(a,c,h);if(i&&i.base64)return d(a,h);var j=s[a.type];return void 0!==a.data&&(j+=f?o.encode(String(a.data)):String(a.data)),h(""+j)},c.encodeBase64Packet=function(a,d){var e="b"+c.packets[a.type];if(v&&a.data instanceof b.Blob){var f=new FileReader;return f.onload=function(){var a=f.result.split(",")[1];d(e+a)},f.readAsDataURL(a.data)}var g;try{g=String.fromCharCode.apply(null,new Uint8Array(a.data))}catch(b){for(var h=new Uint8Array(a.data),i=new Array(h.length),j=0;j<h.length;j++)i[j]=h[j];g=String.fromCharCode.apply(null,i)}return e+=b.btoa(g),d(e)},c.decodePacket=function(a,b,d){if(void 0===a)return u;if("string"==typeof a){if("b"==a.charAt(0))return c.decodeBase64Packet(a.substr(1),b);if(d&&!1===(a=h(a)))return u;var e=a.charAt(0);return Number(e)==e&&t[e]?a.length>1?{type:t[e],data:a.substring(1)}:{type:t[e]}:u}var f=new Uint8Array(a),e=f[0],g=m(a,1);return v&&"blob"===b&&(g=new v([g])),{type:t[e],data:g}},c.decodeBase64Packet=function(a,b){var c=t[a.charAt(0)];if(!j)return{type:c,data:{base64:!0,data:a.substr(1)}};var d=j.decode(a.substr(1));return"blob"===b&&v&&(d=new v([d])),{type:c,data:d}},c.encodePayload=function(a,b,d){function e(a){return a.length+":"+a}function f(a,d){c.encodePacket(a,!!g&&b,!0,function(a){d(null,e(a))})}"function"==typeof b&&(d=b,b=null);var g=l(a);return b&&g?v&&!r?c.encodePayloadAsBlob(a,d):c.encodePayloadAsArrayBuffer(a,d):a.length?void i(a,f,function(a,b){return d(b.join(""))}):d("0:")},c.decodePayload=function(a,b,d){if("string"!=typeof a)return c.decodePayloadAsBinary(a,b,d);"function"==typeof b&&(d=b,b=null);var e;if(""==a)return d(u,0,1);for(var f,g,h="",i=0,j=a.length;i<j;i++){var k=a.charAt(i);if(":"!=k)h+=k;else{if(""==h||h!=(f=Number(h)))return d(u,0,1);if(g=a.substr(i+1,f),h!=g.length)return d(u,0,1);if(g.length){if(e=c.decodePacket(g,b,!0),u.type==e.type&&u.data==e.data)return d(u,0,1);if(!1===d(e,i+f,j))return}i+=f,h=""}}return""!=h?d(u,0,1):void 0},c.encodePayloadAsArrayBuffer=function(a,b){function d(a,b){c.encodePacket(a,!0,!0,function(a){return b(null,a)})}if(!a.length)return b(new ArrayBuffer(0));i(a,d,function(a,c){var d=c.reduce(function(a,b){var c;return c="string"==typeof b?b.length:b.byteLength,a+c.toString().length+c+2},0),e=new Uint8Array(d),f=0;return c.forEach(function(a){var b="string"==typeof a,c=a;if(b){for(var d=new Uint8Array(a.length),g=0;g<a.length;g++)d[g]=a.charCodeAt(g);c=d.buffer}e[f++]=b?0:1;for(var h=c.byteLength.toString(),g=0;g<h.length;g++)e[f++]=parseInt(h[g]);e[f++]=255;for(var d=new Uint8Array(c),g=0;g<d.length;g++)e[f++]=d[g]}),b(e.buffer)})},c.encodePayloadAsBlob=function(a,b){function d(a,b){c.encodePacket(a,!0,!0,function(a){var c=new Uint8Array(1);if(c[0]=1,"string"==typeof a){for(var d=new Uint8Array(a.length),e=0;e<a.length;e++)d[e]=a.charCodeAt(e);a=d.buffer,c[0]=0}for(var f=a instanceof ArrayBuffer?a.byteLength:a.size,g=f.toString(),h=new Uint8Array(g.length+1),e=0;e<g.length;e++)h[e]=parseInt(g[e]);if(h[g.length]=255,v){var i=new v([c.buffer,h.buffer,a]);b(null,i)}})}i(a,d,function(a,c){return b(new v(c))})},c.decodePayloadAsBinary=function(a,b,d){"function"==typeof b&&(d=b,b=null);for(var e=a,f=[],g=!1;e.byteLength>0;){for(var h=new Uint8Array(e),i=0===h[0],j="",k=1;255!=h[k];k++){if(j.length>310){g=!0;break}j+=h[k]}if(g)return d(u,0,1);e=m(e,2+j.length),j=parseInt(j);var l=m(e,0,j);if(i)try{l=String.fromCharCode.apply(null,new Uint8Array(l))}catch(a){var n=new Uint8Array(l);l="";for(var k=0;k<n.length;k++)l+=String.fromCharCode(n[k])}f.push(l),e=m(e,j)}var o=f.length;f.forEach(function(a,e){d(c.decodePacket(a,b,!0),e,o)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":26,after:1,"arraybuffer.slice":2,"base64-arraybuffer":4,blob:6,"has-binary":28,"wtf-8":236}],26:[function(a,b,c){b.exports=Object.keys||function(a){var b=[],c=Object.prototype.hasOwnProperty;for(var d in a)c.call(a,d)&&b.push(d);return b}},{}],27:[function(a,b,c){"use strict";function d(){}function e(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function f(){this._events=new d,this._eventsCount=0}var g=Object.prototype.hasOwnProperty,h="~";Object.create&&(d.prototype=Object.create(null),(new d).__proto__||(h=!1)),f.prototype.eventNames=function(){var a,b,c=[];if(0===this._eventsCount)return c;for(b in a=this._events)g.call(a,b)&&c.push(h?b.slice(1):b);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(a)):c},f.prototype.listeners=function(a,b){var c=h?h+a:a,d=this._events[c];if(b)return!!d;if(!d)return[];if(d.fn)return[d.fn];for(var e=0,f=d.length,g=new Array(f);e<f;e++)g[e]=d[e].fn;return g},f.prototype.emit=function(a,b,c,d,e,f){var g=h?h+a:a;if(!this._events[g])return!1;var i,j,k=this._events[g],l=arguments.length;if(k.fn){switch(k.once&&this.removeListener(a,k.fn,void 0,!0),l){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,b),!0;case 3:return k.fn.call(k.context,b,c),!0;case 4:return k.fn.call(k.context,b,c,d),!0;case 5:return k.fn.call(k.context,b,c,d,e),!0;case 6:return k.fn.call(k.context,b,c,d,e,f),!0}for(j=1,i=new Array(l-1);j<l;j++)i[j-1]=arguments[j];k.fn.apply(k.context,i)}else{var m,n=k.length;for(j=0;j<n;j++)switch(k[j].once&&this.removeListener(a,k[j].fn,void 0,!0),l){case 1:k[j].fn.call(k[j].context);break;case 2:k[j].fn.call(k[j].context,b);break;case 3:k[j].fn.call(k[j].context,b,c);break;case 4:k[j].fn.call(k[j].context,b,c,d);break;default:if(!i)for(m=1,i=new Array(l-1);m<l;m++)i[m-1]=arguments[m];k[j].fn.apply(k[j].context,i)}}return!0},f.prototype.on=function(a,b,c){var d=new e(b,c||this),f=h?h+a:a;return this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],d]:this._events[f].push(d):(this._events[f]=d,this._eventsCount++),this},f.prototype.once=function(a,b,c){var d=new e(b,c||this,!0),f=h?h+a:a;return this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],d]:this._events[f].push(d):(this._events[f]=d,this._eventsCount++),this},f.prototype.removeListener=function(a,b,c,e){var f=h?h+a:a;if(!this._events[f])return this;if(!b)return 0==--this._eventsCount?this._events=new d:delete this._events[f],this;var g=this._events[f];if(g.fn)g.fn!==b||e&&!g.once||c&&g.context!==c||(0==--this._eventsCount?this._events=new d:delete this._events[f]);else{for(var i=0,j=[],k=g.length;i<k;i++)(g[i].fn!==b||e&&!g[i].once||c&&g[i].context!==c)&&j.push(g[i]);j.length?this._events[f]=1===j.length?j[0]:j:0==--this._eventsCount?this._events=new d:delete this._events[f]}return this},f.prototype.removeAllListeners=function(a){var b;return a?(b=h?h+a:a,this._events[b]&&(0==--this._eventsCount?this._events=new d:delete this._events[b])):(this._events=new d,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prototype.setMaxListeners=function(){return this},f.prefixed=h,f.EventEmitter=f,void 0!==b&&(b.exports=f)},{}],28:[function(a,b,c){(function(c){function d(a){function b(a){if(!a)return!1;if(c.Buffer&&c.Buffer.isBuffer&&c.Buffer.isBuffer(a)||c.ArrayBuffer&&a instanceof ArrayBuffer||c.Blob&&a instanceof Blob||c.File&&a instanceof File)return!0;if(e(a)){for(var d=0;d<a.length;d++)if(b(a[d]))return!0}else if(a&&"object"==typeof a){a.toJSON&&"function"==typeof a.toJSON&&(a=a.toJSON());for(var f in a)if(Object.prototype.hasOwnProperty.call(a,f)&&b(a[f]))return!0}return!1}return b(a)}var e=a("isarray");b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:29}],29:[function(a,b,c){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],30:[function(a,b,c){try{b.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(a){b.exports=!1}},{}],31:[function(a,b,c){var d=[].indexOf;b.exports=function(a,b){if(d)return a.indexOf(b);for(var c=0;c<a.length;++c)if(a[c]===b)return c;return-1}},{}],32:[function(a,b,c){!function(a){var c=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,d=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,e=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,f=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),g=function(a,b){return a.test(b)},h=function(a){var b=a||navigator.userAgent,h=b.split("[FBAN");if(void 0!==h[1]&&(b=h[0]),h=b.split("Twitter"),void 0!==h[1]&&(b=h[0]),this.apple={phone:g(/iPhone/i,b),ipod:g(/iPod/i,b),tablet:!g(/iPhone/i,b)&&g(/iPad/i,b),device:g(/iPhone/i,b)||g(/iPod/i,b)||g(/iPad/i,b)},this.amazon={phone:g(d,b),tablet:!g(d,b)&&g(e,b),device:g(d,b)||g(e,b)},this.android={phone:g(d,b)||g(c,b),tablet:!g(d,b)&&!g(c,b)&&(g(e,b)||g(/Android/i,b)),device:g(d,b)||g(e,b)||g(c,b)||g(/Android/i,b)},this.windows={phone:g(/Windows Phone/i,b),tablet:g(/(?=.*\bWindows\b)(?=.*\bARM\b)/i,b),device:g(/Windows Phone/i,b)||g(/(?=.*\bWindows\b)(?=.*\bARM\b)/i,b)},this.other={blackberry:g(/BlackBerry/i,b),blackberry10:g(/BB10/i,b),opera:g(/Opera Mini/i,b),firefox:g(/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,b),chrome:g(/(CriOS|Chrome)(?=.*\bMobile\b)/i,b),device:g(/BlackBerry/i,b)||g(/BB10/i,b)||g(/Opera Mini/i,b)||g(/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,b)||g(/(CriOS|Chrome)(?=.*\bMobile\b)/i,b)},this.seven_inch=g(f,b),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},i=function(){var a=new h;return a.Class=h,a};void 0!==b&&b.exports&&"undefined"==typeof window?b.exports=h:void 0!==b&&b.exports&&"undefined"!=typeof window?b.exports=i():"function"==typeof define&&define.amd?define("isMobile",[],a.isMobile=i()):a.isMobile=i()}(this)},{}],33:[function(a,b,c){(function(a){(function(){function d(a,b){function c(a){if(c[a]!==q)return c[a];var d;if("bug-string-char-index"==a)d="a"!="a"[0];else if("json"==a)d=c("json-stringify")&&c("json-parse");else{var f,h='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==a){var i=b.stringify,k="function"==typeof i&&t;if(k){(f=function(){return 1}).toJSON=f;try{k="0"===i(0)&&"0"===i(new e)&&'""'==i(new g)&&i(s)===q&&i(q)===q&&i()===q&&"1"===i(f)&&"[1]"==i([f])&&"[null]"==i([q])&&"null"==i(null)&&"[null,null,null]"==i([q,s,null])&&i({a:[f,!0,!1,null,"\0\b\n\f\r\t"]})==h&&"1"===i(null,f)&&"[\n 1,\n 2\n]"==i([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==i(new j(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==i(new j(864e13))&&'"-000001-01-01T00:00:00.000Z"'==i(new j(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==i(new j(-1))}catch(a){k=!1}}d=k}if("json-parse"==a){var l=b.parse;if("function"==typeof l)try{if(0===l("0")&&!l(!1)){f=l(h);var m=5==f.a.length&&1===f.a[0];if(m){try{m=!l('"\t"')}catch(a){}if(m)try{m=1!==l("01")}catch(a){}if(m)try{m=1!==l("1.")}catch(a){}}}}catch(a){m=!1}d=m}}return c[a]=!!d}a||(a=h.Object()),b||(b=h.Object());var e=a.Number||h.Number,g=a.String||h.String,i=a.Object||h.Object,j=a.Date||h.Date,k=a.SyntaxError||h.SyntaxError,l=a.TypeError||h.TypeError,m=a.Math||h.Math,n=a.JSON||h.JSON;"object"==typeof n&&n&&(b.stringify=n.stringify,b.parse=n.parse);var o,p,q,r=i.prototype,s=r.toString,t=new j(-0xc782b5b800cec);try{t=-109252==t.getUTCFullYear()&&0===t.getUTCMonth()&&1===t.getUTCDate()&&10==t.getUTCHours()&&37==t.getUTCMinutes()&&6==t.getUTCSeconds()&&708==t.getUTCMilliseconds()}catch(a){}if(!c("json")){var u=c("bug-string-char-index");if(!t)var v=m.floor,w=[0,31,59,90,120,151,181,212,243,273,304,334],x=function(a,b){return w[b]+365*(a-1970)+v((a-1969+(b=+(b>1)))/4)-v((a-1901+b)/100)+v((a-1601+b)/400)};if((o=r.hasOwnProperty)||(o=function(a){var b,c={};return(c.__proto__=null,c.__proto__={toString:1},c).toString!=s?o=function(a){var b=this.__proto__,c=a in(this.__proto__=null,this);return this.__proto__=b,c}:(b=c.constructor,o=function(a){var c=(this.constructor||b).prototype;return a in this&&!(a in c&&this[a]===c[a])}),c=null,o.call(this,a)}),p=function(a,b){var c,d,e,g=0;(c=function(){this.valueOf=0}).prototype.valueOf=0,d=new c;for(e in d)o.call(d,e)&&g++;return c=d=null,g?p=2==g?function(a,b){var c,d={},e="[object Function]"==s.call(a);for(c in a)e&&"prototype"==c||o.call(d,c)||!(d[c]=1)||!o.call(a,c)||b(c)}:function(a,b){var c,d,e="[object Function]"==s.call(a);for(c in a)e&&"prototype"==c||!o.call(a,c)||(d="constructor"===c)||b(c);(d||o.call(a,c="constructor"))&&b(c)}:(d=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],p=function(a,b){var c,e,g="[object Function]"==s.call(a),h=!g&&"function"!=typeof a.constructor&&f[typeof a.hasOwnProperty]&&a.hasOwnProperty||o;for(c in a)g&&"prototype"==c||!h.call(a,c)||b(c);for(e=d.length;c=d[--e];h.call(a,c)&&b(c));}),p(a,b)},!c("json-stringify")){var y={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},z=function(a,b){return("000000"+(b||0)).slice(-a)},A=function(a){for(var b='"',c=0,d=a.length,e=!u||d>10,f=e&&(u?a.split(""):a);c<d;c++){var g=a.charCodeAt(c);switch(g){case 8:case 9:case 10:case 12:case 13:case 34:case 92:b+=y[g];break;default:if(g<32){b+="\\u00"+z(2,g.toString(16));break}b+=e?f[c]:a.charAt(c)}}return b+'"'},B=function(a,b,c,d,e,f,g){var h,i,j,k,m,n,r,t,u,w,y,C,D,E,F,G;try{h=b[a]}catch(a){}if("object"==typeof h&&h)if("[object Date]"!=(i=s.call(h))||o.call(h,"toJSON"))"function"==typeof h.toJSON&&("[object Number]"!=i&&"[object String]"!=i&&"[object Array]"!=i||o.call(h,"toJSON"))&&(h=h.toJSON(a));else if(h>-1/0&&h<1/0){if(x){for(m=v(h/864e5),j=v(m/365.2425)+1970-1;x(j+1,0)<=m;j++);for(k=v((m-x(j,0))/30.42);x(j,k+1)<=m;k++);m=1+m-x(j,k),n=(h%864e5+864e5)%864e5,r=v(n/36e5)%24,t=v(n/6e4)%60,u=v(n/1e3)%60,w=n%1e3}else j=h.getUTCFullYear(),k=h.getUTCMonth(),m=h.getUTCDate(),r=h.getUTCHours(),t=h.getUTCMinutes(),u=h.getUTCSeconds(),w=h.getUTCMilliseconds();h=(j<=0||j>=1e4?(j<0?"-":"+")+z(6,j<0?-j:j):z(4,j))+"-"+z(2,k+1)+"-"+z(2,m)+"T"+z(2,r)+":"+z(2,t)+":"+z(2,u)+"."+z(3,w)+"Z"}else h=null;if(c&&(h=c.call(b,a,h)),null===h)return"null";if("[object Boolean]"==(i=s.call(h)))return""+h;if("[object Number]"==i)return h>-1/0&&h<1/0?""+h:"null";if("[object String]"==i)return A(""+h);if("object"==typeof h){for(E=g.length;E--;)if(g[E]===h)throw l();if(g.push(h),y=[],F=f,f+=e,"[object Array]"==i){for(D=0,E=h.length;D<E;D++)C=B(D,h,c,d,e,f,g),y.push(C===q?"null":C);G=y.length?e?"[\n"+f+y.join(",\n"+f)+"\n"+F+"]":"["+y.join(",")+"]":"[]"}else p(d||h,function(a){var b=B(a,h,c,d,e,f,g);b!==q&&y.push(A(a)+":"+(e?" ":"")+b)}),G=y.length?e?"{\n"+f+y.join(",\n"+f)+"\n"+F+"}":"{"+y.join(",")+"}":"{}";return g.pop(),G}};b.stringify=function(a,b,c){var d,e,g,h;if(f[typeof b]&&b)if("[object Function]"==(h=s.call(b)))e=b;else if("[object Array]"==h){g={};for(var i,j=0,k=b.length;j<k;i=b[j++],("[object String]"==(h=s.call(i))||"[object Number]"==h)&&(g[i]=1));}if(c)if("[object Number]"==(h=s.call(c))){if((c-=c%1)>0)for(d="",c>10&&(c=10);d.length<c;d+=" ");}else"[object String]"==h&&(d=c.length<=10?c:c.slice(0,10));return B("",(i={},i[""]=a,i),e,g,d,"",[])}}if(!c("json-parse")){var C,D,E=g.fromCharCode,F={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},G=function(){throw C=D=null,k()},H=function(){for(var a,b,c,d,e,f=D,g=f.length;C<g;)switch(e=f.charCodeAt(C)){case 9:case 10:case 13:case 32:C++;break;case 123:case 125:case 91:case 93:case 58:case 44:return a=u?f.charAt(C):f[C],C++,a;case 34:for(a="@",C++;C<g;)if((e=f.charCodeAt(C))<32)G();else if(92==e)switch(e=f.charCodeAt(++C)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:a+=F[e],C++;break;case 117:for(b=++C,c=C+4;C<c;C++)(e=f.charCodeAt(C))>=48&&e<=57||e>=97&&e<=102||e>=65&&e<=70||G();a+=E("0x"+f.slice(b,C));break;default:G()}else{if(34==e)break;for(e=f.charCodeAt(C),b=C;e>=32&&92!=e&&34!=e;)e=f.charCodeAt(++C);a+=f.slice(b,C)}if(34==f.charCodeAt(C))return C++,a;G();default:if(b=C,45==e&&(d=!0,e=f.charCodeAt(++C)),e>=48&&e<=57){for(48==e&&(e=f.charCodeAt(C+1))>=48&&e<=57&&G(),d=!1;C<g&&(e=f.charCodeAt(C))>=48&&e<=57;C++);if(46==f.charCodeAt(C)){for(c=++C;c<g&&(e=f.charCodeAt(c))>=48&&e<=57;c++);c==C&&G(),C=c}if(101==(e=f.charCodeAt(C))||69==e){for(e=f.charCodeAt(++C),43!=e&&45!=e||C++,c=C;c<g&&(e=f.charCodeAt(c))>=48&&e<=57;c++);c==C&&G(),C=c}return+f.slice(b,C)}if(d&&G(),"true"==f.slice(C,C+4))return C+=4,!0;if("false"==f.slice(C,C+5))return C+=5,!1;if("null"==f.slice(C,C+4))return C+=4,null;G()}return"$"},I=function(a){var b,c;if("$"==a&&G(),"string"==typeof a){if("@"==(u?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];"]"!=(a=H());c||(c=!0))c&&(","==a?"]"==(a=H())&&G():G()),","==a&&G(),b.push(I(a));return b}if("{"==a){for(b={};"}"!=(a=H());c||(c=!0))c&&(","==a?"}"==(a=H())&&G():G()),","!=a&&"string"==typeof a&&"@"==(u?a.charAt(0):a[0])&&":"==H()||G(),b[a.slice(1)]=I(H());return b}G()}return a},J=function(a,b,c){var d=K(a,b,c);d===q?delete a[b]:a[b]=d},K=function(a,b,c){var d,e=a[b];if("object"==typeof e&&e)if("[object Array]"==s.call(e))for(d=e.length;d--;)J(e,d,c);else p(e,function(a){J(e,a,c)});return c.call(a,b,e)};b.parse=function(a,b){var c,d;return C=0,D=""+a,c=I(H()),"$"!=H()&&G(),C=D=null,b&&"[object Function]"==s.call(b)?K((d={},d[""]=c,d),"",b):c}}}return b.runInContext=d,b}var e="function"==typeof define&&define.amd,f={function:!0,object:!0},g=f[typeof c]&&c&&!c.nodeType&&c,h=f[typeof window]&&window||this,i=g&&f[typeof b]&&b&&!b.nodeType&&"object"==typeof a&&a;if(!i||i.global!==i&&i.window!==i&&i.self!==i||(h=i),g&&!e)d(h,g);else{var j=h.JSON,k=h.JSON3,l=!1,m=d(h,h.JSON3={noConflict:function(){return l||(l=!0,h.JSON=j,h.JSON3=k,j=k=null),m}});h.JSON={parse:m.parse,stringify:m.stringify}}e&&define(function(){return m})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],34:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){return a._head?(a._tail._next=b,b._prev=a._tail,a._tail=b):(a._head=b,a._tail=b),b._owner=a,b}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=function(){function a(b,c,e){void 0===c&&(c=!1),d(this,a),this._fn=b,this._once=c,this._thisArg=e,this._next=this._prev=this._owner=null}return f(a,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),a}(),h=function(){function a(){d(this,a),this._head=this._tail=void 0}return f(a,[{key:"handlers",value:function(){var a=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],b=this._head;if(a)return!!b;for(var c=[];b;)c.push(b),b=b._next;return c}},{key:"has",value:function(a){if(!(a instanceof g))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return a._owner===this}},{key:"dispatch",value:function(){var a=this._head;if(!a)return!1;for(;a;)a._once&&this.detach(a),a._fn.apply(a._thisArg,arguments),a=a._next;return!0}},{key:"add",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof a)throw new Error("MiniSignal#add(): First arg must be a Function.");return e(this,new g(a,!1,b))}},{key:"once",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof a)throw new Error("MiniSignal#once(): First arg must be a Function.");return e(this,new g(a,!0,b))}},{key:"detach",value:function(a){if(!(a instanceof g))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return a._owner!==this?this:(a._prev&&(a._prev._next=a._next),a._next&&(a._next._prev=a._prev),a===this._head?(this._head=a._next,null===a._next&&(this._tail=null)):a===this._tail&&(this._tail=a._prev,this._tail._next=null),a._owner=null,this)}},{key:"detachAll",value:function(){var a=this._head;if(!a)return this;for(this._head=this._tail=null;a;)a._owner=null,a=a._next;return this}}]),a}();h.MiniSignalBinding=g,c.default=h,b.exports=c.default},{}],35:[function(a,b,c){"use strict";function d(a){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}
var e=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;b.exports=function(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;for(var b={},c=0;c<10;c++)b["_"+String.fromCharCode(c)]=c;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var d={};return"abcdefghijklmnopqrst".split("").forEach(function(a){d[a]=a}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},d)).join("")}catch(a){return!1}}()?Object.assign:function(a,b){for(var c,h,i=d(a),j=1;j<arguments.length;j++){c=Object(arguments[j]);for(var k in c)f.call(c,k)&&(i[k]=c[k]);if(e){h=e(c);for(var l=0;l<h.length;l++)g.call(c,h[l])&&(i[h[l]]=c[h[l]])}}return i}},{}],36:[function(a,b,c){"use strict";b.exports=function(a,b){b=b||{};for(var c={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},d=c.parser[b.strictMode?"strict":"loose"].exec(a),e={},f=14;f--;)e[c.key[f]]=d[f]||"";return e[c.q.name]={},e[c.key[12]].replace(c.q.parser,function(a,b,d){b&&(e[c.q.name][b]=d)}),e}},{}],37:[function(a,b,c){(function(a){var c=/^[\],:{}\s]*$/;b.exports=function(b){return"string"==typeof b&&b?(b=b.replace(/^\s+/,"").replace(/\s+$/,""),a.JSON&&JSON.parse?JSON.parse(b):c.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?new Function("return "+b)():void 0):null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],38:[function(a,b,c){c.encode=function(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b.length&&(b+="&"),b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b},c.decode=function(a){for(var b={},c=a.split("&"),d=0,e=c.length;d<e;d++){var f=c[d].split("=");b[decodeURIComponent(f[0])]=decodeURIComponent(f[1])}return b}},{}],39:[function(a,b,c){var d=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];b.exports=function(a){var b=a,c=a.indexOf("["),f=a.indexOf("]");-1!=c&&-1!=f&&(a=a.substring(0,c)+a.substring(c,f).replace(/:/g,";")+a.substring(f,a.length));for(var g=d.exec(a||""),h={},i=14;i--;)h[e[i]]=g[i]||"";return-1!=c&&-1!=f&&(h.source=b,h.host=h.host.substring(1,h.host.length-1).replace(/;/g,":"),h.authority=h.authority.replace("[","").replace("]","").replace(/;/g,":"),h.ipv6uri=!0),h}},{}],40:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;i<g;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return b<0&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:206}],41:[function(a,b,c){var d=new ArrayBuffer(0),e=function(a,b,c,e){this.gl=a,this.buffer=a.createBuffer(),this.type=b||a.ARRAY_BUFFER,this.drawType=e||a.STATIC_DRAW,this.data=d,c&&this.upload(c),this._updateID=0};e.prototype.upload=function(a,b,c){c||this.bind();var d=this.gl;a=a||this.data,b=b||0,this.data.byteLength>=a.byteLength?d.bufferSubData(this.type,b,a):d.bufferData(this.type,a,this.drawType),this.data=a},e.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},e.createVertexBuffer=function(a,b,c){return new e(a,a.ARRAY_BUFFER,b,c)},e.createIndexBuffer=function(a,b,c){return new e(a,a.ELEMENT_ARRAY_BUFFER,b,c)},e.create=function(a,b,c,d){return new e(a,b,c,d)},e.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},b.exports=e},{}],42:[function(a,b,c){var d=a("./GLTexture"),e=function(a,b,c){this.gl=a,this.framebuffer=a.createFramebuffer(),this.stencil=null,this.texture=null,this.width=b||100,this.height=c||100};e.prototype.enableTexture=function(a){var b=this.gl;this.texture=a||new d(b),this.texture.bind(),this.bind(),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,this.texture.texture,0)},e.prototype.enableStencil=function(){if(!this.stencil){var a=this.gl;this.stencil=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,this.stencil),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,this.stencil),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,this.width,this.height)}},e.prototype.clear=function(a,b,c,d){this.bind();var e=this.gl;e.clearColor(a,b,c,d),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)},e.prototype.bind=function(){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,this.framebuffer)},e.prototype.unbind=function(){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,null)},e.prototype.resize=function(a,b){var c=this.gl;this.width=a,this.height=b,this.texture&&this.texture.uploadData(null,a,b),this.stencil&&(c.bindRenderbuffer(c.RENDERBUFFER,this.stencil),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,a,b))},e.prototype.destroy=function(){var a=this.gl;this.texture&&this.texture.destroy(),a.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},e.createRGBA=function(a,b,c,f){var g=d.fromData(a,null,b,c);g.enableNearestScaling(),g.enableWrapClamp();var h=new e(a,b,c);return h.enableTexture(g),h.unbind(),h},e.createFloat32=function(a,b,c,f){var g=new d.fromData(a,f,b,c);g.enableNearestScaling(),g.enableWrapClamp();var h=new e(a,b,c);return h.enableTexture(g),h.unbind(),h},b.exports=e},{"./GLTexture":44}],43:[function(a,b,c){var d=a("./shader/compileProgram"),e=a("./shader/extractAttributes"),f=a("./shader/extractUniforms"),g=a("./shader/setPrecision"),h=a("./shader/generateUniformAccessObject"),i=function(a,b,c,i,j){this.gl=a,i&&(b=g(b,i),c=g(c,i)),this.program=d(a,b,c,j),this.attributes=e(a,this.program),this.uniformData=f(a,this.program),this.uniforms=h(a,this.uniformData)};i.prototype.bind=function(){this.gl.useProgram(this.program)},i.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},b.exports=i},{"./shader/compileProgram":49,"./shader/extractAttributes":51,"./shader/extractUniforms":52,"./shader/generateUniformAccessObject":53,"./shader/setPrecision":57}],44:[function(a,b,c){var d=function(a,b,c,d,e){this.gl=a,this.texture=a.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=b||-1,this.height=c||-1,this.format=d||a.RGBA,this.type=e||a.UNSIGNED_BYTE};d.prototype.upload=function(a){this.bind();var b=this.gl;b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var c=a.videoWidth||a.width,d=a.videoHeight||a.height;d!==this.height||c!==this.width?b.texImage2D(b.TEXTURE_2D,0,this.format,this.format,this.type,a):b.texSubImage2D(b.TEXTURE_2D,0,0,0,this.format,this.type,a),this.width=c,this.height=d};var e=!1;d.prototype.uploadData=function(a,b,c){this.bind();var d=this.gl;if(a instanceof Float32Array){if(!e){if(!d.getExtension("OES_texture_float"))throw new Error("floating point textures not available");e=!0}this.type=d.FLOAT}else this.type=this.type||d.UNSIGNED_BYTE;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),b!==this.width||c!==this.height?d.texImage2D(d.TEXTURE_2D,0,this.format,b,c,0,this.format,this.type,a||null):d.texSubImage2D(d.TEXTURE_2D,0,0,0,b,c,this.format,this.type,a||null),this.width=b,this.height=c},d.prototype.bind=function(a){var b=this.gl;void 0!==a&&b.activeTexture(b.TEXTURE0+a),b.bindTexture(b.TEXTURE_2D,this.texture)},d.prototype.unbind=function(){var a=this.gl;a.bindTexture(a.TEXTURE_2D,null)},d.prototype.minFilter=function(a){var b=this.gl;this.bind(),this.mipmap?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a?b.LINEAR_MIPMAP_LINEAR:b.NEAREST_MIPMAP_NEAREST):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a?b.LINEAR:b.NEAREST)},d.prototype.magFilter=function(a){var b=this.gl;this.bind(),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,a?b.LINEAR:b.NEAREST)},d.prototype.enableMipmap=function(){var a=this.gl;this.bind(),this.mipmap=!0,a.generateMipmap(a.TEXTURE_2D)},d.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},d.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},d.prototype.enableWrapClamp=function(){var a=this.gl;this.bind(),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE)},d.prototype.enableWrapRepeat=function(){var a=this.gl;this.bind(),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT)},d.prototype.enableWrapMirrorRepeat=function(){var a=this.gl;this.bind(),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.MIRRORED_REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.MIRRORED_REPEAT)},d.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},d.fromSource=function(a,b,c){var e=new d(a);return e.premultiplyAlpha=c||!1,e.upload(b),e},d.fromData=function(a,b,c,e){var f=new d(a);return f.uploadData(b,c,e),f},b.exports=d},{}],45:[function(a,b,c){function d(a,b){if(this.nativeVaoExtension=null,d.FORCE_NATIVE||(this.nativeVaoExtension=a.getExtension("OES_vertex_array_object")||a.getExtension("MOZ_OES_vertex_array_object")||a.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=b,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var c=a.getParameter(a.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(c),attribState:new Array(c)}}this.gl=a,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var e=a("./setVertexAttribArrays");d.prototype.constructor=d,b.exports=d,d.FORCE_NATIVE=!1,d.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},d.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},d.prototype.activate=function(){for(var a=this.gl,b=null,c=0;c<this.attributes.length;c++){var d=this.attributes[c];b!==d.buffer&&(d.buffer.bind(),b=d.buffer),a.vertexAttribPointer(d.attribute.location,d.attribute.size,d.type||a.FLOAT,d.normalized||!1,d.stride||0,d.start||0)}return e(a,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},d.prototype.addAttribute=function(a,b,c,d,e,f){return this.attributes.push({buffer:a,attribute:b,location:b.location,type:c||this.gl.FLOAT,normalized:d||!1,stride:e||0,start:f||0}),this.dirty=!0,this},d.prototype.addIndex=function(a){return this.indexBuffer=a,this.dirty=!0,this},d.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},d.prototype.draw=function(a,b,c){var d=this.gl;return this.indexBuffer?d.drawElements(a,b||this.indexBuffer.data.length,d.UNSIGNED_SHORT,2*(c||0)):d.drawArrays(a,c,b||this.getSize()),this},d.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},d.prototype.getSize=function(){var a=this.attributes[0];return a.buffer.data.length/(a.stride/4||a.attribute.size)}},{"./setVertexAttribArrays":48}],46:[function(a,b,c){var d=function(a,b){var c=a.getContext("webgl",b)||a.getContext("experimental-webgl",b);if(!c)throw new Error("This browser does not support webGL. Try using the canvas renderer");return c};b.exports=d},{}],47:[function(a,b,c){var d={createContext:a("./createContext"),setVertexAttribArrays:a("./setVertexAttribArrays"),GLBuffer:a("./GLBuffer"),GLFramebuffer:a("./GLFramebuffer"),GLShader:a("./GLShader"),GLTexture:a("./GLTexture"),VertexArrayObject:a("./VertexArrayObject"),shader:a("./shader")};void 0!==b&&b.exports&&(b.exports=d),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=d)},{"./GLBuffer":41,"./GLFramebuffer":42,"./GLShader":43,"./GLTexture":44,"./VertexArrayObject":45,"./createContext":46,"./setVertexAttribArrays":48,"./shader":54}],48:[function(a,b,c){var d=function(a,b,c){var d;if(c){var e=c.tempAttribState,f=c.attribState;for(d=0;d<e.length;d++)e[d]=!1;for(d=0;d<b.length;d++)e[b[d].attribute.location]=!0;for(d=0;d<f.length;d++)f[d]!==e[d]&&(f[d]=e[d],c.attribState[d]?a.enableVertexAttribArray(d):a.disableVertexAttribArray(d))}else for(d=0;d<b.length;d++){var g=b[d];a.enableVertexAttribArray(g.attribute.location)}};b.exports=d},{}],49:[function(a,b,c){var d=function(a,b,c,d){var f=e(a,a.VERTEX_SHADER,b),g=e(a,a.FRAGMENT_SHADER,c),h=a.createProgram();if(a.attachShader(h,f),a.attachShader(h,g),d)for(var i in d)a.bindAttribLocation(h,d[i],i);return a.linkProgram(h),a.getProgramParameter(h,a.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",a.getProgramParameter(h,a.VALIDATE_STATUS)),console.error("gl.getError()",a.getError()),""!==a.getProgramInfoLog(h)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",a.getProgramInfoLog(h)),a.deleteProgram(h),h=null),a.deleteShader(f),a.deleteShader(g),h},e=function(a,b,c){var d=a.createShader(b);return a.shaderSource(d,c),a.compileShader(d),a.getShaderParameter(d,a.COMPILE_STATUS)?d:(console.log(a.getShaderInfoLog(d)),null)};b.exports=d},{}],50:[function(a,b,c){var d=function(a,b){switch(a){case"float":return 0;case"vec2":return new Float32Array(2*b);case"vec3":return new Float32Array(3*b);case"vec4":return new Float32Array(4*b);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*b);case"ivec3":return new Int32Array(3*b);case"ivec4":return new Int32Array(4*b);case"bool":return!1;case"bvec2":return e(2*b);case"bvec3":return e(3*b);case"bvec4":return e(4*b);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},e=function(a){for(var b=new Array(a),c=0;c<b.length;c++)b[c]=!1;return b};b.exports=d},{}],51:[function(a,b,c){var d=a("./mapType"),e=a("./mapSize"),f=function(a,b){for(var c={},f=a.getProgramParameter(b,a.ACTIVE_ATTRIBUTES),h=0;h<f;h++){var i=a.getActiveAttrib(b,h),j=d(a,i.type);c[i.name]={type:j,size:e(j),location:a.getAttribLocation(b,i.name),pointer:g}}return c},g=function(a,b,c,d){gl.vertexAttribPointer(this.location,this.size,a||gl.FLOAT,b||!1,c||0,d||0)};b.exports=f},{"./mapSize":55,"./mapType":56}],52:[function(a,b,c){var d=a("./mapType"),e=a("./defaultValue"),f=function(a,b){for(var c={},f=a.getProgramParameter(b,a.ACTIVE_UNIFORMS),g=0;g<f;g++){var h=a.getActiveUniform(b,g),i=h.name.replace(/\[.*?\]/,""),j=d(a,h.type);c[i]={type:j,size:h.size,location:a.getUniformLocation(b,i),value:e(j,h.size)}}return c};b.exports=f},{"./defaultValue":50,"./mapType":56}],53:[function(a,b,c){var d=function(a,b){var c={data:{}};c.gl=a;for(var d=Object.keys(b),h=0;h<d.length;h++){var i=d[h],j=i.split("."),k=j[j.length-1],l=g(j,c),m=b[i];l.data[k]=m,l.gl=a,Object.defineProperty(l,k,{get:e(k),set:f(k,m)})}return c},e=function(a){var b=h.replace("%%",a);return new Function(b)},f=function(a,b){var c,d=i.replace(/%%/g,a);return c=1===b.size?j[b.type]:k[b.type],c&&(d+="\nthis.gl."+c+";"),new Function("value",d)},g=function(a,b){for(var c=b,d=0;d<a.length-1;d++){var e=c[a[d]]||{data:{}};c[a[d]]=e,c=e}return c},h=["return this.data.%%.value;"].join("\n"),i=["this.data.%%.value = value;","var location = this.data.%%.location;"].join("\n"),j={float:"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])",int:"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"},k={float:"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)",int:"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"};b.exports=d},{}],54:[function(a,b,c){b.exports={compileProgram:a("./compileProgram"),defaultValue:a("./defaultValue"),extractAttributes:a("./extractAttributes"),extractUniforms:a("./extractUniforms"),generateUniformAccessObject:a("./generateUniformAccessObject"),setPrecision:a("./setPrecision"),mapSize:a("./mapSize"),mapType:a("./mapType")}},{"./compileProgram":49,"./defaultValue":50,"./extractAttributes":51,"./extractUniforms":52,"./generateUniformAccessObject":53,"./mapSize":55,"./mapType":56,"./setPrecision":57}],55:[function(a,b,c){var d=function(a){return e[a]},e={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};b.exports=d},{}],56:[function(a,b,c){var d=function(a,b){if(!e){var c=Object.keys(f);e={};for(var d=0;d<c.length;++d){var g=c[d];e[a[g]]=f[g]}}return e[b]},e=null,f={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};b.exports=d},{}],57:[function(a,b,c){var d=function(a,b){return"precision"!==a.substring(0,9)?"precision "+b+" float;\n"+a:a};b.exports=d},{}],58:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("../core"),g=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(f),h=a("ismobilejs"),i=d(h),j=a("./accessibleTarget"),k=d(j);g.utils.mixins.delayMixin(g.DisplayObject.prototype,k.default);var l=100,m=0,n=0,o=2,p=function(){function a(b){e(this,a),!i.default.tablet&&!i.default.phone||navigator.isCocoonJS||this.createTouchHook();var c=document.createElement("div");c.style.width=l+"px",c.style.height=l+"px",c.style.position="absolute",c.style.top=m+"px",c.style.left=n+"px",c.style.zIndex=o,this.div=c,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=b,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return a.prototype.createTouchHook=function(){var a=this,b=document.createElement("button");b.style.width="1px",b.style.height="1px",b.style.position="absolute",b.style.top="-1000px",b.style.left="-1000px",b.style.zIndex=2,b.style.backgroundColor="#FF0000",b.title="HOOK DIV",b.addEventListener("focus",function(){a.isMobileAccessabillity=!0,a.activate(),document.body.removeChild(b)}),document.body.appendChild(b)},a.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},a.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},a.prototype.updateAccessibleObjects=function(a){if(a.visible){a.accessible&&a.interactive&&(a._accessibleActive||this.addChild(a),a.renderId=this.renderId);for(var b=a.children,c=b.length-1;c>=0;c--)this.updateAccessibleObjects(b[c])}},a.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var a=this.renderer.view.getBoundingClientRect(),b=a.width/this.renderer.width,c=a.height/this.renderer.height,d=this.div;d.style.left=a.left+"px",d.style.top=a.top+"px",d.style.width=this.renderer.width+"px",d.style.height=this.renderer.height+"px";for(var e=0;e<this.children.length;e++){var f=this.children[e];if(f.renderId!==this.renderId)f._accessibleActive=!1,g.utils.removeItems(this.children,e,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,e--,0===this.children.length&&this.deactivate();else{d=f._accessibleDiv;var h=f.hitArea,i=f.worldTransform;f.hitArea?(d.style.left=(i.tx+h.x*i.a)*b+"px",d.style.top=(i.ty+h.y*i.d)*c+"px",d.style.width=h.width*i.a*b+"px",d.style.height=h.height*i.d*c+"px"):(h=f.getBounds(),this.capHitArea(h),d.style.left=h.x*b+"px",d.style.top=h.y*c+"px",d.style.width=h.width*b+"px",d.style.height=h.height*c+"px")}}this.renderId++}},a.prototype.capHitArea=function(a){a.x<0&&(a.width+=a.x,a.x=0),a.y<0&&(a.height+=a.y,a.y=0),a.x+a.width>this.renderer.width&&(a.width=this.renderer.width-a.x),a.y+a.height>this.renderer.height&&(a.height=this.renderer.height-a.y)},a.prototype.addChild=function(a){var b=this.pool.pop();b||(b=document.createElement("button"),b.style.width=l+"px",b.style.height=l+"px",b.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",b.style.position="absolute",b.style.zIndex=o,b.style.borderStyle="none",b.addEventListener("click",this._onClick.bind(this)),b.addEventListener("focus",this._onFocus.bind(this)),b.addEventListener("focusout",this._onFocusOut.bind(this))),a.accessibleTitle?b.title=a.accessibleTitle:a.accessibleTitle||a.accessibleHint||(b.title="displayObject "+this.tabIndex),a.accessibleHint&&b.setAttribute("aria-label",a.accessibleHint),a._accessibleActive=!0,a._accessibleDiv=b,b.displayObject=a,this.children.push(a),this.div.appendChild(a._accessibleDiv),a._accessibleDiv.tabIndex=a.tabIndex},a.prototype._onClick=function(a){var b=this.renderer.plugins.interaction;b.dispatchEvent(a.target.displayObject,"click",b.eventData)},a.prototype._onFocus=function(a){var b=this.renderer.plugins.interaction;b.dispatchEvent(a.target.displayObject,"mouseover",b.eventData)},a.prototype._onFocusOut=function(a){var b=this.renderer.plugins.interaction;b.dispatchEvent(a.target.displayObject,"mouseout",b.eventData)},a.prototype._onKeyDown=function(a){9===a.keyCode&&this.activate()},a.prototype._onMouseMove=function(){this.deactivate()},a.prototype.destroy=function(){this.div=null;for(var a=0;a<this.children.length;a++)this.children[a].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},a}();c.default=p,g.WebGLRenderer.registerPlugin("accessibility",p),g.CanvasRenderer.registerPlugin("accessibility",p)},{"../core":83,"./accessibleTarget":59,ismobilejs:32}],59:[function(a,b,c){"use strict";c.__esModule=!0,c.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],60:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=a("./accessibleTarget");Object.defineProperty(c,"accessibleTarget",{enumerable:!0,get:function(){return d(e).default}});var f=a("./AccessibilityManager");Object.defineProperty(c,"AccessibilityManager",{enumerable:!0,get:function(){return d(f).default}})},{"./AccessibilityManager":58,"./accessibleTarget":59}],61:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./autoDetectRenderer"),h=a("./display/Container"),i=d(h),j=a("./ticker"),k=a("./settings"),l=d(k),m=a("./const"),n=function(){function a(b,c,d,f,h){e(this,a),"number"==typeof b&&(b=Object.assign({width:b,height:c||l.default.RENDER_OPTIONS.height,forceCanvas:!!f,sharedTicker:!!h},d)),this._options=b=Object.assign({sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},b),this.renderer=(0,g.autoDetectRenderer)(b),this.stage=new i.default,this._ticker=null,this.ticker=b.sharedTicker?j.shared:new j.Ticker,this.start()}return a.prototype.render=function(){this.renderer.render(this.stage)},a.prototype.stop=function(){this._ticker.stop()},a.prototype.start=function(){this._ticker.start()},a.prototype.destroy=function(a){var b=this._ticker;this.ticker=null,b.destroy(),this.stage.destroy(),this.stage=null,this.renderer.destroy(a),this.renderer=null,this._options=null},f(a,[{key:"ticker",set:function(a){this._ticker&&this._ticker.remove(this.render,this),this._ticker=a,a&&a.add(this.render,this,m.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),a}();c.default=n},{"./autoDetectRenderer":63,"./const":64,"./display/Container":66,"./settings":119,"./ticker":138}],62:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b){if(a instanceof Array){if("precision"!==a[0].substring(0,9)){var c=a.slice(0);return c.unshift("precision "+b+" float;"),c}}else if("precision"!==a.substring(0,9))return"precision "+b+" float;\n"+a;return a}c.__esModule=!0;var h=a("pixi-gl-core"),i=a("./settings"),j=function(a){return a&&a.__esModule?a:{default:a}}(i),k=function(a){function b(c,f,h){return d(this,b),e(this,a.call(this,c,g(f,j.default.PRECISION_VERTEX),g(h,j.default.PRECISION_FRAGMENT)))}return f(b,a),b}(h.GLShader);c.default=k},{"./settings":119,"pixi-gl-core":47}],63:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b,c,d){var e=a&&a.forceCanvas;return void 0!==d&&(e=d),!e&&g.isWebGLSupported()?new k.default(a,b,c):new i.default(a,b,c)}c.__esModule=!0,c.autoDetectRenderer=e;var f=a("./utils"),g=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(f),h=a("./renderers/canvas/CanvasRenderer"),i=d(h),j=a("./renderers/webgl/WebGLRenderer"),k=d(j)},{"./renderers/canvas/CanvasRenderer":95,"./renderers/webgl/WebGLRenderer":102,"./utils":142}],64:[function(a,b,c){"use strict";c.__esModule=!0;c.VERSION="4.5.1",c.PI_2=2*Math.PI,c.RAD_TO_DEG=180/Math.PI,c.DEG_TO_RAD=Math.PI/180,c.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},c.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},c.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},c.SCALE_MODES={LINEAR:0,NEAREST:1},c.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},c.GC_MODES={AUTO:0,MANUAL:1},c.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,c.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,c.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,c.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},c.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},c.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},c.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},c.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],65:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("../math"),f=function(){function a(){d(this,a),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return a.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},a.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},a.prototype.getRectangle=function(a){return this.minX>this.maxX||this.minY>this.maxY?e.Rectangle.EMPTY:(a=a||new e.Rectangle(0,0,1,1),a.x=this.minX,a.y=this.minY,a.width=this.maxX-this.minX,a.height=this.maxY-this.minY,a)},a.prototype.addPoint=function(a){this.minX=Math.min(this.minX,a.x),this.maxX=Math.max(this.maxX,a.x),this.minY=Math.min(this.minY,a.y),this.maxY=Math.max(this.maxY,a.y)},
a.prototype.addQuad=function(a){var b=this.minX,c=this.minY,d=this.maxX,e=this.maxY,f=a[0],g=a[1];b=f<b?f:b,c=g<c?g:c,d=f>d?f:d,e=g>e?g:e,f=a[2],g=a[3],b=f<b?f:b,c=g<c?g:c,d=f>d?f:d,e=g>e?g:e,f=a[4],g=a[5],b=f<b?f:b,c=g<c?g:c,d=f>d?f:d,e=g>e?g:e,f=a[6],g=a[7],b=f<b?f:b,c=g<c?g:c,d=f>d?f:d,e=g>e?g:e,this.minX=b,this.minY=c,this.maxX=d,this.maxY=e},a.prototype.addFrame=function(a,b,c,d,e){var f=a.worldTransform,g=f.a,h=f.b,i=f.c,j=f.d,k=f.tx,l=f.ty,m=this.minX,n=this.minY,o=this.maxX,p=this.maxY,q=g*b+i*c+k,r=h*b+j*c+l;m=q<m?q:m,n=r<n?r:n,o=q>o?q:o,p=r>p?r:p,q=g*d+i*c+k,r=h*d+j*c+l,m=q<m?q:m,n=r<n?r:n,o=q>o?q:o,p=r>p?r:p,q=g*b+i*e+k,r=h*b+j*e+l,m=q<m?q:m,n=r<n?r:n,o=q>o?q:o,p=r>p?r:p,q=g*d+i*e+k,r=h*d+j*e+l,m=q<m?q:m,n=r<n?r:n,o=q>o?q:o,p=r>p?r:p,this.minX=m,this.minY=n,this.maxX=o,this.maxY=p},a.prototype.addVertices=function(a,b,c,d){for(var e=a.worldTransform,f=e.a,g=e.b,h=e.c,i=e.d,j=e.tx,k=e.ty,l=this.minX,m=this.minY,n=this.maxX,o=this.maxY,p=c;p<d;p+=2){var q=b[p],r=b[p+1],s=f*q+h*r+j,t=i*r+g*q+k;l=s<l?s:l,m=t<m?t:m,n=s>n?s:n,o=t>o?t:o}this.minX=l,this.minY=m,this.maxX=n,this.maxY=o},a.prototype.addBounds=function(a){var b=this.minX,c=this.minY,d=this.maxX,e=this.maxY;this.minX=a.minX<b?a.minX:b,this.minY=a.minY<c?a.minY:c,this.maxX=a.maxX>d?a.maxX:d,this.maxY=a.maxY>e?a.maxY:e},a.prototype.addBoundsMask=function(a,b){var c=a.minX>b.minX?a.minX:b.minX,d=a.minY>b.minY?a.minY:b.minY,e=a.maxX<b.maxX?a.maxX:b.maxX,f=a.maxY<b.maxY?a.maxY:b.maxY;if(c<=e&&d<=f){var g=this.minX,h=this.minY,i=this.maxX,j=this.maxY;this.minX=c<g?c:g,this.minY=d<h?d:h,this.maxX=e>i?e:i,this.maxY=f>j?f:j}},a.prototype.addBoundsArea=function(a,b){var c=a.minX>b.x?a.minX:b.x,d=a.minY>b.y?a.minY:b.y,e=a.maxX<b.x+b.width?a.maxX:b.x+b.width,f=a.maxY<b.y+b.height?a.maxY:b.y+b.height;if(c<=e&&d<=f){var g=this.minX,h=this.minY,i=this.maxX,j=this.maxY;this.minX=c<g?c:g,this.minY=d<h?d:h,this.maxX=e>i?e:i,this.maxY=f>j?f:j}},a}();c.default=f},{"../math":88}],66:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("../utils"),i=a("./DisplayObject"),j=function(a){return a&&a.__esModule?a:{default:a}}(i),k=function(a){function b(){d(this,b);var c=e(this,a.call(this));return c.children=[],c}return f(b,a),b.prototype.onChildrenChange=function(){},b.prototype.addChild=function(a){var b=arguments.length;if(b>1)for(var c=0;c<b;c++)this.addChild(arguments[c]);else a.parent&&a.parent.removeChild(a),a.parent=this,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),a.emit("added",this);return a},b.prototype.addChildAt=function(a,b){if(b<0||b>this.children.length)throw new Error(a+"addChildAt: The index "+b+" supplied is out of bounds "+this.children.length);return a.parent&&a.parent.removeChild(a),a.parent=this,a.transform._parentID=-1,this.children.splice(b,0,a),this._boundsID++,this.onChildrenChange(b),a.emit("added",this),a},b.prototype.swapChildren=function(a,b){if(a!==b){var c=this.getChildIndex(a),d=this.getChildIndex(b);this.children[c]=b,this.children[d]=a,this.onChildrenChange(c<d?c:d)}},b.prototype.getChildIndex=function(a){var b=this.children.indexOf(a);if(-1===b)throw new Error("The supplied DisplayObject must be a child of the caller");return b},b.prototype.setChildIndex=function(a,b){if(b<0||b>=this.children.length)throw new Error("The supplied index is out of bounds");var c=this.getChildIndex(a);(0,h.removeItems)(this.children,c,1),this.children.splice(b,0,a),this.onChildrenChange(b)},b.prototype.getChildAt=function(a){if(a<0||a>=this.children.length)throw new Error("getChildAt: Index ("+a+") does not exist.");return this.children[a]},b.prototype.removeChild=function(a){var b=arguments.length;if(b>1)for(var c=0;c<b;c++)this.removeChild(arguments[c]);else{var d=this.children.indexOf(a);if(-1===d)return null;a.parent=null,a.transform._parentID=-1,(0,h.removeItems)(this.children,d,1),this._boundsID++,this.onChildrenChange(d),a.emit("removed",this)}return a},b.prototype.removeChildAt=function(a){var b=this.getChildAt(a);return b.parent=null,b.transform._parentID=-1,(0,h.removeItems)(this.children,a,1),this._boundsID++,this.onChildrenChange(a),b.emit("removed",this),b},b.prototype.removeChildren=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments[1],c=a,d="number"==typeof b?b:this.children.length,e=d-c,f=void 0;if(e>0&&e<=d){f=this.children.splice(c,e);for(var g=0;g<f.length;++g)f[g].parent=null,f[g].transform&&(f[g].transform._parentID=-1);this._boundsID++,this.onChildrenChange(a);for(var h=0;h<f.length;++h)f[h].emit("removed",this);return f}if(0===e&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},b.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var a=0,b=this.children.length;a<b;++a){var c=this.children[a];c.visible&&c.updateTransform()}},b.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var a=0;a<this.children.length;a++){var b=this.children[a];b.visible&&b.renderable&&(b.calculateBounds(),b._mask?(b._mask.calculateBounds(),this._bounds.addBoundsMask(b._bounds,b._mask._bounds)):b.filterArea?this._bounds.addBoundsArea(b._bounds,b.filterArea):this._bounds.addBounds(b._bounds))}this._lastBoundsID=this._boundsID},b.prototype._calculateBounds=function(){},b.prototype.renderWebGL=function(a){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(a);else{this._renderWebGL(a);for(var b=0,c=this.children.length;b<c;++b)this.children[b].renderWebGL(a)}},b.prototype.renderAdvancedWebGL=function(a){a.flush();var b=this._filters,c=this._mask;if(b){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var d=0;d<b.length;d++)b[d].enabled&&this._enabledFilters.push(b[d]);this._enabledFilters.length&&a.filterManager.pushFilter(this,this._enabledFilters)}c&&a.maskManager.pushMask(this,this._mask),this._renderWebGL(a);for(var e=0,f=this.children.length;e<f;e++)this.children[e].renderWebGL(a);a.flush(),c&&a.maskManager.popMask(this,this._mask),b&&this._enabledFilters&&this._enabledFilters.length&&a.filterManager.popFilter()},b.prototype._renderWebGL=function(a){},b.prototype._renderCanvas=function(a){},b.prototype.renderCanvas=function(a){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&a.maskManager.pushMask(this._mask),this._renderCanvas(a);for(var b=0,c=this.children.length;b<c;++b)this.children[b].renderCanvas(a);this._mask&&a.maskManager.popMask(a)}},b.prototype.destroy=function(b){a.prototype.destroy.call(this);var c="boolean"==typeof b?b:b&&b.children,d=this.removeChildren(0,this.children.length);if(c)for(var e=0;e<d.length;++e)d[e].destroy(b)},g(b,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(a){var b=this.getLocalBounds().width;this.scale.x=0!==b?a/b:1,this._width=a}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(a){var b=this.getLocalBounds().height;this.scale.y=0!==b?a/b:1,this._height=a}}]),b}(j.default);c.default=k,k.prototype.containerUpdateTransform=k.prototype.updateTransform},{"../utils":142,"./DisplayObject":67}],67:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("eventemitter3"),j=d(i),k=a("../const"),l=a("../settings"),m=d(l),n=a("./TransformStatic"),o=d(n),p=a("./Transform"),q=d(p),r=a("./Bounds"),s=d(r),t=a("../math"),u=function(a){function b(){e(this,b);var c=f(this,a.call(this)),d=m.default.TRANSFORM_MODE===k.TRANSFORM_MODE.STATIC?o.default:q.default;return c.tempDisplayObjectParent=null,c.transform=new d,c.alpha=1,c.visible=!0,c.renderable=!0,c.parent=null,c.worldAlpha=1,c.filterArea=null,c._filters=null,c._enabledFilters=null,c._bounds=new s.default,c._boundsID=0,c._lastBoundsID=-1,c._boundsRect=null,c._localBoundsRect=null,c._mask=null,c._destroyed=!1,c}return g(b,a),b.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},b.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},b.prototype.getBounds=function(a,b){return a||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),b||(this._boundsRect||(this._boundsRect=new t.Rectangle),b=this._boundsRect),this._bounds.getRectangle(b)},b.prototype.getLocalBounds=function(a){var b=this.transform,c=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,a||(this._localBoundsRect||(this._localBoundsRect=new t.Rectangle),a=this._localBoundsRect);var d=this.getBounds(!1,a);return this.parent=c,this.transform=b,d},b.prototype.toGlobal=function(a,b){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(a,b)},b.prototype.toLocal=function(a,b,c,d){return b&&(a=b.toGlobal(a,c,d)),d||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(a,c)},b.prototype.renderWebGL=function(a){},b.prototype.renderCanvas=function(a){},b.prototype.setParent=function(a){if(!a||!a.addChild)throw new Error("setParent: Argument must be a Container");return a.addChild(this),a},b.prototype.setTransform=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,g=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,i=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=a,this.position.y=b,this.scale.x=c||1,this.scale.y=d||1,this.rotation=e,this.skew.x=f,this.skew.y=g,this.pivot.x=h,this.pivot.y=i,this},b.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},h(b,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new b),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(a){this.transform.position.x=a}},{key:"y",get:function(){return this.position.y},set:function(a){this.transform.position.y=a}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(a){this.transform.position.copy(a)}},{key:"scale",get:function(){return this.transform.scale},set:function(a){this.transform.scale.copy(a)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(a){this.transform.pivot.copy(a)}},{key:"skew",get:function(){return this.transform.skew},set:function(a){this.transform.skew.copy(a)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(a){this.transform.rotation=a}},{key:"worldVisible",get:function(){var a=this;do{if(!a.visible)return!1;a=a.parent}while(a);return!0}},{key:"mask",get:function(){return this._mask},set:function(a){this._mask&&(this._mask.renderable=!0),this._mask=a,this._mask&&(this._mask.renderable=!1)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(a){this._filters=a&&a.slice()}}]),b}(j.default);c.default=u,u.prototype.displayObjectUpdateTransform=u.prototype.updateTransform},{"../const":64,"../math":88,"../settings":119,"./Bounds":65,"./Transform":68,"./TransformStatic":70,eventemitter3:27}],68:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("../math"),i=a("./TransformBase"),j=function(a){return a&&a.__esModule?a:{default:a}}(i),k=function(a){function b(){d(this,b);var c=e(this,a.call(this));return c.position=new h.Point(0,0),c.scale=new h.Point(1,1),c.skew=new h.ObservablePoint(c.updateSkew,c,0,0),c.pivot=new h.Point(0,0),c._rotation=0,c._cx=1,c._sx=0,c._cy=0,c._sy=1,c}return f(b,a),b.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},b.prototype.updateLocalTransform=function(){var a=this.localTransform;a.a=this._cx*this.scale.x,a.b=this._sx*this.scale.x,a.c=this._cy*this.scale.y,a.d=this._sy*this.scale.y,a.tx=this.position.x-(this.pivot.x*a.a+this.pivot.y*a.c),a.ty=this.position.y-(this.pivot.x*a.b+this.pivot.y*a.d)},b.prototype.updateTransform=function(a){var b=this.localTransform;b.a=this._cx*this.scale.x,b.b=this._sx*this.scale.x,b.c=this._cy*this.scale.y,b.d=this._sy*this.scale.y,b.tx=this.position.x-(this.pivot.x*b.a+this.pivot.y*b.c),b.ty=this.position.y-(this.pivot.x*b.b+this.pivot.y*b.d);var c=a.worldTransform,d=this.worldTransform;d.a=b.a*c.a+b.b*c.c,d.b=b.a*c.b+b.b*c.d,d.c=b.c*c.a+b.d*c.c,d.d=b.c*c.b+b.d*c.d,d.tx=b.tx*c.a+b.ty*c.c+c.tx,d.ty=b.tx*c.b+b.ty*c.d+c.ty,this._worldID++},b.prototype.setFromMatrix=function(a){a.decompose(this)},g(b,[{key:"rotation",get:function(){return this._rotation},set:function(a){this._rotation=a,this.updateSkew()}}]),b}(j.default);c.default=k},{"../math":88,"./TransformBase":69}],69:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("../math"),f=function(){function a(){d(this,a),this.worldTransform=new e.Matrix,this.localTransform=new e.Matrix,this._worldID=0,this._parentID=0}return a.prototype.updateLocalTransform=function(){},a.prototype.updateTransform=function(a){var b=a.worldTransform,c=this.worldTransform,d=this.localTransform;c.a=d.a*b.a+d.b*b.c,c.b=d.a*b.b+d.b*b.d,c.c=d.c*b.a+d.d*b.c,c.d=d.c*b.b+d.d*b.d,c.tx=d.tx*b.a+d.ty*b.c+b.tx,c.ty=d.tx*b.b+d.ty*b.d+b.ty,this._worldID++},a}();c.default=f,f.prototype.updateWorldTransform=f.prototype.updateTransform,f.IDENTITY=new f},{"../math":88}],70:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("../math"),i=a("./TransformBase"),j=function(a){return a&&a.__esModule?a:{default:a}}(i),k=function(a){function b(){d(this,b);var c=e(this,a.call(this));return c.position=new h.ObservablePoint(c.onChange,c,0,0),c.scale=new h.ObservablePoint(c.onChange,c,1,1),c.pivot=new h.ObservablePoint(c.onChange,c,0,0),c.skew=new h.ObservablePoint(c.updateSkew,c,0,0),c._rotation=0,c._cx=1,c._sx=0,c._cy=0,c._sy=1,c._localID=0,c._currentLocalID=0,c}return f(b,a),b.prototype.onChange=function(){this._localID++},b.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},b.prototype.updateLocalTransform=function(){var a=this.localTransform;this._localID!==this._currentLocalID&&(a.a=this._cx*this.scale._x,a.b=this._sx*this.scale._x,a.c=this._cy*this.scale._y,a.d=this._sy*this.scale._y,a.tx=this.position._x-(this.pivot._x*a.a+this.pivot._y*a.c),a.ty=this.position._y-(this.pivot._x*a.b+this.pivot._y*a.d),this._currentLocalID=this._localID,this._parentID=-1)},b.prototype.updateTransform=function(a){var b=this.localTransform;if(this._localID!==this._currentLocalID&&(b.a=this._cx*this.scale._x,b.b=this._sx*this.scale._x,b.c=this._cy*this.scale._y,b.d=this._sy*this.scale._y,b.tx=this.position._x-(this.pivot._x*b.a+this.pivot._y*b.c),b.ty=this.position._y-(this.pivot._x*b.b+this.pivot._y*b.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==a._worldID){var c=a.worldTransform,d=this.worldTransform;d.a=b.a*c.a+b.b*c.c,d.b=b.a*c.b+b.b*c.d,d.c=b.c*c.a+b.d*c.c,d.d=b.c*c.b+b.d*c.d,d.tx=b.tx*c.a+b.ty*c.c+c.tx,d.ty=b.tx*c.b+b.ty*c.d+c.ty,this._parentID=a._worldID,this._worldID++}},b.prototype.setFromMatrix=function(a){a.decompose(this),this._localID++},g(b,[{key:"rotation",get:function(){return this._rotation},set:function(a){this._rotation=a,this.updateSkew()}}]),b}(j.default);c.default=k},{"../math":88,"./TransformBase":69}],71:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../display/Container"),i=d(h),j=a("../textures/RenderTexture"),k=d(j),l=a("../textures/Texture"),m=d(l),n=a("./GraphicsData"),o=d(n),p=a("../sprites/Sprite"),q=d(p),r=a("../math"),s=a("../utils"),t=a("../const"),u=a("../display/Bounds"),v=d(u),w=a("./utils/bezierCurveTo"),x=d(w),y=a("../renderers/canvas/CanvasRenderer"),z=d(y),A=void 0,B=new r.Matrix,C=new r.Point,D=new Float32Array(4),E=new Float32Array(4),F=function(a){function b(){var c=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e(this,b);var d=f(this,a.call(this));return d.fillAlpha=1,d.lineWidth=0,d.nativeLines=c,d.lineColor=0,d.graphicsData=[],d.tint=16777215,d._prevTint=16777215,d.blendMode=t.BLEND_MODES.NORMAL,d.currentPath=null,d._webGL={},d.isMask=!1,d.boundsPadding=0,d._localBounds=new v.default,d.dirty=0,d.fastRectDirty=-1,d.clearDirty=0,d.boundsDirty=-1,d.cachedSpriteDirty=!1,d._spriteRect=null,d._fastRect=!1,d}return g(b,a),b.prototype.clone=function(){var a=new b;a.renderable=this.renderable,a.fillAlpha=this.fillAlpha,a.lineWidth=this.lineWidth,a.lineColor=this.lineColor,a.tint=this.tint,a.blendMode=this.blendMode,a.isMask=this.isMask,a.boundsPadding=this.boundsPadding,a.dirty=0,a.cachedSpriteDirty=this.cachedSpriteDirty;for(var c=0;c<this.graphicsData.length;++c)a.graphicsData.push(this.graphicsData[c].clone());return a.currentPath=a.graphicsData[a.graphicsData.length-1],a.updateLocalBounds(),a},b.prototype.lineStyle=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=a,this.lineColor=b,this.lineAlpha=c,this.currentPath)if(this.currentPath.shape.points.length){var d=new r.Polygon(this.currentPath.shape.points.slice(-2));d.closed=!1,this.drawShape(d)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},b.prototype.moveTo=function(a,b){var c=new r.Polygon([a,b]);return c.closed=!1,this.drawShape(c),this},b.prototype.lineTo=function(a,b){return this.currentPath.shape.points.push(a,b),this.dirty++,this},b.prototype.quadraticCurveTo=function(a,b,c,d){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var e=this.currentPath.shape.points,f=0,g=0;0===e.length&&this.moveTo(0,0);for(var h=e[e.length-2],i=e[e.length-1],j=1;j<=20;++j){var k=j/20;f=h+(a-h)*k,g=i+(b-i)*k,e.push(f+(a+(c-a)*k-f)*k,g+(b+(d-b)*k-g)*k)}return this.dirty++,this},b.prototype.bezierCurveTo=function(a,b,c,d,e,f){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var g=this.currentPath.shape.points,h=g[g.length-2],i=g[g.length-1];return g.length-=2,(0,x.default)(h,i,a,b,c,d,e,f,g),this.dirty++,this},b.prototype.arcTo=function(a,b,c,d,e){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(a,b):this.moveTo(a,b);var f=this.currentPath.shape.points,g=f[f.length-2],h=f[f.length-1],i=h-b,j=g-a,k=d-b,l=c-a,m=Math.abs(i*l-j*k);if(m<1e-8||0===e)f[f.length-2]===a&&f[f.length-1]===b||f.push(a,b);else{var n=i*i+j*j,o=k*k+l*l,p=i*k+j*l,q=e*Math.sqrt(n)/m,r=e*Math.sqrt(o)/m,s=q*p/n,t=r*p/o,u=q*l+r*j,v=q*k+r*i,w=j*(r+s),x=i*(r+s),y=l*(q+t),z=k*(q+t),A=Math.atan2(x-v,w-u),B=Math.atan2(z-v,y-u);this.arc(u+a,v+b,e,A,B,j*k>l*i)}return this.dirty++,this},b.prototype.arc=function(a,b,c,d,e){var f=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(d===e)return this;!f&&e<=d?e+=2*Math.PI:f&&d<=e&&(d+=2*Math.PI);var g=e-d,h=40*Math.ceil(Math.abs(g)/(2*Math.PI));if(0===g)return this;var i=a+Math.cos(d)*c,j=b+Math.sin(d)*c,k=this.currentPath?this.currentPath.shape.points:null;k?k[k.length-2]===i&&k[k.length-1]===j||k.push(i,j):(this.moveTo(i,j),k=this.currentPath.shape.points);for(var l=g/(2*h),m=2*l,n=Math.cos(l),o=Math.sin(l),p=h-1,q=p%1/p,r=0;r<=p;++r){var s=r+q*r,t=l+d+m*s,u=Math.cos(t),v=-Math.sin(t);k.push((n*u+o*v)*c+a,(n*-v+o*u)*c+b)}return this.dirty++,this},b.prototype.beginFill=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=a,this.fillAlpha=b,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},b.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},b.prototype.drawRect=function(a,b,c,d){return this.drawShape(new r.Rectangle(a,b,c,d)),this},b.prototype.drawRoundedRect=function(a,b,c,d,e){return this.drawShape(new r.RoundedRectangle(a,b,c,d,e)),this},b.prototype.drawCircle=function(a,b,c){return this.drawShape(new r.Circle(a,b,c)),this},b.prototype.drawEllipse=function(a,b,c,d){return this.drawShape(new r.Ellipse(a,b,c,d)),this},b.prototype.drawPolygon=function(a){var b=a,c=!0;if(b instanceof r.Polygon&&(c=b.closed,b=b.points),!Array.isArray(b)){b=new Array(arguments.length);for(var d=0;d<b.length;++d)b[d]=arguments[d]}var e=new r.Polygon(b);return e.closed=c,this.drawShape(e),this},b.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},b.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===t.SHAPES.RECT&&!this.graphicsData[0].lineWidth},b.prototype._renderWebGL=function(a){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(a):(a.setObjectRenderer(a.plugins.graphics),a.plugins.graphics.render(this))},b.prototype._renderSpriteRect=function(a){var b=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new q.default(new m.default(m.default.WHITE)));var c=this._spriteRect;if(16777215===this.tint)c.tint=this.graphicsData[0].fillColor;else{var d=D,e=E;(0,s.hex2rgb)(this.graphicsData[0].fillColor,d),(0,s.hex2rgb)(this.tint,e),d[0]*=e[0],d[1]*=e[1],d[2]*=e[2],c.tint=(0,s.rgb2hex)(d)}c.alpha=this.graphicsData[0].fillAlpha,c.worldAlpha=this.worldAlpha*c.alpha,c.blendMode=this.blendMode,c._texture._frame.width=b.width,c._texture._frame.height=b.height,c.transform.worldTransform=this.transform.worldTransform,c.anchor.set(-b.x/b.width,-b.y/b.height),c._onAnchorUpdate(),c._renderWebGL(a)},b.prototype._renderCanvas=function(a){!0!==this.isMask&&a.plugins.graphics.render(this)},b.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var a=this._localBounds;this._bounds.addFrame(this.transform,a.minX,a.minY,a.maxX,a.maxY)},b.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,C);for(var b=this.graphicsData,c=0;c<b.length;++c){var d=b[c];if(d.fill&&(d.shape&&d.shape.contains(C.x,C.y)))return!0}return!1},b.prototype.updateLocalBounds=function(){var a=1/0,b=-1/0,c=1/0,d=-1/0;if(this.graphicsData.length)for(var e=0,f=0,g=0,h=0,i=0,j=0;j<this.graphicsData.length;j++){var k=this.graphicsData[j],l=k.type,m=k.lineWidth;if(e=k.shape,l===t.SHAPES.RECT||l===t.SHAPES.RREC)f=e.x-m/2,g=e.y-m/2,h=e.width+m,i=e.height+m,a=f<a?f:a,b=f+h>b?f+h:b,c=g<c?g:c,d=g+i>d?g+i:d;else if(l===t.SHAPES.CIRC)f=e.x,g=e.y,h=e.radius+m/2,i=e.radius+m/2,a=f-h<a?f-h:a,b=f+h>b?f+h:b,c=g-i<c?g-i:c,d=g+i>d?g+i:d;else if(l===t.SHAPES.ELIP)f=e.x,g=e.y,h=e.width+m/2,i=e.height+m/2,a=f-h<a?f-h:a,b=f+h>b?f+h:b,c=g-i<c?g-i:c,d=g+i>d?g+i:d;else for(var n=e.points,o=0,p=0,q=0,r=0,s=0,u=0,v=0,w=0,x=0;x+2<n.length;x+=2)f=n[x],g=n[x+1],o=n[x+2],p=n[x+3],q=Math.abs(o-f),r=Math.abs(p-g),i=m,(h=Math.sqrt(q*q+r*r))<1e-9||(s=(i/h*r+q)/2,u=(i/h*q+r)/2,v=(o+f)/2,w=(p+g)/2,a=v-s<a?v-s:a,b=v+s>b?v+s:b,c=w-u<c?w-u:c,d=w+u>d?w+u:d)}else a=0,b=0,c=0,d=0;var y=this.boundsPadding;this._localBounds.minX=a-y,this._localBounds.maxX=b+2*y,this._localBounds.minY=c-y,this._localBounds.maxY=d+2*y},b.prototype.drawShape=function(a){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var b=new o.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,a);return this.graphicsData.push(b),b.type===t.SHAPES.POLY&&(b.shape.closed=b.shape.closed||this.filling,this.currentPath=b),this.dirty++,b},b.prototype.generateCanvasTexture=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,c=this.getLocalBounds(),d=k.default.create(c.width,c.height,a,b);A||(A=new z.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(B),B.invert(),B.tx-=c.x,B.ty-=c.y,A.render(this,d,!0,B);var e=m.default.fromCanvas(d.baseTexture._canvasRenderTarget.canvas,a,"graphics");return e.baseTexture.resolution=b,e.baseTexture.update(),e},b.prototype.closePath=function(){var a=this.currentPath;return a&&a.shape&&a.shape.close(),this},b.prototype.addHole=function(){var a=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(a.shape),this.currentPath=null,this},b.prototype.destroy=function(b){a.prototype.destroy.call(this,b);for(var c=0;c<this.graphicsData.length;++c)this.graphicsData[c].destroy();for(var d in this._webgl)for(var e=0;e<this._webgl[d].data.length;++e)this._webgl[d].data[e].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},b}(i.default);c.default=F,F._SPRITE_TEXTURE=null},{"../const":64,"../display/Bounds":65,"../display/Container":66,"../math":88,"../renderers/canvas/CanvasRenderer":95,"../sprites/Sprite":120,"../textures/RenderTexture":131,"../textures/Texture":133,"../utils":142,"./GraphicsData":72,"./utils/bezierCurveTo":74}],72:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(b,c,e,f,g,h,i,j){d(this,a),this.lineWidth=b,this.nativeLines=i,this.lineColor=c,this.lineAlpha=e,this._lineTint=c,this.fillColor=f,this.fillAlpha=g,this._fillTint=f,this.fill=h,this.holes=[],this.shape=j,this.type=j.type}return a.prototype.clone=function(){return new a(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},a.prototype.addHole=function(a){this.holes.push(a)},a.prototype.destroy=function(){this.shape=null,this.holes=null},a}();c.default=e},{}],73:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("../../renderers/canvas/CanvasRenderer"),f=function(a){return a&&a.__esModule?a:{default:a}}(e),g=a("../../const"),h=function(){function a(b){d(this,a),
this.renderer=b}return a.prototype.render=function(a){var b=this.renderer,c=b.context,d=a.worldAlpha,e=a.transform.worldTransform,f=b.resolution;this._prevTint!==this.tint&&(this.dirty=!0),c.setTransform(e.a*f,e.b*f,e.c*f,e.d*f,e.tx*f,e.ty*f),a.dirty&&(this.updateGraphicsTint(a),a.dirty=!1),b.setBlendMode(a.blendMode);for(var h=0;h<a.graphicsData.length;h++){var i=a.graphicsData[h],j=i.shape,k=i._fillTint,l=i._lineTint;if(c.lineWidth=i.lineWidth,i.type===g.SHAPES.POLY){c.beginPath(),this.renderPolygon(j.points,j.closed,c);for(var m=0;m<i.holes.length;m++)this.renderPolygon(i.holes[m].points,!0,c);i.fill&&(c.globalAlpha=i.fillAlpha*d,c.fillStyle="#"+("00000"+(0|k).toString(16)).substr(-6),c.fill()),i.lineWidth&&(c.globalAlpha=i.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),c.stroke())}else if(i.type===g.SHAPES.RECT)(i.fillColor||0===i.fillColor)&&(c.globalAlpha=i.fillAlpha*d,c.fillStyle="#"+("00000"+(0|k).toString(16)).substr(-6),c.fillRect(j.x,j.y,j.width,j.height)),i.lineWidth&&(c.globalAlpha=i.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),c.strokeRect(j.x,j.y,j.width,j.height));else if(i.type===g.SHAPES.CIRC)c.beginPath(),c.arc(j.x,j.y,j.radius,0,2*Math.PI),c.closePath(),i.fill&&(c.globalAlpha=i.fillAlpha*d,c.fillStyle="#"+("00000"+(0|k).toString(16)).substr(-6),c.fill()),i.lineWidth&&(c.globalAlpha=i.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),c.stroke());else if(i.type===g.SHAPES.ELIP){var n=2*j.width,o=2*j.height,p=j.x-n/2,q=j.y-o/2;c.beginPath();var r=n/2*.5522848,s=o/2*.5522848,t=p+n,u=q+o,v=p+n/2,w=q+o/2;c.moveTo(p,w),c.bezierCurveTo(p,w-s,v-r,q,v,q),c.bezierCurveTo(v+r,q,t,w-s,t,w),c.bezierCurveTo(t,w+s,v+r,u,v,u),c.bezierCurveTo(v-r,u,p,w+s,p,w),c.closePath(),i.fill&&(c.globalAlpha=i.fillAlpha*d,c.fillStyle="#"+("00000"+(0|k).toString(16)).substr(-6),c.fill()),i.lineWidth&&(c.globalAlpha=i.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),c.stroke())}else if(i.type===g.SHAPES.RREC){var x=j.x,y=j.y,z=j.width,A=j.height,B=j.radius,C=Math.min(z,A)/2|0;B=B>C?C:B,c.beginPath(),c.moveTo(x,y+B),c.lineTo(x,y+A-B),c.quadraticCurveTo(x,y+A,x+B,y+A),c.lineTo(x+z-B,y+A),c.quadraticCurveTo(x+z,y+A,x+z,y+A-B),c.lineTo(x+z,y+B),c.quadraticCurveTo(x+z,y,x+z-B,y),c.lineTo(x+B,y),c.quadraticCurveTo(x,y,x,y+B),c.closePath(),(i.fillColor||0===i.fillColor)&&(c.globalAlpha=i.fillAlpha*d,c.fillStyle="#"+("00000"+(0|k).toString(16)).substr(-6),c.fill()),i.lineWidth&&(c.globalAlpha=i.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),c.stroke())}}},a.prototype.updateGraphicsTint=function(a){a._prevTint=a.tint;for(var b=(a.tint>>16&255)/255,c=(a.tint>>8&255)/255,d=(255&a.tint)/255,e=0;e<a.graphicsData.length;++e){var f=a.graphicsData[e],g=0|f.fillColor,h=0|f.lineColor;f._fillTint=((g>>16&255)/255*b*255<<16)+((g>>8&255)/255*c*255<<8)+(255&g)/255*d*255,f._lineTint=((h>>16&255)/255*b*255<<16)+((h>>8&255)/255*c*255<<8)+(255&h)/255*d*255}},a.prototype.renderPolygon=function(a,b,c){c.moveTo(a[0],a[1]);for(var d=1;d<a.length/2;++d)c.lineTo(a[2*d],a[2*d+1]);b&&c.closePath()},a.prototype.destroy=function(){this.renderer=null},a}();c.default=h,f.default.registerPlugin("graphics",h)},{"../../const":64,"../../renderers/canvas/CanvasRenderer":95}],74:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h){var i=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],j=0,k=0,l=0,m=0,n=0;i.push(a,b);for(var o=1,p=0;o<=20;++o)p=o/20,j=1-p,k=j*j,l=k*j,m=p*p,n=m*p,i.push(l*a+3*k*p*c+3*j*m*e+n*g,l*b+3*k*p*d+3*j*m*f+n*h);return i}c.__esModule=!0,c.default=d},{}],75:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../utils"),i=a("../../const"),j=a("../../renderers/webgl/utils/ObjectRenderer"),k=d(j),l=a("../../renderers/webgl/WebGLRenderer"),m=d(l),n=a("./WebGLGraphicsData"),o=d(n),p=a("./shaders/PrimitiveShader"),q=d(p),r=a("./utils/buildPoly"),s=d(r),t=a("./utils/buildRectangle"),u=d(t),v=a("./utils/buildRoundedRectangle"),w=d(v),x=a("./utils/buildCircle"),y=d(x),z=function(a){function b(c){e(this,b);var d=f(this,a.call(this,c));return d.graphicsDataPool=[],d.primitiveShader=null,d.gl=c.gl,d.CONTEXT_UID=0,d}return g(b,a),b.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new q.default(this.gl)},b.prototype.destroy=function(){k.default.prototype.destroy.call(this);for(var a=0;a<this.graphicsDataPool.length;++a)this.graphicsDataPool[a].destroy();this.graphicsDataPool=null},b.prototype.render=function(a){var b=this.renderer,c=b.gl,d=void 0,e=a._webGL[this.CONTEXT_UID];e&&a.dirty===e.dirty||(this.updateGraphics(a),e=a._webGL[this.CONTEXT_UID]);var f=this.primitiveShader;b.bindShader(f),b.state.setBlendMode(a.blendMode);for(var g=0,i=e.data.length;g<i;g++){d=e.data[g];var j=d.shader;b.bindShader(j),j.uniforms.translationMatrix=a.transform.worldTransform.toArray(!0),j.uniforms.tint=(0,h.hex2rgb)(a.tint),j.uniforms.alpha=a.worldAlpha,b.bindVao(d.vao),d.nativeLines?c.drawArrays(c.LINES,0,d.points.length/6):d.vao.draw(c.TRIANGLE_STRIP,d.indices.length)}},b.prototype.updateGraphics=function(a){var b=this.renderer.gl,c=a._webGL[this.CONTEXT_UID];if(c||(c=a._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:b,clearDirty:-1,dirty:-1}),c.dirty=a.dirty,a.clearDirty!==c.clearDirty){c.clearDirty=a.clearDirty;for(var d=0;d<c.data.length;d++)this.graphicsDataPool.push(c.data[d]);c.data.length=0,c.lastIndex=0}for(var e=void 0,f=void 0,g=c.lastIndex;g<a.graphicsData.length;g++){var h=a.graphicsData[g];e=this.getWebGLData(c,0),h.nativeLines&&h.lineWidth&&(f=this.getWebGLData(c,0,!0),c.lastIndex++),h.type===i.SHAPES.POLY&&(0,s.default)(h,e,f),h.type===i.SHAPES.RECT?(0,u.default)(h,e,f):h.type===i.SHAPES.CIRC||h.type===i.SHAPES.ELIP?(0,y.default)(h,e,f):h.type===i.SHAPES.RREC&&(0,w.default)(h,e,f),c.lastIndex++}this.renderer.bindVao(null);for(var j=0;j<c.data.length;j++)e=c.data[j],e.dirty&&e.upload()},b.prototype.getWebGLData=function(a,b,c){var d=a.data[a.data.length-1];return(!d||d.nativeLines!==c||d.points.length>32e4)&&(d=this.graphicsDataPool.pop()||new o.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),d.nativeLines=c,d.reset(b),a.data.push(d)),d.dirty=!0,d},b}(k.default);c.default=z,m.default.registerPlugin("graphics",z)},{"../../const":64,"../../renderers/webgl/WebGLRenderer":102,"../../renderers/webgl/utils/ObjectRenderer":112,"../../utils":142,"./WebGLGraphicsData":76,"./shaders/PrimitiveShader":77,"./utils/buildCircle":78,"./utils/buildPoly":80,"./utils/buildRectangle":81,"./utils/buildRoundedRectangle":82}],76:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("pixi-gl-core"),f=function(a){return a&&a.__esModule?a:{default:a}}(e),g=function(){function a(b,c,e){d(this,a),this.gl=b,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=f.default.GLBuffer.createVertexBuffer(b),this.indexBuffer=f.default.GLBuffer.createIndexBuffer(b),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=c,this.vao=new f.default.VertexArrayObject(b,e).addIndex(this.indexBuffer).addAttribute(this.buffer,c.attributes.aVertexPosition,b.FLOAT,!1,24,0).addAttribute(this.buffer,c.attributes.aColor,b.FLOAT,!1,24,8)}return a.prototype.reset=function(){this.points.length=0,this.indices.length=0},a.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},a.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},a}();c.default=g},{"pixi-gl-core":47}],77:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("../../../Shader"),h=function(a){return a&&a.__esModule?a:{default:a}}(g),i=function(a){function b(c){return d(this,b),e(this,a.call(this,c,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return f(b,a),b}(h.default);c.default=i},{"../../../Shader":62}],78:[function(a,b,c){"use strict";function d(a,b,c){var d=a.shape,e=d.x,i=d.y,j=void 0,k=void 0;if(a.type===g.SHAPES.CIRC?(j=d.radius,k=d.radius):(j=d.width,k=d.height),0!==j&&0!==k){var l=Math.floor(30*Math.sqrt(d.radius))||Math.floor(15*Math.sqrt(d.width+d.height)),m=2*Math.PI/l;if(a.fill){var n=(0,h.hex2rgb)(a.fillColor),o=a.fillAlpha,p=n[0]*o,q=n[1]*o,r=n[2]*o,s=b.points,t=b.indices,u=s.length/6;t.push(u);for(var v=0;v<l+1;v++)s.push(e,i,p,q,r,o),s.push(e+Math.sin(m*v)*j,i+Math.cos(m*v)*k,p,q,r,o),t.push(u++,u++);t.push(u-1)}if(a.lineWidth){var w=a.points;a.points=[];for(var x=0;x<l+1;x++)a.points.push(e+Math.sin(m*x)*j,i+Math.cos(m*x)*k);(0,f.default)(a,b,c),a.points=w}}}c.__esModule=!0,c.default=d;var e=a("./buildLine"),f=function(a){return a&&a.__esModule?a:{default:a}}(e),g=a("../../../const"),h=a("../../../utils")},{"../../../const":64,"../../../utils":142,"./buildLine":79}],79:[function(a,b,c){"use strict";function d(a,b){var c=a.points;if(0!==c.length){var d=new f.Point(c[0],c[1]),e=new f.Point(c[c.length-2],c[c.length-1]);if(d.x===e.x&&d.y===e.y){c=c.slice(),c.pop(),c.pop(),e=new f.Point(c[c.length-2],c[c.length-1]);var h=e.x+.5*(d.x-e.x),i=e.y+.5*(d.y-e.y);c.unshift(h,i),c.push(h,i)}var j=b.points,k=b.indices,l=c.length/2,m=c.length,n=j.length/6,o=a.lineWidth/2,p=(0,g.hex2rgb)(a.lineColor),q=a.lineAlpha,r=p[0]*q,s=p[1]*q,t=p[2]*q,u=c[0],v=c[1],w=c[2],x=c[3],y=0,z=0,A=-(v-x),B=u-w,C=0,D=0,E=0,F=0,G=Math.sqrt(A*A+B*B);A/=G,B/=G,A*=o,B*=o,j.push(u-A,v-B,r,s,t,q),j.push(u+A,v+B,r,s,t,q);for(var H=1;H<l-1;++H){u=c[2*(H-1)],v=c[2*(H-1)+1],w=c[2*H],x=c[2*H+1],y=c[2*(H+1)],z=c[2*(H+1)+1],A=-(v-x),B=u-w,G=Math.sqrt(A*A+B*B),A/=G,B/=G,A*=o,B*=o,C=-(x-z),D=w-y,G=Math.sqrt(C*C+D*D),C/=G,D/=G,C*=o,D*=o;var I=-B+v-(-B+x),J=-A+w-(-A+u),K=(-A+u)*(-B+x)-(-A+w)*(-B+v),L=-D+z-(-D+x),M=-C+w-(-C+y),N=(-C+y)*(-D+x)-(-C+w)*(-D+z),O=I*M-L*J;if(Math.abs(O)<.1)O+=10.1,j.push(w-A,x-B,r,s,t,q),j.push(w+A,x+B,r,s,t,q);else{var P=(J*N-M*K)/O,Q=(L*K-I*N)/O;(P-w)*(P-w)+(Q-x)*(Q-x)>196*o*o?(E=A-C,F=B-D,G=Math.sqrt(E*E+F*F),E/=G,F/=G,E*=o,F*=o,j.push(w-E,x-F),j.push(r,s,t,q),j.push(w+E,x+F),j.push(r,s,t,q),j.push(w-E,x-F),j.push(r,s,t,q),m++):(j.push(P,Q),j.push(r,s,t,q),j.push(w-(P-w),x-(Q-x)),j.push(r,s,t,q))}}u=c[2*(l-2)],v=c[2*(l-2)+1],w=c[2*(l-1)],x=c[2*(l-1)+1],A=-(v-x),B=u-w,G=Math.sqrt(A*A+B*B),A/=G,B/=G,A*=o,B*=o,j.push(w-A,x-B),j.push(r,s,t,q),j.push(w+A,x+B),j.push(r,s,t,q),k.push(n);for(var R=0;R<m;++R)k.push(n++);k.push(n-1)}}function e(a,b){var c=0,d=a.points;if(0!==d.length){var e=b.points,f=d.length/2,h=(0,g.hex2rgb)(a.lineColor),i=a.lineAlpha,j=h[0]*i,k=h[1]*i,l=h[2]*i;for(c=1;c<f;c++){var m=d[2*(c-1)],n=d[2*(c-1)+1],o=d[2*c],p=d[2*c+1];e.push(m,n),e.push(j,k,l,i),e.push(o,p),e.push(j,k,l,i)}}}c.__esModule=!0,c.default=function(a,b,c){a.nativeLines?e(a,c):d(a,b)};var f=a("../../../math"),g=a("../../../utils")},{"../../../math":88,"../../../utils":142}],80:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b,c){a.points=a.shape.points.slice();var d=a.points;if(a.fill&&d.length>=6){for(var e=[],f=a.holes,i=0;i<f.length;i++){var k=f[i];e.push(d.length/2),d=d.concat(k.points)}var l=b.points,m=b.indices,n=d.length/2,o=(0,h.hex2rgb)(a.fillColor),p=a.fillAlpha,q=o[0]*p,r=o[1]*p,s=o[2]*p,t=(0,j.default)(d,e,2);if(!t)return;for(var u=l.length/6,v=0;v<t.length;v+=3)m.push(t[v]+u),m.push(t[v]+u),m.push(t[v+1]+u),m.push(t[v+2]+u),m.push(t[v+2]+u);for(var w=0;w<n;w++)l.push(d[2*w],d[2*w+1],q,r,s,p)}a.lineWidth>0&&(0,g.default)(a,b,c)}c.__esModule=!0,c.default=e;var f=a("./buildLine"),g=d(f),h=a("../../../utils"),i=a("earcut"),j=d(i)},{"../../../utils":142,"./buildLine":79,earcut:11}],81:[function(a,b,c){"use strict";function d(a,b,c){var d=a.shape,e=d.x,h=d.y,i=d.width,j=d.height;if(a.fill){var k=(0,g.hex2rgb)(a.fillColor),l=a.fillAlpha,m=k[0]*l,n=k[1]*l,o=k[2]*l,p=b.points,q=b.indices,r=p.length/6;p.push(e,h),p.push(m,n,o,l),p.push(e+i,h),p.push(m,n,o,l),p.push(e,h+j),p.push(m,n,o,l),p.push(e+i,h+j),p.push(m,n,o,l),q.push(r,r,r+1,r+2,r+3,r+3)}if(a.lineWidth){var s=a.points;a.points=[e,h,e+i,h,e+i,h+j,e,h+j,e,h],(0,f.default)(a,b,c),a.points=s}}c.__esModule=!0,c.default=d;var e=a("./buildLine"),f=function(a){return a&&a.__esModule?a:{default:a}}(e),g=a("../../../utils")},{"../../../utils":142,"./buildLine":79}],82:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b,c){var d=a.shape,e=d.x,f=d.y,h=d.width,j=d.height,m=d.radius,n=[];if(n.push(e,f+m),g(e,f+j-m,e,f+j,e+m,f+j,n),g(e+h-m,f+j,e+h,f+j,e+h,f+j-m,n),g(e+h,f+m,e+h,f,e+h-m,f,n),g(e+m,f,e,f,e,f+m+1e-10,n),a.fill){for(var o=(0,l.hex2rgb)(a.fillColor),p=a.fillAlpha,q=o[0]*p,r=o[1]*p,s=o[2]*p,t=b.points,u=b.indices,v=t.length/6,w=(0,i.default)(n,null,2),x=0,y=w.length;x<y;x+=3)u.push(w[x]+v),u.push(w[x]+v),u.push(w[x+1]+v),u.push(w[x+2]+v),u.push(w[x+2]+v);for(var z=0,A=n.length;z<A;z++)t.push(n[z],n[++z],q,r,s,p)}if(a.lineWidth){var B=a.points;a.points=n,(0,k.default)(a,b,c),a.points=B}}function f(a,b,c){return a+(b-a)*c}function g(a,b,c,d,e,g){for(var h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],i=h,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0;p<=20;++p)q=p/20,j=f(a,c,q),k=f(b,d,q),l=f(c,e,q),m=f(d,g,q),n=f(j,l,q),o=f(k,m,q),i.push(n,o);return i}c.__esModule=!0,c.default=e;var h=a("earcut"),i=d(h),j=a("./buildLine"),k=d(j),l=a("../../../utils")},{"../../../utils":142,"./buildLine":79,earcut:11}],83:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0,c.autoDetectRenderer=c.Application=c.Filter=c.SpriteMaskFilter=c.Quad=c.RenderTarget=c.ObjectRenderer=c.WebGLManager=c.Shader=c.CanvasRenderTarget=c.TextureUvs=c.VideoBaseTexture=c.BaseRenderTexture=c.RenderTexture=c.BaseTexture=c.Texture=c.Spritesheet=c.CanvasGraphicsRenderer=c.GraphicsRenderer=c.GraphicsData=c.Graphics=c.TextMetrics=c.TextStyle=c.Text=c.SpriteRenderer=c.CanvasTinter=c.CanvasSpriteRenderer=c.Sprite=c.TransformBase=c.TransformStatic=c.Transform=c.Container=c.DisplayObject=c.Bounds=c.glCore=c.WebGLRenderer=c.CanvasRenderer=c.ticker=c.utils=c.settings=void 0;var f=a("./const");Object.keys(f).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(c,a,{enumerable:!0,get:function(){return f[a]}})});var g=a("./math");Object.keys(g).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(c,a,{enumerable:!0,get:function(){return g[a]}})});var h=a("pixi-gl-core");Object.defineProperty(c,"glCore",{enumerable:!0,get:function(){return e(h).default}});var i=a("./display/Bounds");Object.defineProperty(c,"Bounds",{enumerable:!0,get:function(){return e(i).default}});var j=a("./display/DisplayObject");Object.defineProperty(c,"DisplayObject",{enumerable:!0,get:function(){return e(j).default}});var k=a("./display/Container");Object.defineProperty(c,"Container",{enumerable:!0,get:function(){return e(k).default}});var l=a("./display/Transform");Object.defineProperty(c,"Transform",{enumerable:!0,get:function(){return e(l).default}});var m=a("./display/TransformStatic");Object.defineProperty(c,"TransformStatic",{enumerable:!0,get:function(){return e(m).default}});var n=a("./display/TransformBase");Object.defineProperty(c,"TransformBase",{enumerable:!0,get:function(){return e(n).default}});var o=a("./sprites/Sprite");Object.defineProperty(c,"Sprite",{enumerable:!0,get:function(){return e(o).default}});var p=a("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(c,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return e(p).default}});var q=a("./sprites/canvas/CanvasTinter");Object.defineProperty(c,"CanvasTinter",{enumerable:!0,get:function(){return e(q).default}});var r=a("./sprites/webgl/SpriteRenderer");Object.defineProperty(c,"SpriteRenderer",{enumerable:!0,get:function(){return e(r).default}});var s=a("./text/Text");Object.defineProperty(c,"Text",{enumerable:!0,get:function(){return e(s).default}});var t=a("./text/TextStyle");Object.defineProperty(c,"TextStyle",{enumerable:!0,get:function(){return e(t).default}});var u=a("./text/TextMetrics");Object.defineProperty(c,"TextMetrics",{enumerable:!0,get:function(){return e(u).default}});var v=a("./graphics/Graphics");Object.defineProperty(c,"Graphics",{enumerable:!0,get:function(){return e(v).default}});var w=a("./graphics/GraphicsData");Object.defineProperty(c,"GraphicsData",{enumerable:!0,get:function(){return e(w).default}});var x=a("./graphics/webgl/GraphicsRenderer");Object.defineProperty(c,"GraphicsRenderer",{enumerable:!0,get:function(){return e(x).default}});var y=a("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(c,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return e(y).default}});var z=a("./textures/Spritesheet");Object.defineProperty(c,"Spritesheet",{enumerable:!0,get:function(){return e(z).default}});var A=a("./textures/Texture");Object.defineProperty(c,"Texture",{enumerable:!0,get:function(){return e(A).default}});var B=a("./textures/BaseTexture");Object.defineProperty(c,"BaseTexture",{enumerable:!0,get:function(){return e(B).default}});var C=a("./textures/RenderTexture");Object.defineProperty(c,"RenderTexture",{enumerable:!0,get:function(){return e(C).default}});var D=a("./textures/BaseRenderTexture");Object.defineProperty(c,"BaseRenderTexture",{enumerable:!0,get:function(){return e(D).default}});var E=a("./textures/VideoBaseTexture");Object.defineProperty(c,"VideoBaseTexture",{enumerable:!0,get:function(){return e(E).default}});var F=a("./textures/TextureUvs");Object.defineProperty(c,"TextureUvs",{enumerable:!0,get:function(){return e(F).default}});var G=a("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(c,"CanvasRenderTarget",{enumerable:!0,get:function(){return e(G).default}});var H=a("./Shader");Object.defineProperty(c,"Shader",{enumerable:!0,get:function(){return e(H).default}});var I=a("./renderers/webgl/managers/WebGLManager");Object.defineProperty(c,"WebGLManager",{enumerable:!0,get:function(){return e(I).default}});var J=a("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(c,"ObjectRenderer",{enumerable:!0,get:function(){return e(J).default}});var K=a("./renderers/webgl/utils/RenderTarget");Object.defineProperty(c,"RenderTarget",{enumerable:!0,get:function(){return e(K).default}});var L=a("./renderers/webgl/utils/Quad");Object.defineProperty(c,"Quad",{enumerable:!0,get:function(){return e(L).default}});var M=a("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(c,"SpriteMaskFilter",{enumerable:!0,get:function(){return e(M).default}});var N=a("./renderers/webgl/filters/Filter");Object.defineProperty(c,"Filter",{enumerable:!0,get:function(){return e(N).default}});var O=a("./Application");Object.defineProperty(c,"Application",{enumerable:!0,get:function(){return e(O).default}});var P=a("./autoDetectRenderer");Object.defineProperty(c,"autoDetectRenderer",{enumerable:!0,get:function(){return P.autoDetectRenderer}});var Q=a("./utils"),R=d(Q),S=a("./ticker"),T=d(S),U=a("./settings"),V=e(U),W=a("./renderers/canvas/CanvasRenderer"),X=e(W),Y=a("./renderers/webgl/WebGLRenderer"),Z=e(Y);c.settings=V.default,c.utils=R,c.ticker=T,c.CanvasRenderer=X.default,c.WebGLRenderer=Z.default},{"./Application":61,"./Shader":62,"./autoDetectRenderer":63,"./const":64,"./display/Bounds":65,"./display/Container":66,"./display/DisplayObject":67,"./display/Transform":68,"./display/TransformBase":69,"./display/TransformStatic":70,"./graphics/Graphics":71,"./graphics/GraphicsData":72,"./graphics/canvas/CanvasGraphicsRenderer":73,"./graphics/webgl/GraphicsRenderer":75,"./math":88,"./renderers/canvas/CanvasRenderer":95,"./renderers/canvas/utils/CanvasRenderTarget":97,"./renderers/webgl/WebGLRenderer":102,"./renderers/webgl/filters/Filter":104,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":107,"./renderers/webgl/managers/WebGLManager":111,"./renderers/webgl/utils/ObjectRenderer":112,"./renderers/webgl/utils/Quad":113,"./renderers/webgl/utils/RenderTarget":114,"./settings":119,"./sprites/Sprite":120,"./sprites/canvas/CanvasSpriteRenderer":121,"./sprites/canvas/CanvasTinter":122,"./sprites/webgl/SpriteRenderer":124,"./text/Text":126,"./text/TextMetrics":127,"./text/TextStyle":128,"./textures/BaseRenderTexture":129,"./textures/BaseTexture":130,"./textures/RenderTexture":131,"./textures/Spritesheet":132,"./textures/Texture":133,"./textures/TextureUvs":134,"./textures/VideoBaseTexture":135,"./ticker":138,"./utils":142,"pixi-gl-core":47}],84:[function(a,b,c){"use strict";function d(a){return a<0?-1:a>0?1:0}c.__esModule=!0;var e=a("./Matrix"),f=function(a){return a&&a.__esModule?a:{default:a}}(e),g=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],h=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],i=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],j=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],k=[],l=[];!function(){for(var a=0;a<16;a++){var b=[];l.push(b);for(var c=0;c<16;c++)for(var e=d(g[a]*g[c]+i[a]*h[c]),m=d(h[a]*g[c]+j[a]*h[c]),n=d(g[a]*i[c]+i[a]*j[c]),o=d(h[a]*i[c]+j[a]*j[c]),p=0;p<16;p++)if(g[p]===e&&h[p]===m&&i[p]===n&&j[p]===o){b.push(p);break}}for(var q=0;q<16;q++){var r=new f.default;r.set(g[q],h[q],i[q],j[q],0,0),k.push(r)}}();var m={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(a){return g[a]},uY:function(a){return h[a]},vX:function(a){return i[a]},vY:function(a){return j[a]},inv:function(a){return 8&a?15&a:7&-a},add:function(a,b){return l[a][b]},sub:function(a,b){return l[a][m.inv(b)]},rotate180:function(a){return 4^a},isSwapWidthHeight:function(a){return 2==(3&a)},byDirection:function(a,b){return 2*Math.abs(a)<=Math.abs(b)?b>=0?m.S:m.N:2*Math.abs(b)<=Math.abs(a)?a>0?m.E:m.W:b>0?a>0?m.SE:m.SW:a>0?m.NE:m.NW},matrixAppendRotationInv:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,e=k[m.inv(b)];e.tx=c,e.ty=d,a.append(e)}};c.default=m},{"./Matrix":85}],85:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("./Point"),g=function(a){return a&&a.__esModule?a:{default:a}}(f),h=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,g=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;d(this,a),this.a=b,this.b=c,this.c=e,this.d=f,this.tx=g,this.ty=h,this.array=null}return a.prototype.fromArray=function(a){this.a=a[0],this.b=a[1],this.c=a[3],this.d=a[4],this.tx=a[2],this.ty=a[5]},a.prototype.set=function(a,b,c,d,e,f){return this.a=a,this.b=b,this.c=c,this.d=d,this.tx=e,this.ty=f,this},a.prototype.toArray=function(a,b){this.array||(this.array=new Float32Array(9));var c=b||this.array;return a?(c[0]=this.a,c[1]=this.b,c[2]=0,c[3]=this.c,c[4]=this.d,c[5]=0,c[6]=this.tx,c[7]=this.ty,c[8]=1):(c[0]=this.a,c[1]=this.c,c[2]=this.tx,c[3]=this.b,c[4]=this.d,c[5]=this.ty,c[6]=0,c[7]=0,c[8]=1),c},a.prototype.apply=function(a,b){b=b||new g.default;var c=a.x,d=a.y;return b.x=this.a*c+this.c*d+this.tx,b.y=this.b*c+this.d*d+this.ty,b},a.prototype.applyInverse=function(a,b){b=b||new g.default;var c=1/(this.a*this.d+this.c*-this.b),d=a.x,e=a.y;return b.x=this.d*c*d+-this.c*c*e+(this.ty*this.c-this.tx*this.d)*c,b.y=this.a*c*e+-this.b*c*d+(-this.ty*this.a+this.tx*this.b)*c,b},a.prototype.translate=function(a,b){return this.tx+=a,this.ty+=b,this},a.prototype.scale=function(a,b){return this.a*=a,this.d*=b,this.c*=a,this.b*=b,this.tx*=a,this.ty*=b,this},a.prototype.rotate=function(a){var b=Math.cos(a),c=Math.sin(a),d=this.a,e=this.c,f=this.tx;return this.a=d*b-this.b*c,this.b=d*c+this.b*b,this.c=e*b-this.d*c,this.d=e*c+this.d*b,this.tx=f*b-this.ty*c,this.ty=f*c+this.ty*b,this},a.prototype.append=function(a){var b=this.a,c=this.b,d=this.c,e=this.d;return this.a=a.a*b+a.b*d,this.b=a.a*c+a.b*e,this.c=a.c*b+a.d*d,this.d=a.c*c+a.d*e,this.tx=a.tx*b+a.ty*d+this.tx,this.ty=a.tx*c+a.ty*e+this.ty,this},a.prototype.setTransform=function(a,b,c,d,e,f,g,h,i){var j=Math.sin(g),k=Math.cos(g),l=Math.cos(i),m=Math.sin(i),n=-Math.sin(h),o=Math.cos(h),p=k*e,q=j*e,r=-j*f,s=k*f;return this.a=l*p+m*r,this.b=l*q+m*s,this.c=n*p+o*r,this.d=n*q+o*s,this.tx=a+(c*p+d*r),this.ty=b+(c*q+d*s),this},a.prototype.prepend=function(a){var b=this.tx;if(1!==a.a||0!==a.b||0!==a.c||1!==a.d){var c=this.a,d=this.c;this.a=c*a.a+this.b*a.c,this.b=c*a.b+this.b*a.d,this.c=d*a.a+this.d*a.c,this.d=d*a.b+this.d*a.d}return this.tx=b*a.a+this.ty*a.c+a.tx,this.ty=b*a.b+this.ty*a.d+a.ty,this},a.prototype.decompose=function(a){var b=this.a,c=this.b,d=this.c,e=this.d,f=-Math.atan2(-d,e),g=Math.atan2(c,b);return Math.abs(f+g)<1e-5?(a.rotation=g,b<0&&e>=0&&(a.rotation+=a.rotation<=0?Math.PI:-Math.PI),a.skew.x=a.skew.y=0):(a.skew.x=f,a.skew.y=g),a.scale.x=Math.sqrt(b*b+c*c),a.scale.y=Math.sqrt(d*d+e*e),a.position.x=this.tx,a.position.y=this.ty,a},a.prototype.invert=function(){var a=this.a,b=this.b,c=this.c,d=this.d,e=this.tx,f=a*d-b*c;return this.a=d/f,this.b=-b/f,this.c=-c/f,this.d=a/f,this.tx=(c*this.ty-d*e)/f,this.ty=-(a*this.ty-b*e)/f,this},a.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},a.prototype.clone=function(){var b=new a;return b.a=this.a,b.b=this.b,b.c=this.c,b.d=this.d,b.tx=this.tx,b.ty=this.ty,b},a.prototype.copy=function(a){return a.a=this.a,a.b=this.b,a.c=this.c,a.d=this.d,a.tx=this.tx,a.ty=this.ty,a},e(a,null,[{key:"IDENTITY",get:function(){return new a}},{key:"TEMP_MATRIX",get:function(){return new a}}]),a}();c.default=h},{"./Point":87}],86:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;d(this,a),this._x=e,this._y=f,this.cb=b,this.scope=c}return a.prototype.set=function(a,b){var c=a||0,d=b||(0!==b?c:0);this._x===c&&this._y===d||(this._x=c,this._y=d,this.cb.call(this.scope))},a.prototype.copy=function(a){this._x===a.x&&this._y===a.y||(this._x=a.x,this._y=a.y,this.cb.call(this.scope))},e(a,[{key:"x",get:function(){return this._x},set:function(a){this._x!==a&&(this._x=a,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(a){this._y!==a&&(this._y=a,this.cb.call(this.scope))}}]),a}();c.default=f},{}],87:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d(this,a),this.x=b,this.y=c}return a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.copy=function(a){this.set(a.x,a.y)},a.prototype.equals=function(a){return a.x===this.x&&a.y===this.y},a.prototype.set=function(a,b){this.x=a||0,this.y=b||(0!==b?this.x:0)},a}();c.default=e},{}],88:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=a("./Point");Object.defineProperty(c,"Point",{enumerable:!0,get:function(){return d(e).default}});var f=a("./ObservablePoint");Object.defineProperty(c,"ObservablePoint",{enumerable:!0,get:function(){return d(f).default}});var g=a("./Matrix");Object.defineProperty(c,"Matrix",{enumerable:!0,get:function(){return d(g).default}});var h=a("./GroupD8");Object.defineProperty(c,"GroupD8",{enumerable:!0,get:function(){return d(h).default}});var i=a("./shapes/Circle");Object.defineProperty(c,"Circle",{enumerable:!0,get:function(){return d(i).default}});var j=a("./shapes/Ellipse");Object.defineProperty(c,"Ellipse",{enumerable:!0,get:function(){return d(j).default}});var k=a("./shapes/Polygon");Object.defineProperty(c,"Polygon",{enumerable:!0,get:function(){return d(k).default}});var l=a("./shapes/Rectangle");Object.defineProperty(c,"Rectangle",{enumerable:!0,get:function(){return d(l).default}});var m=a("./shapes/RoundedRectangle");Object.defineProperty(c,"RoundedRectangle",{enumerable:!0,get:function(){return d(m).default}})},{"./GroupD8":84,"./Matrix":85,"./ObservablePoint":86,"./Point":87,"./shapes/Circle":89,"./shapes/Ellipse":90,"./shapes/Polygon":91,"./shapes/Rectangle":92,"./shapes/RoundedRectangle":93}],89:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("./Rectangle"),f=function(a){return a&&a.__esModule?a:{default:a}}(e),g=a("../../const"),h=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;d(this,a),this.x=b,this.y=c,this.radius=e,this.type=g.SHAPES.CIRC}return a.prototype.clone=function(){return new a(this.x,this.y,this.radius)},a.prototype.contains=function(a,b){if(this.radius<=0)return!1;var c=this.radius*this.radius,d=this.x-a,e=this.y-b;return d*=d,e*=e,d+e<=c},a.prototype.getBounds=function(){return new f.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},a}();c.default=h},{"../../const":64,"./Rectangle":92}],90:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}
c.__esModule=!0;var e=a("./Rectangle"),f=function(a){return a&&a.__esModule?a:{default:a}}(e),g=a("../../const"),h=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;d(this,a),this.x=b,this.y=c,this.width=e,this.height=f,this.type=g.SHAPES.ELIP}return a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.contains=function(a,b){if(this.width<=0||this.height<=0)return!1;var c=(a-this.x)/this.width,d=(b-this.y)/this.height;return c*=c,d*=d,c+d<=1},a.prototype.getBounds=function(){return new f.default(this.x-this.width,this.y-this.height,this.width,this.height)},a}();c.default=h},{"../../const":64,"./Rectangle":92}],91:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("../Point"),f=function(a){return a&&a.__esModule?a:{default:a}}(e),g=a("../../const"),h=function(){function a(){for(var b=arguments.length,c=Array(b),e=0;e<b;e++)c[e]=arguments[e];if(d(this,a),Array.isArray(c[0])&&(c=c[0]),c[0]instanceof f.default){for(var h=[],i=0,j=c.length;i<j;i++)h.push(c[i].x,c[i].y);c=h}this.closed=!0,this.points=c,this.type=g.SHAPES.POLY}return a.prototype.clone=function(){return new a(this.points.slice())},a.prototype.close=function(){var a=this.points;a[0]===a[a.length-2]&&a[1]===a[a.length-1]||a.push(a[0],a[1])},a.prototype.contains=function(a,b){for(var c=!1,d=this.points.length/2,e=0,f=d-1;e<d;f=e++){var g=this.points[2*e],h=this.points[2*e+1],i=this.points[2*f],j=this.points[2*f+1];h>b!=j>b&&a<(b-h)/(j-h)*(i-g)+g&&(c=!c)}return c},a}();c.default=h},{"../../const":64,"../Point":87}],92:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("../../const"),g=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;d(this,a),this.x=b,this.y=c,this.width=e,this.height=g,this.type=f.SHAPES.RECT}return a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this},a.prototype.contains=function(a,b){return!(this.width<=0||this.height<=0)&&(a>=this.x&&a<this.x+this.width&&b>=this.y&&b<this.y+this.height)},a.prototype.pad=function(a,b){a=a||0,b=b||(0!==b?a:0),this.x-=a,this.y-=b,this.width+=2*a,this.height+=2*b},a.prototype.fit=function(a){this.x<a.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=a.x),this.y<a.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=a.y),this.x+this.width>a.x+a.width&&(this.width=a.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>a.y+a.height&&(this.height=a.height-this.y,this.height<0&&(this.height=0))},a.prototype.enlarge=function(a){var b=Math.min(this.x,a.x),c=Math.max(this.x+this.width,a.x+a.width),d=Math.min(this.y,a.y),e=Math.max(this.y+this.height,a.y+a.height);this.x=b,this.width=c-b,this.y=d,this.height=e-d},e(a,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new a(0,0,0,0)}}]),a}();c.default=g},{"../../const":64}],93:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("../../const"),f=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;d(this,a),this.x=b,this.y=c,this.width=f,this.height=g,this.radius=h,this.type=e.SHAPES.RREC}return a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.radius)},a.prototype.contains=function(a,b){if(this.width<=0||this.height<=0)return!1;if(a>=this.x&&a<=this.x+this.width&&b>=this.y&&b<=this.y+this.height){if(b>=this.y+this.radius&&b<=this.y+this.height-this.radius||a>=this.x+this.radius&&a<=this.x+this.width-this.radius)return!0;var c=a-(this.x+this.radius),d=b-(this.y+this.radius),e=this.radius*this.radius;if(c*c+d*d<=e)return!0;if((c=a-(this.x+this.width-this.radius))*c+d*d<=e)return!0;if(d=b-(this.y+this.height-this.radius),c*c+d*d<=e)return!0;if((c=a-(this.x+this.radius))*c+d*d<=e)return!0}return!1},a}();c.default=f},{"../../const":64}],94:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../utils"),j=a("../math"),k=a("../const"),l=a("../settings"),m=d(l),n=a("../display/Container"),o=d(n),p=a("../textures/RenderTexture"),q=d(p),r=a("eventemitter3"),s=d(r),t=new j.Matrix,u=function(a){function b(c,d,g,h){e(this,b);var l=f(this,a.call(this));return(0,i.sayHello)(c),"number"==typeof d&&(d=Object.assign({width:d,height:g||m.default.RENDER_OPTIONS.height},h)),d=Object.assign({},m.default.RENDER_OPTIONS,d),l.options=d,l.type=k.RENDERER_TYPE.UNKNOWN,l.screen=new j.Rectangle(0,0,d.width,d.height),l.view=d.view||document.createElement("canvas"),l.resolution=d.resolution||m.default.RESOLUTION,l.transparent=d.transparent,l.autoResize=d.autoResize||!1,l.blendModes=null,l.preserveDrawingBuffer=d.preserveDrawingBuffer,l.clearBeforeRender=d.clearBeforeRender,l.roundPixels=d.roundPixels,l._backgroundColor=0,l._backgroundColorRgba=[0,0,0,0],l._backgroundColorString="#000000",l.backgroundColor=d.backgroundColor||l._backgroundColor,l._tempDisplayObjectParent=new o.default,l._lastObjectRendered=l._tempDisplayObjectParent,l}return g(b,a),b.prototype.resize=function(a,b){this.screen.width=a,this.screen.height=b,this.view.width=a*this.resolution,this.view.height=b*this.resolution,this.autoResize&&(this.view.style.width=a+"px",this.view.style.height=b+"px")},b.prototype.generateTexture=function(a,b,c){var d=a.getLocalBounds(),e=q.default.create(0|d.width,0|d.height,b,c);return t.tx=-d.x,t.ty=-d.y,this.render(a,e,!1,t,!0),e},b.prototype.destroy=function(a){a&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=k.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this.backgroundColor=0,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},h(b,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(a){this._backgroundColor=a,this._backgroundColorString=(0,i.hex2string)(a),(0,i.hex2rgb)(a,this._backgroundColorRgba)}}]),b}(s.default);c.default=u},{"../const":64,"../display/Container":66,"../math":88,"../settings":119,"../textures/RenderTexture":131,"../utils":142,eventemitter3:27}],95:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../SystemRenderer"),i=d(h),j=a("./utils/CanvasMaskManager"),k=d(j),l=a("./utils/CanvasRenderTarget"),m=d(l),n=a("./utils/mapCanvasBlendModesToPixi"),o=d(n),p=a("../../utils"),q=a("../../const"),r=a("../../settings"),s=d(r),t=function(a){function b(c,d,g){e(this,b);var h=f(this,a.call(this,"Canvas",c,d,g));return h.type=q.RENDERER_TYPE.CANVAS,h.rootContext=h.view.getContext("2d",{alpha:h.transparent}),h.refresh=!0,h.maskManager=new k.default(h),h.smoothProperty="imageSmoothingEnabled",h.rootContext.imageSmoothingEnabled||(h.rootContext.webkitImageSmoothingEnabled?h.smoothProperty="webkitImageSmoothingEnabled":h.rootContext.mozImageSmoothingEnabled?h.smoothProperty="mozImageSmoothingEnabled":h.rootContext.oImageSmoothingEnabled?h.smoothProperty="oImageSmoothingEnabled":h.rootContext.msImageSmoothingEnabled&&(h.smoothProperty="msImageSmoothingEnabled")),h.initPlugins(),h.blendModes=(0,o.default)(),h._activeBlendMode=null,h.context=null,h.renderingToScreen=!1,h.resize(h.options.width,h.options.height),h}return g(b,a),b.prototype.render=function(a,b,c,d,e){if(this.view){this.renderingToScreen=!b,this.emit("prerender");var f=this.resolution;b?(b=b.baseTexture||b,b._canvasRenderTarget||(b._canvasRenderTarget=new m.default(b.width,b.height,b.resolution),b.source=b._canvasRenderTarget.canvas,b.valid=!0),this.context=b._canvasRenderTarget.context,this.resolution=b._canvasRenderTarget.resolution):this.context=this.rootContext;var g=this.context;if(b||(this._lastObjectRendered=a),!e){var h=a.parent,i=this._tempDisplayObjectParent.transform.worldTransform;d?(d.copy(i),this._tempDisplayObjectParent.transform._worldID=-1):i.identity(),a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=h}g.setTransform(1,0,0,1,0,0),g.globalAlpha=1,g.globalCompositeOperation=this.blendModes[q.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(g.fillStyle="black",g.clear()),(void 0!==c?c:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?g.clearRect(0,0,this.width,this.height):(g.fillStyle=this._backgroundColorString,g.fillRect(0,0,this.width,this.height)));var j=this.context;this.context=g,a.renderCanvas(this),this.context=j,this.resolution=f,this.emit("postrender")}},b.prototype.clear=function(a){var b=this.context;a=a||this._backgroundColorString,!this.transparent&&a?(b.fillStyle=a,b.fillRect(0,0,this.width,this.height)):b.clearRect(0,0,this.width,this.height)},b.prototype.setBlendMode=function(a){this._activeBlendMode!==a&&(this._activeBlendMode=a,this.context.globalCompositeOperation=this.blendModes[a])},b.prototype.destroy=function(b){this.destroyPlugins(),a.prototype.destroy.call(this,b),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},b.prototype.resize=function(b,c){a.prototype.resize.call(this,b,c),this.smoothProperty&&(this.rootContext[this.smoothProperty]=s.default.SCALE_MODE===q.SCALE_MODES.LINEAR)},b}(i.default);c.default=t,p.pluginTarget.mixin(t)},{"../../const":64,"../../settings":119,"../../utils":142,"../SystemRenderer":94,"./utils/CanvasMaskManager":96,"./utils/CanvasRenderTarget":97,"./utils/mapCanvasBlendModesToPixi":99}],96:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("../../../const"),f=function(){function a(b){d(this,a),this.renderer=b}return a.prototype.pushMask=function(a){var b=this.renderer;b.context.save();var c=a.alpha,d=a.transform.worldTransform,e=b.resolution;b.context.setTransform(d.a*e,d.b*e,d.c*e,d.d*e,d.tx*e,d.ty*e),a._texture||(this.renderGraphicsShape(a),b.context.clip()),a.worldAlpha=c},a.prototype.renderGraphicsShape=function(a){var b=this.renderer.context,c=a.graphicsData.length;if(0!==c){b.beginPath();for(var d=0;d<c;d++){var f=a.graphicsData[d],g=f.shape;if(f.type===e.SHAPES.POLY){var h=g.points;b.moveTo(h[0],h[1]);for(var i=1;i<h.length/2;i++)b.lineTo(h[2*i],h[2*i+1]);h[0]===h[h.length-2]&&h[1]===h[h.length-1]&&b.closePath()}else if(f.type===e.SHAPES.RECT)b.rect(g.x,g.y,g.width,g.height),b.closePath();else if(f.type===e.SHAPES.CIRC)b.arc(g.x,g.y,g.radius,0,2*Math.PI),b.closePath();else if(f.type===e.SHAPES.ELIP){var j=2*g.width,k=2*g.height,l=g.x-j/2,m=g.y-k/2,n=j/2*.5522848,o=k/2*.5522848,p=l+j,q=m+k,r=l+j/2,s=m+k/2;b.moveTo(l,s),b.bezierCurveTo(l,s-o,r-n,m,r,m),b.bezierCurveTo(r+n,m,p,s-o,p,s),b.bezierCurveTo(p,s+o,r+n,q,r,q),b.bezierCurveTo(r-n,q,l,s+o,l,s),b.closePath()}else if(f.type===e.SHAPES.RREC){var t=g.x,u=g.y,v=g.width,w=g.height,x=g.radius,y=Math.min(v,w)/2|0;x=x>y?y:x,b.moveTo(t,u+x),b.lineTo(t,u+w-x),b.quadraticCurveTo(t,u+w,t+x,u+w),b.lineTo(t+v-x,u+w),b.quadraticCurveTo(t+v,u+w,t+v,u+w-x),b.lineTo(t+v,u+x),b.quadraticCurveTo(t+v,u,t+v-x,u),b.lineTo(t+x,u),b.quadraticCurveTo(t,u,t,u+x),b.closePath()}}}},a.prototype.popMask=function(a){a.context.restore()},a.prototype.destroy=function(){},a}();c.default=f},{"../../../const":64}],97:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("../../../settings"),g=function(a){return a&&a.__esModule?a:{default:a}}(f),h=function(){function a(b,c,e){d(this,a),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=e||g.default.RESOLUTION,this.resize(b,c)}return a.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},a.prototype.resize=function(a,b){this.canvas.width=a*this.resolution,this.canvas.height=b*this.resolution},a.prototype.destroy=function(){this.context=null,this.canvas=null},e(a,[{key:"width",get:function(){return this.canvas.width},set:function(a){this.canvas.width=a}},{key:"height",get:function(){return this.canvas.height},set:function(a){this.canvas.height=a}}]),a}();c.default=h},{"../../../settings":119}],98:[function(a,b,c){"use strict";function d(a){var b=document.createElement("canvas");b.width=6,b.height=1;var c=b.getContext("2d");return c.fillStyle=a,c.fillRect(0,0,6,1),b}function e(){if("undefined"==typeof document)return!1;var a=d("#ff00ff"),b=d("#ffff00"),c=document.createElement("canvas");c.width=6,c.height=1;var e=c.getContext("2d");e.globalCompositeOperation="multiply",e.drawImage(a,0,0),e.drawImage(b,2,0);var f=e.getImageData(2,0,1,1);if(!f)return!1;var g=f.data;return 255===g[0]&&0===g[1]&&0===g[2]}c.__esModule=!0,c.default=e},{}],99:[function(a,b,c){"use strict";function d(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,g.default)()?(a[e.BLEND_MODES.NORMAL]="source-over",a[e.BLEND_MODES.ADD]="lighter",a[e.BLEND_MODES.MULTIPLY]="multiply",a[e.BLEND_MODES.SCREEN]="screen",a[e.BLEND_MODES.OVERLAY]="overlay",a[e.BLEND_MODES.DARKEN]="darken",a[e.BLEND_MODES.LIGHTEN]="lighten",a[e.BLEND_MODES.COLOR_DODGE]="color-dodge",a[e.BLEND_MODES.COLOR_BURN]="color-burn",a[e.BLEND_MODES.HARD_LIGHT]="hard-light",a[e.BLEND_MODES.SOFT_LIGHT]="soft-light",a[e.BLEND_MODES.DIFFERENCE]="difference",a[e.BLEND_MODES.EXCLUSION]="exclusion",a[e.BLEND_MODES.HUE]="hue",a[e.BLEND_MODES.SATURATION]="saturate",a[e.BLEND_MODES.COLOR]="color",a[e.BLEND_MODES.LUMINOSITY]="luminosity"):(a[e.BLEND_MODES.NORMAL]="source-over",a[e.BLEND_MODES.ADD]="lighter",a[e.BLEND_MODES.MULTIPLY]="source-over",a[e.BLEND_MODES.SCREEN]="source-over",a[e.BLEND_MODES.OVERLAY]="source-over",a[e.BLEND_MODES.DARKEN]="source-over",a[e.BLEND_MODES.LIGHTEN]="source-over",a[e.BLEND_MODES.COLOR_DODGE]="source-over",a[e.BLEND_MODES.COLOR_BURN]="source-over",a[e.BLEND_MODES.HARD_LIGHT]="source-over",a[e.BLEND_MODES.SOFT_LIGHT]="source-over",a[e.BLEND_MODES.DIFFERENCE]="source-over",a[e.BLEND_MODES.EXCLUSION]="source-over",a[e.BLEND_MODES.HUE]="source-over",a[e.BLEND_MODES.SATURATION]="source-over",a[e.BLEND_MODES.COLOR]="source-over",a[e.BLEND_MODES.LUMINOSITY]="source-over"),a}c.__esModule=!0,c.default=d;var e=a("../../../const"),f=a("./canUseNewCanvasBlendModes"),g=function(a){return a&&a.__esModule?a:{default:a}}(f)},{"../../../const":64,"./canUseNewCanvasBlendModes":98}],100:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("../../const"),f=a("../../settings"),g=function(a){return a&&a.__esModule?a:{default:a}}(f),h=function(){function a(b){d(this,a),this.renderer=b,this.count=0,this.checkCount=0,this.maxIdle=g.default.GC_MAX_IDLE,this.checkCountMax=g.default.GC_MAX_CHECK_COUNT,this.mode=g.default.GC_MODE}return a.prototype.update=function(){this.count++,this.mode!==e.GC_MODES.MANUAL&&++this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())},a.prototype.run=function(){for(var a=this.renderer.textureManager,b=a._managedTextures,c=!1,d=0;d<b.length;d++){var e=b[d];!e._glRenderTargets&&this.count-e.touched>this.maxIdle&&(a.destroyTexture(e,!0),b[d]=null,c=!0)}if(c){for(var f=0,g=0;g<b.length;g++)null!==b[g]&&(b[f++]=b[g]);b.length=f}},a.prototype.unload=function(a){var b=this.renderer.textureManager;a._texture&&a._texture._glRenderTargets&&b.destroyTexture(a._texture,!0);for(var c=a.children.length-1;c>=0;c--)this.unload(a.children[c])},a}();c.default=h},{"../../const":64,"../../settings":119}],101:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("pixi-gl-core"),f=a("../../const"),g=a("./utils/RenderTarget"),h=function(a){return a&&a.__esModule?a:{default:a}}(g),i=a("../../utils"),j=function(){function a(b){d(this,a),this.renderer=b,this.gl=b.gl,this._managedTextures=[]}return a.prototype.bindTexture=function(){},a.prototype.getTexture=function(){},a.prototype.updateTexture=function(a,b){var c=this.gl,d=!!a._glRenderTargets;if(!a.hasLoaded)return null;var g=this.renderer.boundTextures;if(void 0===b){b=0;for(var i=0;i<g.length;++i)if(g[i]===a){b=i;break}}g[b]=a,c.activeTexture(c.TEXTURE0+b);var j=a._glTextures[this.renderer.CONTEXT_UID];if(j)d?a._glRenderTargets[this.renderer.CONTEXT_UID].resize(a.width,a.height):j.upload(a.source);else{if(d){var k=new h.default(this.gl,a.width,a.height,a.scaleMode,a.resolution);k.resize(a.width,a.height),a._glRenderTargets[this.renderer.CONTEXT_UID]=k,j=k.texture}else j=new e.GLTexture(this.gl,null,null,null,null),j.bind(b),j.premultiplyAlpha=!0,j.upload(a.source);a._glTextures[this.renderer.CONTEXT_UID]=j,a.on("update",this.updateTexture,this),a.on("dispose",this.destroyTexture,this),this._managedTextures.push(a),a.isPowerOfTwo?(a.mipmap&&j.enableMipmap(),a.wrapMode===f.WRAP_MODES.CLAMP?j.enableWrapClamp():a.wrapMode===f.WRAP_MODES.REPEAT?j.enableWrapRepeat():j.enableWrapMirrorRepeat()):j.enableWrapClamp(),a.scaleMode===f.SCALE_MODES.NEAREST?j.enableNearestScaling():j.enableLinearScaling()}return j},a.prototype.destroyTexture=function(a,b){if(a=a.baseTexture||a,a.hasLoaded&&a._glTextures[this.renderer.CONTEXT_UID]&&(this.renderer.unbindTexture(a),a._glTextures[this.renderer.CONTEXT_UID].destroy(),a.off("update",this.updateTexture,this),a.off("dispose",this.destroyTexture,this),delete a._glTextures[this.renderer.CONTEXT_UID],!b)){var c=this._managedTextures.indexOf(a);-1!==c&&(0,i.removeItems)(this._managedTextures,c,1)}},a.prototype.removeAll=function(){for(var a=0;a<this._managedTextures.length;++a){var b=this._managedTextures[a];b._glTextures[this.renderer.CONTEXT_UID]&&delete b._glTextures[this.renderer.CONTEXT_UID]}},a.prototype.destroy=function(){for(var a=0;a<this._managedTextures.length;++a){var b=this._managedTextures[a];this.destroyTexture(b,!0),b.off("update",this.updateTexture,this),b.off("dispose",this.destroyTexture,this)}this._managedTextures=null},a}();c.default=j},{"../../const":64,"../../utils":142,"./utils/RenderTarget":114,"pixi-gl-core":47}],102:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../SystemRenderer"),i=d(h),j=a("./managers/MaskManager"),k=d(j),l=a("./managers/StencilManager"),m=d(l),n=a("./managers/FilterManager"),o=d(n),p=a("./utils/RenderTarget"),q=d(p),r=a("./utils/ObjectRenderer"),s=d(r),t=a("./TextureManager"),u=d(t),v=a("../../textures/BaseTexture"),w=d(v),x=a("./TextureGarbageCollector"),y=d(x),z=a("./WebGLState"),A=d(z),B=a("./utils/mapWebGLDrawModesToPixi"),C=d(B),D=a("./utils/validateContext"),E=d(D),F=a("../../utils"),G=a("pixi-gl-core"),H=d(G),I=a("../../const"),J=0,K=function(a){function b(c,d,g){e(this,b);var h=f(this,a.call(this,"WebGL",c,d,g));return h.legacy=h.options.legacy,h.legacy&&(H.default.VertexArrayObject.FORCE_NATIVE=!0),h.type=I.RENDERER_TYPE.WEBGL,h.handleContextLost=h.handleContextLost.bind(h),h.handleContextRestored=h.handleContextRestored.bind(h),h.view.addEventListener("webglcontextlost",h.handleContextLost,!1),h.view.addEventListener("webglcontextrestored",h.handleContextRestored,!1),h._contextOptions={alpha:h.transparent,antialias:h.options.antialias,premultipliedAlpha:h.transparent&&"notMultiplied"!==h.transparent,stencil:!0,preserveDrawingBuffer:h.options.preserveDrawingBuffer},h._backgroundColorRgba[3]=h.transparent?0:1,h.maskManager=new k.default(h),h.stencilManager=new m.default(h),h.emptyRenderer=new s.default(h),h.currentRenderer=h.emptyRenderer,h.initPlugins(),h.options.context&&(0,E.default)(h.options.context),h.gl=h.options.context||H.default.createContext(h.view,h._contextOptions),h.CONTEXT_UID=J++,h.state=new A.default(h.gl),h.renderingToScreen=!0,h.boundTextures=null,h._activeShader=null,h._activeVao=null,h._activeRenderTarget=null,h._initContext(),h.filterManager=new o.default(h),h.drawModes=(0,C.default)(h.gl),h._nextTextureLocation=0,h.setBlendMode(0),h}return g(b,a),b.prototype._initContext=function(){var a=this.gl;a.isContextLost()&&a.getExtension("WEBGL_lose_context")&&a.getExtension("WEBGL_lose_context").restoreContext();var b=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures=new Array(b),this.emptyTextures=new Array(b),this.textureManager=new u.default(this),this.textureGC=new y.default(this),this.state.resetToDefault(),this.rootRenderTarget=new q.default(a,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var c=new H.default.GLTexture.fromData(a,null,1,1),d={_glTextures:{}};d._glTextures[this.CONTEXT_UID]={};for(var e=0;e<b;e++){var f=new w.default;f._glTextures[this.CONTEXT_UID]=c,this.boundTextures[e]=d,this.emptyTextures[e]=f,this.bindTexture(null,e)}this.emit("context",a),this.resize(this.screen.width,this.screen.height)},b.prototype.render=function(a,b,c,d,e){if(this.renderingToScreen=!b,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,b||(this._lastObjectRendered=a),!e){var f=a.parent;a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=f}this.bindRenderTexture(b,d),this.currentRenderer.start(),(void 0!==c?c:this.clearBeforeRender)&&this._activeRenderTarget.clear(),a.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},b.prototype.setObjectRenderer=function(a){this.currentRenderer!==a&&(this.currentRenderer.stop(),this.currentRenderer=a,this.currentRenderer.start())},b.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},b.prototype.resize=function(a,b){i.default.prototype.resize.call(this,a,b),this.rootRenderTarget.resize(a,b),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},b.prototype.setBlendMode=function(a){this.state.setBlendMode(a)},b.prototype.clear=function(a){this._activeRenderTarget.clear(a)},b.prototype.setTransform=function(a){this._activeRenderTarget.transform=a},b.prototype.clearRenderTexture=function(a,b){var c=a.baseTexture,d=c._glRenderTargets[this.CONTEXT_UID];return d&&d.clear(b),this},b.prototype.bindRenderTexture=function(a,b){var c=void 0;if(a){var d=a.baseTexture;d._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(d,0),this.unbindTexture(d),c=d._glRenderTargets[this.CONTEXT_UID],c.setFrame(a.frame)}else c=this.rootRenderTarget;return c.transform=b,this.bindRenderTarget(c),this},b.prototype.bindRenderTarget=function(a){return a!==this._activeRenderTarget&&(this._activeRenderTarget=a,a.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=a.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(a.stencilMaskStack)),this},b.prototype.bindShader=function(a,b){return this._activeShader!==a&&(this._activeShader=a,a.bind(),!1!==b&&(a.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},b.prototype.bindTexture=function(a,b,c){if(a=a||this.emptyTextures[b],a=a.baseTexture||a,a.touched=this.textureGC.count,c)b=b||0;else{for(var d=0;d<this.boundTextures.length;d++)if(this.boundTextures[d]===a)return d;void 0===b&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,b=this.boundTextures.length-this._nextTextureLocation-1)}var e=this.gl,f=a._glTextures[this.CONTEXT_UID];return f?(this.boundTextures[b]=a,e.activeTexture(e.TEXTURE0+b),e.bindTexture(e.TEXTURE_2D,f.texture)):this.textureManager.updateTexture(a,b),b},b.prototype.unbindTexture=function(a){var b=this.gl;a=a.baseTexture||a;for(var c=0;c<this.boundTextures.length;c++)this.boundTextures[c]===a&&(this.boundTextures[c]=this.emptyTextures[c],b.activeTexture(b.TEXTURE0+c),b.bindTexture(b.TEXTURE_2D,this.emptyTextures[c]._glTextures[this.CONTEXT_UID].texture));return this},b.prototype.createVao=function(){return new H.default.VertexArrayObject(this.gl,this.state.attribState)},b.prototype.bindVao=function(a){return this._activeVao===a?this:(a?a.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=a,this)},b.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},b.prototype.handleContextLost=function(a){a.preventDefault()},b.prototype.handleContextRestored=function(){this._initContext(),this.textureManager.removeAll()},b.prototype.destroy=function(b){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),a.prototype.destroy.call(this,b),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},b}(i.default);c.default=K,F.pluginTarget.mixin(K)},{"../../const":64,"../../textures/BaseTexture":130,"../../utils":142,"../SystemRenderer":94,"./TextureGarbageCollector":100,"./TextureManager":101,"./WebGLState":103,"./managers/FilterManager":108,"./managers/MaskManager":109,"./managers/StencilManager":110,"./utils/ObjectRenderer":112,"./utils/RenderTarget":114,"./utils/mapWebGLDrawModesToPixi":117,"./utils/validateContext":118,"pixi-gl-core":47}],103:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("./utils/mapWebGLBlendModesToPixi"),f=function(a){return a&&a.__esModule?a:{default:a}}(e),g=function(){function a(b){d(this,a),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=b,this.maxAttribs=b.getParameter(b.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,f.default)(b),this.nativeVaoExtension=b.getExtension("OES_vertex_array_object")||b.getExtension("MOZ_OES_vertex_array_object")||b.getExtension("WEBKIT_OES_vertex_array_object")}return a.prototype.push=function(){var a=this.stack[this.stackIndex];a||(a=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var b=0;b<this.activeState.length;b++)a[b]=this.activeState[b]},a.prototype.pop=function(){var a=this.stack[--this.stackIndex];this.setState(a)},a.prototype.setState=function(a){this.setBlend(a[0]),this.setDepthTest(a[1]),this.setFrontFace(a[2]),this.setCullFace(a[3]),this.setBlendMode(a[4])},a.prototype.setBlend=function(a){a=a?1:0,this.activeState[0]!==a&&(this.activeState[0]=a,this.gl[a?"enable":"disable"](this.gl.BLEND))},a.prototype.setBlendMode=function(a){a!==this.activeState[4]&&(this.activeState[4]=a,this.gl.blendFunc(this.blendModes[a][0],this.blendModes[a][1]))},a.prototype.setDepthTest=function(a){a=a?1:0,this.activeState[1]!==a&&(this.activeState[1]=a,this.gl[a?"enable":"disable"](this.gl.DEPTH_TEST))},a.prototype.setCullFace=function(a){a=a?1:0,this.activeState[3]!==a&&(this.activeState[3]=a,this.gl[a?"enable":"disable"](this.gl.CULL_FACE))},a.prototype.setFrontFace=function(a){a=a?1:0,this.activeState[2]!==a&&(this.activeState[2]=a,this.gl.frontFace(this.gl[a?"CW":"CCW"]))},a.prototype.resetAttributes=function(){for(var a=0;a<this.attribState.tempAttribState.length;a++)this.attribState.tempAttribState[a]=0;for(var b=0;b<this.attribState.attribState.length;b++)this.attribState.attribState[b]=0;for(var c=1;c<this.maxAttribs;c++)this.gl.disableVertexAttribArray(c)},a.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var a=0;a<this.activeState.length;++a)this.activeState[a]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},a}();c.default=g},{
"./utils/mapWebGLBlendModesToPixi":116}],104:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./extractUniformsFromSrc"),h=d(g),i=a("../../../utils"),j=a("../../../const"),k=a("../../../settings"),l=d(k),m={},n=function(){function a(b,c,d){e(this,a),this.vertexSrc=b||a.defaultVertexSrc,this.fragmentSrc=c||a.defaultFragmentSrc,this.blendMode=j.BLEND_MODES.NORMAL,this.uniformData=d||(0,h.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var f in this.uniformData)this.uniforms[f]=this.uniformData[f].value;this.glShaders={},m[this.vertexSrc+this.fragmentSrc]||(m[this.vertexSrc+this.fragmentSrc]=(0,i.uid)()),this.glShaderKey=m[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=l.default.RESOLUTION,this.enabled=!0,this.autoFit=!0}return a.prototype.apply=function(a,b,c,d,e){a.applyFilter(this,b,c,d)},f(a,null,[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),a}();c.default=n},{"../../../const":64,"../../../settings":119,"../../../utils":142,"./extractUniformsFromSrc":105}],105:[function(a,b,c){"use strict";function d(a,b,c){var d=e(a),f=e(b);return Object.assign(d,f)}function e(a){for(var b=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),c={},d=void 0,e=a.replace(/\s+/g," ").split(/\s*;\s*/),f=0;f<e.length;f++){var g=e[f].trim();if(g.indexOf("uniform")>-1){var i=g.split(" "),j=i[1],k=i[2],l=1;k.indexOf("[")>-1&&(d=k.split(/\[|]/),k=d[0],l*=Number(d[1])),k.match(b)||(c[k]={value:h(j,l),name:k,type:j})}}return c}c.__esModule=!0,c.default=d;var f=a("pixi-gl-core"),g=function(a){return a&&a.__esModule?a:{default:a}}(f),h=g.default.shader.defaultValue},{"pixi-gl-core":47}],106:[function(a,b,c){"use strict";function d(a,b,c){var d=a.identity();return d.translate(b.x/c.width,b.y/c.height),d.scale(c.width,c.height),d}function e(a,b,c){var d=a.identity();d.translate(b.x/c.width,b.y/c.height);var e=c.width/b.width,f=c.height/b.height;return d.scale(e,f),d}function f(a,b,c,d){var e=d.worldTransform.copy(g.Matrix.TEMP_MATRIX),f=d._texture.baseTexture,h=a.identity(),i=c.height/c.width;h.translate(b.x/c.width,b.y/c.height),h.scale(1,i);var j=c.width/f.width,k=c.height/f.height;return e.tx/=f.width*j,e.ty/=f.width*j,e.invert(),h.prepend(e),h.scale(1,1/i),h.scale(j,k),h.translate(d.anchor.x,d.anchor.y),h}c.__esModule=!0,c.calculateScreenSpaceMatrix=d,c.calculateNormalizedScreenSpaceMatrix=e,c.calculateSpriteMatrix=f;var g=a("../../../math")},{"../../../math":88}],107:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("../Filter"),h=function(a){return a&&a.__esModule?a:{default:a}}(g),i=a("../../../../math"),j=(a("path"),function(a){function b(c){d(this,b);var f=new i.Matrix,g=e(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return c.renderable=!1,g.maskSprite=c,g.maskMatrix=f,g}return f(b,a),b.prototype.apply=function(a,b,c){var d=this.maskSprite;this.uniforms.mask=d._texture,this.uniforms.otherMatrix=a.calculateSpriteMatrix(this.maskMatrix,d),this.uniforms.alpha=d.worldAlpha,a.applyFilter(this,b,c)},b}(h.default));c.default=j},{"../../../../math":88,"../Filter":104,path:40}],108:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var h=a("./WebGLManager"),i=d(h),j=a("../utils/RenderTarget"),k=d(j),l=a("../utils/Quad"),m=d(l),n=a("../../../math"),o=a("../../../Shader"),p=d(o),q=a("../filters/filterTransforms"),r=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(q),s=a("bit-twiddle"),t=d(s),u=function a(){g(this,a),this.renderTarget=null,this.sourceFrame=new n.Rectangle,this.destinationFrame=new n.Rectangle,this.filters=[],this.target=null,this.resolution=1},v=function(a){function b(c){g(this,b);var d=e(this,a.call(this,c));return d.gl=d.renderer.gl,d.quad=new m.default(d.gl,c.state.attribState),d.shaderCache={},d.pool={},d.filterData=null,d}return f(b,a),b.prototype.pushFilter=function(a,b){var c=this.renderer,d=this.filterData;if(!d){d=this.renderer._activeRenderTarget.filterStack;var e=new u;e.sourceFrame=e.destinationFrame=this.renderer._activeRenderTarget.size,e.renderTarget=c._activeRenderTarget,this.renderer._activeRenderTarget.filterData=d={index:0,stack:[e]},this.filterData=d}var f=d.stack[++d.index];f||(f=d.stack[d.index]=new u);var g=b[0].resolution,h=0|b[0].padding,i=a.filterArea||a.getBounds(!0),j=f.sourceFrame,k=f.destinationFrame;j.x=(i.x*g|0)/g,j.y=(i.y*g|0)/g,j.width=(i.width*g|0)/g,j.height=(i.height*g|0)/g,d.stack[0].renderTarget.transform||b[0].autoFit&&j.fit(d.stack[0].destinationFrame),j.pad(h),k.width=j.width,k.height=j.height;var l=this.getPotRenderTarget(c.gl,j.width,j.height,g);f.target=a,f.filters=b,f.resolution=g,f.renderTarget=l,l.setFrame(k,j),c.bindRenderTarget(l),l.clear()},b.prototype.popFilter=function(){var a=this.filterData,b=a.stack[a.index-1],c=a.stack[a.index];this.quad.map(c.renderTarget.size,c.sourceFrame).upload();var d=c.filters;if(1===d.length)d[0].apply(this,c.renderTarget,b.renderTarget,!1,c),this.freePotRenderTarget(c.renderTarget);else{var e=c.renderTarget,f=this.getPotRenderTarget(this.renderer.gl,c.sourceFrame.width,c.sourceFrame.height,c.resolution);f.setFrame(c.destinationFrame,c.sourceFrame),f.clear();var g=0;for(g=0;g<d.length-1;++g){d[g].apply(this,e,f,!0,c);var h=e;e=f,f=h}d[g].apply(this,e,b.renderTarget,!1,c),this.freePotRenderTarget(e),this.freePotRenderTarget(f)}0===--a.index&&(this.filterData=null)},b.prototype.applyFilter=function(a,b,c,d){var e=this.renderer,f=e.gl,g=a.glShaders[e.CONTEXT_UID];g||(a.glShaderKey?(g=this.shaderCache[a.glShaderKey])||(g=new p.default(this.gl,a.vertexSrc,a.fragmentSrc),a.glShaders[e.CONTEXT_UID]=this.shaderCache[a.glShaderKey]=g):g=a.glShaders[e.CONTEXT_UID]=new p.default(this.gl,a.vertexSrc,a.fragmentSrc),e.bindVao(null),this.quad.initVao(g)),e.bindVao(this.quad.vao),e.bindRenderTarget(c),d&&(f.disable(f.SCISSOR_TEST),e.clear(),f.enable(f.SCISSOR_TEST)),c===e.maskManager.scissorRenderTarget&&e.maskManager.pushScissorMask(null,e.maskManager.scissorData),e.bindShader(g);var h=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=h,this.syncUniforms(g,a),e.state.setBlendMode(a.blendMode),f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,b.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),f.bindTexture(f.TEXTURE_2D,h._glTextures[this.renderer.CONTEXT_UID].texture)},b.prototype.syncUniforms=function(a,b){var c=b.uniformData,d=b.uniforms,e=1,f=void 0;if(a.uniforms.filterArea){f=this.filterData.stack[this.filterData.index];var g=a.uniforms.filterArea;g[0]=f.renderTarget.size.width,g[1]=f.renderTarget.size.height,g[2]=f.sourceFrame.x,g[3]=f.sourceFrame.y,a.uniforms.filterArea=g}if(a.uniforms.filterClamp){f=f||this.filterData.stack[this.filterData.index];var h=a.uniforms.filterClamp;h[0]=0,h[1]=0,h[2]=(f.sourceFrame.width-1)/f.renderTarget.size.width,h[3]=(f.sourceFrame.height-1)/f.renderTarget.size.height,a.uniforms.filterClamp=h}for(var i in c)if("sampler2D"===c[i].type&&0!==d[i]){if(d[i].baseTexture)a.uniforms[i]=this.renderer.bindTexture(d[i].baseTexture,e);else{a.uniforms[i]=e;var j=this.renderer.gl;this.renderer.boundTextures[e]=this.renderer.emptyTextures[e],j.activeTexture(j.TEXTURE0+e),d[i].texture.bind()}e++}else if("mat3"===c[i].type)void 0!==d[i].a?a.uniforms[i]=d[i].toArray(!0):a.uniforms[i]=d[i];else if("vec2"===c[i].type)if(void 0!==d[i].x){var k=a.uniforms[i]||new Float32Array(2);k[0]=d[i].x,k[1]=d[i].y,a.uniforms[i]=k}else a.uniforms[i]=d[i];else"float"===c[i].type?a.uniforms.data[i].value!==c[i]&&(a.uniforms[i]=d[i]):a.uniforms[i]=d[i]},b.prototype.getRenderTarget=function(a,b){var c=this.filterData.stack[this.filterData.index],d=this.getPotRenderTarget(this.renderer.gl,c.sourceFrame.width,c.sourceFrame.height,b||c.resolution);return d.setFrame(c.destinationFrame,c.sourceFrame),d},b.prototype.returnRenderTarget=function(a){this.freePotRenderTarget(a)},b.prototype.calculateScreenSpaceMatrix=function(a){var b=this.filterData.stack[this.filterData.index];return r.calculateScreenSpaceMatrix(a,b.sourceFrame,b.renderTarget.size)},b.prototype.calculateNormalizedScreenSpaceMatrix=function(a){var b=this.filterData.stack[this.filterData.index];return r.calculateNormalizedScreenSpaceMatrix(a,b.sourceFrame,b.renderTarget.size,b.destinationFrame)},b.prototype.calculateSpriteMatrix=function(a,b){var c=this.filterData.stack[this.filterData.index];return r.calculateSpriteMatrix(a,c.sourceFrame,c.renderTarget.size,b)},b.prototype.destroy=function(){this.shaderCache={},this.emptyPool()},b.prototype.getPotRenderTarget=function(a,b,c,d){b=t.default.nextPow2(b*d),c=t.default.nextPow2(c*d);var e=(65535&b)<<16|65535&c;this.pool[e]||(this.pool[e]=[]);var f=this.pool[e].pop();if(!f){var g=this.renderer.boundTextures[0];a.activeTexture(a.TEXTURE0),f=new k.default(a,b,c,null,1),a.bindTexture(a.TEXTURE_2D,g._glTextures[this.renderer.CONTEXT_UID].texture)}return f.resolution=d,f.defaultFrame.width=f.size.width=b/d,f.defaultFrame.height=f.size.height=c/d,f},b.prototype.emptyPool=function(){for(var a in this.pool){var b=this.pool[a];if(b)for(var c=0;c<b.length;c++)b[c].destroy(!0)}this.pool={}},b.prototype.freePotRenderTarget=function(a){var b=a.size.width*a.resolution,c=a.size.height*a.resolution,d=(65535&b)<<16|65535&c;this.pool[d].push(a)},b}(i.default);c.default=v},{"../../../Shader":62,"../../../math":88,"../filters/filterTransforms":106,"../utils/Quad":113,"../utils/RenderTarget":114,"./WebGLManager":111,"bit-twiddle":5}],109:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./WebGLManager"),i=d(h),j=a("../filters/spriteMask/SpriteMaskFilter"),k=d(j),l=function(a){function b(c){e(this,b);var d=f(this,a.call(this,c));return d.scissor=!1,d.scissorData=null,d.scissorRenderTarget=null,d.enableScissor=!0,d.alphaMaskPool=[],d.alphaMaskIndex=0,d}return g(b,a),b.prototype.pushMask=function(a,b){if(b.texture)this.pushSpriteMask(a,b);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&b.isFastRect()){var c=b.worldTransform,d=Math.atan2(c.b,c.a);d=Math.round(d*(180/Math.PI)),d%90?this.pushStencilMask(b):this.pushScissorMask(a,b)}else this.pushStencilMask(b)},b.prototype.popMask=function(a,b){b.texture?this.popSpriteMask(a,b):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(a,b):this.popStencilMask(a,b)},b.prototype.pushSpriteMask=function(a,b){var c=this.alphaMaskPool[this.alphaMaskIndex];c||(c=this.alphaMaskPool[this.alphaMaskIndex]=[new k.default(b)]),c[0].resolution=this.renderer.resolution,c[0].maskSprite=b,a.filterArea=b.getBounds(!0),this.renderer.filterManager.pushFilter(a,c),this.alphaMaskIndex++},b.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},b.prototype.pushStencilMask=function(a){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(a)},b.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},b.prototype.pushScissorMask=function(a,b){b.renderable=!0;var c=this.renderer._activeRenderTarget,d=b.getBounds();d.fit(c.size),b.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var e=this.renderer.resolution;this.renderer.gl.scissor(d.x*e,(c.root?c.size.height-d.y-d.height:d.y)*e,d.width*e,d.height*e),this.scissorRenderTarget=c,this.scissorData=b,this.scissor=!0},b.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var a=this.renderer.gl;a.disable(a.SCISSOR_TEST)},b}(i.default);c.default=l},{"../filters/spriteMask/SpriteMaskFilter":107,"./WebGLManager":111}],110:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("./WebGLManager"),h=function(a){return a&&a.__esModule?a:{default:a}}(g),i=function(a){function b(c){d(this,b);var f=e(this,a.call(this,c));return f.stencilMaskStack=null,f}return f(b,a),b.prototype.setMaskStack=function(a){this.stencilMaskStack=a;var b=this.renderer.gl;0===a.length?b.disable(b.STENCIL_TEST):b.enable(b.STENCIL_TEST)},b.prototype.pushStencil=function(a){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var b=this.renderer.gl,c=this.stencilMaskStack;0===c.length&&(b.enable(b.STENCIL_TEST),b.clear(b.STENCIL_BUFFER_BIT),b.stencilFunc(b.ALWAYS,1,1)),c.push(a),b.colorMask(!1,!1,!1,!1),b.stencilOp(b.KEEP,b.KEEP,b.INCR),this.renderer.plugins.graphics.render(a),b.colorMask(!0,!0,!0,!0),b.stencilFunc(b.NOTEQUAL,0,c.length),b.stencilOp(b.KEEP,b.KEEP,b.KEEP)},b.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var a=this.renderer.gl,b=this.stencilMaskStack,c=b.pop();0===b.length?a.disable(a.STENCIL_TEST):(a.colorMask(!1,!1,!1,!1),a.stencilOp(a.KEEP,a.KEEP,a.DECR),this.renderer.plugins.graphics.render(c),a.colorMask(!0,!0,!0,!0),a.stencilFunc(a.NOTEQUAL,0,b.length),a.stencilOp(a.KEEP,a.KEEP,a.KEEP))},b.prototype.destroy=function(){h.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},b}(h.default);c.default=i},{"./WebGLManager":111}],111:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(b){d(this,a),this.renderer=b,this.renderer.on("context",this.onContextChange,this)}return a.prototype.onContextChange=function(){},a.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},a}();c.default=e},{}],112:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("../managers/WebGLManager"),h=function(a){return a&&a.__esModule?a:{default:a}}(g),i=function(a){function b(){return d(this,b),e(this,a.apply(this,arguments))}return f(b,a),b.prototype.start=function(){},b.prototype.stop=function(){this.flush()},b.prototype.flush=function(){},b.prototype.render=function(a){},b}(h.default);c.default=i},{"../managers/WebGLManager":111}],113:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("pixi-gl-core"),g=d(f),h=a("../../../utils/createIndicesForQuads"),i=d(h),j=function(){function a(b,c){e(this,a),this.gl=b,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var d=0;d<4;d++)this.interleaved[4*d]=this.vertices[2*d],this.interleaved[4*d+1]=this.vertices[2*d+1],this.interleaved[4*d+2]=this.uvs[2*d],this.interleaved[4*d+3]=this.uvs[2*d+1];this.indices=(0,i.default)(1),this.vertexBuffer=g.default.GLBuffer.createVertexBuffer(b,this.interleaved,b.STATIC_DRAW),this.indexBuffer=g.default.GLBuffer.createIndexBuffer(b,this.indices,b.STATIC_DRAW),this.vao=new g.default.VertexArrayObject(b,c)}return a.prototype.initVao=function(a){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,a.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,a.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},a.prototype.map=function(a,b){var c=0,d=0;return this.uvs[0]=c,this.uvs[1]=d,this.uvs[2]=c+b.width/a.width,this.uvs[3]=d,this.uvs[4]=c+b.width/a.width,this.uvs[5]=d+b.height/a.height,this.uvs[6]=c,this.uvs[7]=d+b.height/a.height,c=b.x,d=b.y,this.vertices[0]=c,this.vertices[1]=d,this.vertices[2]=c+b.width,this.vertices[3]=d,this.vertices[4]=c+b.width,this.vertices[5]=d+b.height,this.vertices[6]=c,this.vertices[7]=d+b.height,this},a.prototype.upload=function(){for(var a=0;a<4;a++)this.interleaved[4*a]=this.vertices[2*a],this.interleaved[4*a+1]=this.vertices[2*a+1],this.interleaved[4*a+2]=this.uvs[2*a],this.interleaved[4*a+3]=this.uvs[2*a+1];return this.vertexBuffer.upload(this.interleaved),this},a.prototype.destroy=function(){var a=this.gl;a.deleteBuffer(this.vertexBuffer),a.deleteBuffer(this.indexBuffer)},a}();c.default=j},{"../../../utils/createIndicesForQuads":140,"pixi-gl-core":47}],114:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("../../../math"),f=a("../../../const"),g=a("../../../settings"),h=function(a){return a&&a.__esModule?a:{default:a}}(g),i=a("pixi-gl-core"),j=function(){function a(b,c,g,j,k,l){d(this,a),this.gl=b,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new e.Rectangle(0,0,1,1),this.resolution=k||h.default.RESOLUTION,this.projectionMatrix=new e.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new e.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=void 0!==j?j:h.default.SCALE_MODE,this.root=l,this.root?(this.frameBuffer=new i.GLFramebuffer(b,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=i.GLFramebuffer.createRGBA(b,100,100),this.scaleMode===f.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(c,g)}return a.prototype.clear=function(a){var b=a||this.clearColor;this.frameBuffer.clear(b[0],b[1],b[2],b[3])},a.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},a.prototype.setFrame=function(a,b){this.destinationFrame=a||this.destinationFrame||this.defaultFrame,this.sourceFrame=b||this.sourceFrame||a},a.prototype.activate=function(){var a=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(a.enable(a.SCISSOR_TEST),a.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):a.disable(a.SCISSOR_TEST),a.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},a.prototype.calculateProjection=function(a,b){var c=this.projectionMatrix;b=b||a,c.identity(),this.root?(c.a=1/a.width*2,c.d=-1/a.height*2,c.tx=-1-b.x*c.a,c.ty=1-b.y*c.d):(c.a=1/a.width*2,c.d=1/a.height*2,c.tx=-1-b.x*c.a,c.ty=-1-b.y*c.d)},a.prototype.resize=function(a,b){if(a|=0,b|=0,this.size.width!==a||this.size.height!==b){this.size.width=a,this.size.height=b,this.defaultFrame.width=a,this.defaultFrame.height=b,this.frameBuffer.resize(a*this.resolution,b*this.resolution);var c=this.frame||this.size;this.calculateProjection(c)}},a.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},a}();c.default=j},{"../../../const":64,"../../../math":88,"../../../settings":119,"pixi-gl-core":47}],115:[function(a,b,c){"use strict";function d(a,b){var c=!b;if(0===a)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(c){var d=document.createElement("canvas");d.width=1,d.height=1,b=g.default.createContext(d)}for(var f=b.createShader(b.FRAGMENT_SHADER);;){var i=h.replace(/%forloop%/gi,e(a));if(b.shaderSource(f,i),b.compileShader(f),b.getShaderParameter(f,b.COMPILE_STATUS))break;a=a/2|0}return c&&b.getExtension("WEBGL_lose_context")&&b.getExtension("WEBGL_lose_context").loseContext(),a}function e(a){for(var b="",c=0;c<a;++c)c>0&&(b+="\nelse "),c<a-1&&(b+="if(test == "+c+".0){}");return b}c.__esModule=!0,c.default=d;var f=a("pixi-gl-core"),g=function(a){return a&&a.__esModule?a:{default:a}}(f),h=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},{"pixi-gl-core":47}],116:[function(a,b,c){"use strict";function d(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return b[e.BLEND_MODES.NORMAL]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.ADD]=[a.ONE,a.DST_ALPHA],b[e.BLEND_MODES.MULTIPLY]=[a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.SCREEN]=[a.ONE,a.ONE_MINUS_SRC_COLOR],b[e.BLEND_MODES.OVERLAY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.DARKEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.LIGHTEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.COLOR_DODGE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.COLOR_BURN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.HARD_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.SOFT_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.DIFFERENCE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.EXCLUSION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.HUE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.SATURATION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.COLOR]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.LUMINOSITY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b}c.__esModule=!0,c.default=d;var e=a("../../../const")},{"../../../const":64}],117:[function(a,b,c){"use strict";function d(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return b[e.DRAW_MODES.POINTS]=a.POINTS,b[e.DRAW_MODES.LINES]=a.LINES,b[e.DRAW_MODES.LINE_LOOP]=a.LINE_LOOP,b[e.DRAW_MODES.LINE_STRIP]=a.LINE_STRIP,b[e.DRAW_MODES.TRIANGLES]=a.TRIANGLES,b[e.DRAW_MODES.TRIANGLE_STRIP]=a.TRIANGLE_STRIP,b[e.DRAW_MODES.TRIANGLE_FAN]=a.TRIANGLE_FAN,b}c.__esModule=!0,c.default=d;var e=a("../../../const")},{"../../../const":64}],118:[function(a,b,c){"use strict";function d(a){a.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}c.__esModule=!0,c.default=d},{}],119:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=a("./utils/maxRecommendedTextures"),f=d(e),g=a("./utils/canUploadSameBuffer"),h=d(g);c.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,f.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,h.default)()}},{"./utils/canUploadSameBuffer":139,"./utils/maxRecommendedTextures":143}],120:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../math"),j=a("../utils"),k=a("../const"),l=a("../textures/Texture"),m=d(l),n=a("../display/Container"),o=d(n),p=new i.Point,q=function(a){function b(c){e(this,b);var d=f(this,a.call(this));return d._anchor=new i.ObservablePoint(d._onAnchorUpdate,d),d._texture=null,d._width=0,d._height=0,d._tint=null,d._tintRGB=null,d.tint=16777215,d.blendMode=k.BLEND_MODES.NORMAL,d.shader=null,d.cachedTint=16777215,d.texture=c||m.default.EMPTY,d.vertexData=new Float32Array(8),d.vertexTrimmedData=null,d._transformID=-1,d._textureID=-1,d._transformTrimmedID=-1,d._textureTrimmedID=-1,d.pluginName="sprite",d}return g(b,a),b.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._width&&(this.scale.x=(0,j.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,j.sign)(this.scale.y)*this._height/this._texture.orig.height)},b.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},b.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var a=this._texture,b=this.transform.worldTransform,c=b.a,d=b.b,e=b.c,f=b.d,g=b.tx,h=b.ty,i=this.vertexData,j=a.trim,k=a.orig,l=this._anchor,m=0,n=0,o=0,p=0;j?(n=j.x-l._x*k.width,m=n+j.width,p=j.y-l._y*k.height,o=p+j.height):(n=-l._x*k.width,m=n+k.width,p=-l._y*k.height,o=p+k.height),i[0]=c*n+e*p+g,i[1]=f*p+d*n+h,i[2]=c*m+e*p+g,i[3]=f*p+d*m+h,i[4]=c*m+e*o+g,i[5]=f*o+d*m+h,i[6]=c*n+e*o+g,i[7]=f*o+d*n+h}},b.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var a=this._texture,b=this.vertexTrimmedData,c=a.orig,d=this._anchor,e=this.transform.worldTransform,f=e.a,g=e.b,h=e.c,i=e.d,j=e.tx,k=e.ty,l=-d._x*c.width,m=l+c.width,n=-d._y*c.height,o=n+c.height;b[0]=f*l+h*n+j,b[1]=i*n+g*l+k,b[2]=f*m+h*n+j,b[3]=i*n+g*m+k,b[4]=f*m+h*o+j,b[5]=i*o+g*m+k,b[6]=f*l+h*o+j,b[7]=i*o+g*l+k},b.prototype._renderWebGL=function(a){this.calculateVertices(),a.setObjectRenderer(a.plugins[this.pluginName]),a.plugins[this.pluginName].render(this)},b.prototype._renderCanvas=function(a){a.plugins[this.pluginName].render(this)},b.prototype._calculateBounds=function(){var a=this._texture.trim,b=this._texture.orig;!a||a.width===b.width&&a.height===b.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},b.prototype.getLocalBounds=function(b){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._x),b||(this._localBoundsRect||(this._localBoundsRect=new i.Rectangle),b=this._localBoundsRect),this._bounds.getRectangle(b)):a.prototype.getLocalBounds.call(this,b)},b.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,p);var b=this._texture.orig.width,c=this._texture.orig.height,d=-b*this.anchor.x,e=0;return p.x>d&&p.x<d+b&&(e=-c*this.anchor.y,p.y>e&&p.y<e+c)},
b.prototype.destroy=function(b){if(a.prototype.destroy.call(this,b),this._anchor=null,"boolean"==typeof b?b:b&&b.texture){var c="boolean"==typeof b?b:b&&b.baseTexture;this._texture.destroy(!!c)}this._texture=null,this.shader=null},b.from=function(a){return new b(m.default.from(a))},b.fromFrame=function(a){var c=j.TextureCache[a];if(!c)throw new Error('The frameId "'+a+'" does not exist in the texture cache');return new b(c)},b.fromImage=function(a,c,d){return new b(m.default.fromImage(a,c,d))},h(b,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(a){var b=(0,j.sign)(this.scale.x)||1;this.scale.x=b*a/this._texture.orig.width,this._width=a}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(a){var b=(0,j.sign)(this.scale.y)||1;this.scale.y=b*a/this._texture.orig.height,this._height=a}},{key:"anchor",get:function(){return this._anchor},set:function(a){this._anchor.copy(a)}},{key:"tint",get:function(){return this._tint},set:function(a){this._tint=a,this._tintRGB=(a>>16)+(65280&a)+((255&a)<<16)}},{key:"texture",get:function(){return this._texture},set:function(a){this._texture!==a&&(this._texture=a,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,a&&(a.baseTexture.hasLoaded?this._onTextureUpdate():a.once("update",this._onTextureUpdate,this)))}}]),b}(o.default);c.default=q},{"../const":64,"../display/Container":66,"../math":88,"../textures/Texture":133,"../utils":142}],121:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("../../renderers/canvas/CanvasRenderer"),g=d(f),h=a("../../const"),i=a("../../math"),j=a("./CanvasTinter"),k=d(j),l=new i.Matrix,m=function(){function a(b){e(this,a),this.renderer=b}return a.prototype.render=function(a){var b=a._texture,c=this.renderer,d=b._frame.width,e=b._frame.height,f=a.transform.worldTransform,g=0,j=0;if(!(b.orig.width<=0||b.orig.height<=0)&&b.baseTexture.source&&(c.setBlendMode(a.blendMode),b.valid)){c.context.globalAlpha=a.worldAlpha;var m=b.baseTexture.scaleMode===h.SCALE_MODES.LINEAR;c.smoothProperty&&c.context[c.smoothProperty]!==m&&(c.context[c.smoothProperty]=m),b.trim?(g=b.trim.width/2+b.trim.x-a.anchor.x*b.orig.width,j=b.trim.height/2+b.trim.y-a.anchor.y*b.orig.height):(g=(.5-a.anchor.x)*b.orig.width,j=(.5-a.anchor.y)*b.orig.height),b.rotate&&(f.copy(l),f=l,i.GroupD8.matrixAppendRotationInv(f,b.rotate,g,j),g=0,j=0),g-=d/2,j-=e/2,c.roundPixels?(c.context.setTransform(f.a,f.b,f.c,f.d,f.tx*c.resolution|0,f.ty*c.resolution|0),g|=0,j|=0):c.context.setTransform(f.a,f.b,f.c,f.d,f.tx*c.resolution,f.ty*c.resolution);var n=b.baseTexture.resolution;16777215!==a.tint?(a.cachedTint!==a.tint&&(a.cachedTint=a.tint,a.tintedTexture=k.default.getTintedTexture(a,a.tint)),c.context.drawImage(a.tintedTexture,0,0,d*n,e*n,g*c.resolution,j*c.resolution,d*c.resolution,e*c.resolution)):c.context.drawImage(b.baseTexture.source,b._frame.x*n,b._frame.y*n,d*n,e*n,g*c.resolution,j*c.resolution,d*c.resolution,e*c.resolution)}},a.prototype.destroy=function(){this.renderer=null},a}();c.default=m,g.default.registerPlugin("sprite",m)},{"../../const":64,"../../math":88,"../../renderers/canvas/CanvasRenderer":95,"./CanvasTinter":122}],122:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("../../utils"),e=a("../../renderers/canvas/utils/canUseNewCanvasBlendModes"),f=function(a){return a&&a.__esModule?a:{default:a}}(e),g={getTintedTexture:function(a,b){var c=a._texture;b=g.roundColor(b);var d="#"+("00000"+(0|b).toString(16)).substr(-6);if(c.tintCache=c.tintCache||{},c.tintCache[d])return c.tintCache[d];var e=g.canvas||document.createElement("canvas");if(g.tintMethod(c,b,e),g.convertTintToImage){var f=new Image;f.src=e.toDataURL(),c.tintCache[d]=f}else c.tintCache[d]=e,g.canvas=null;return e},tintWithMultiply:function(a,b,c){var d=c.getContext("2d"),e=a._frame.clone(),f=a.baseTexture.resolution;e.x*=f,e.y*=f,e.width*=f,e.height*=f,c.width=Math.ceil(e.width),c.height=Math.ceil(e.height),d.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),d.fillRect(0,0,e.width,e.height),d.globalCompositeOperation="multiply",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height),d.globalCompositeOperation="destination-atop",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height)},tintWithOverlay:function(a,b,c){var d=c.getContext("2d"),e=a._frame.clone(),f=a.baseTexture.resolution;e.x*=f,e.y*=f,e.width*=f,e.height*=f,c.width=Math.ceil(e.width),c.height=Math.ceil(e.height),d.globalCompositeOperation="copy",d.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),d.fillRect(0,0,e.width,e.height),d.globalCompositeOperation="destination-atop",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height)},tintWithPerPixel:function(a,b,c){var e=c.getContext("2d"),f=a._frame.clone(),g=a.baseTexture.resolution;f.x*=g,f.y*=g,f.width*=g,f.height*=g,c.width=Math.ceil(f.width),c.height=Math.ceil(f.height),e.globalCompositeOperation="copy",e.drawImage(a.baseTexture.source,f.x,f.y,f.width,f.height,0,0,f.width,f.height);for(var h=(0,d.hex2rgb)(b),i=h[0],j=h[1],k=h[2],l=e.getImageData(0,0,f.width,f.height),m=l.data,n=0;n<m.length;n+=4)m[n+0]*=i,m[n+1]*=j,m[n+2]*=k;e.putImageData(l,0,0)},roundColor:function(a){var b=g.cacheStepsPerColorChannel,c=(0,d.hex2rgb)(a);return c[0]=Math.min(255,c[0]/b*b),c[1]=Math.min(255,c[1]/b*b),c[2]=Math.min(255,c[2]/b*b),(0,d.rgb2hex)(c)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,f.default)(),tintMethod:0};g.tintMethod=g.canUseMultiply?g.tintWithMultiply:g.tintWithPerPixel,c.default=g},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":98,"../../utils":142}],123:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(b){d(this,a),this.vertices=new ArrayBuffer(b),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return a.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},a}();c.default=e},{}],124:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../renderers/webgl/utils/ObjectRenderer"),i=d(h),j=a("../../renderers/webgl/WebGLRenderer"),k=d(j),l=a("../../utils/createIndicesForQuads"),m=d(l),n=a("./generateMultiTextureShader"),o=d(n),p=a("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"),q=d(p),r=a("./BatchBuffer"),s=d(r),t=a("../../settings"),u=d(t),v=a("pixi-gl-core"),w=d(v),x=a("bit-twiddle"),y=d(x),z=0,A=0,B=function(a){function b(c){e(this,b);var d=f(this,a.call(this,c));d.vertSize=5,d.vertByteSize=4*d.vertSize,d.size=u.default.SPRITE_BATCH_SIZE,d.buffers=[];for(var g=1;g<=y.default.nextPow2(d.size);g*=2)d.buffers.push(new s.default(4*g*d.vertByteSize));d.indices=(0,m.default)(d.size),d.shader=null,d.currentIndex=0,d.groups=[];for(var h=0;h<d.size;h++)d.groups[h]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return d.sprites=[],d.vertexBuffers=[],d.vaos=[],d.vaoMax=2,d.vertexCount=0,d.renderer.on("prerender",d.onPrerender,d),d}return g(b,a),b.prototype.onContextChange=function(){var a=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),u.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,q.default)(this.MAX_TEXTURES,a)),this.shader=(0,o.default)(a,this.MAX_TEXTURES),this.indexBuffer=w.default.GLBuffer.createIndexBuffer(a,this.indices,a.STATIC_DRAW),this.renderer.bindVao(null);for(var b=this.shader.attributes,c=0;c<this.vaoMax;c++){var d=this.vertexBuffers[c]=w.default.GLBuffer.createVertexBuffer(a,null,a.STREAM_DRAW),e=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(d,b.aVertexPosition,a.FLOAT,!1,this.vertByteSize,0).addAttribute(d,b.aTextureCoord,a.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(d,b.aColor,a.UNSIGNED_BYTE,!0,this.vertByteSize,12);b.aTextureId&&e.addAttribute(d,b.aTextureId,a.FLOAT,!1,this.vertByteSize,16),this.vaos[c]=e}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},b.prototype.onPrerender=function(){this.vertexCount=0},b.prototype.render=function(a){this.currentIndex>=this.size&&this.flush(),a._texture._uvs&&(this.sprites[this.currentIndex++]=a)},b.prototype.flush=function(){if(0!==this.currentIndex){var a=this.renderer.gl,b=this.MAX_TEXTURES,c=y.default.nextPow2(this.currentIndex),d=y.default.log2(c),e=this.buffers[d],f=this.sprites,g=this.groups,h=e.float32View,i=e.uint32View,j=this.boundTextures,k=this.renderer.boundTextures,l=this.renderer.textureGC.count,m=0,n=void 0,o=void 0,p=1,q=0,r=g[0],s=void 0,t=void 0,v=f[0].blendMode;r.textureCount=0,r.start=0,r.blend=v,z++;var x=void 0;for(x=0;x<b;++x)j[x]=k[x],j[x]._virtalBoundId=x;for(x=0;x<this.currentIndex;++x){var B=f[x];if(n=B._texture.baseTexture,v!==B.blendMode&&(v=B.blendMode,o=null,q=b,z++),o!==n&&(o=n,n._enabled!==z)){if(q===b&&(z++,r.size=x-r.start,q=0,r=g[p++],r.blend=v,r.textureCount=0,r.start=x),n.touched=l,-1===n._virtalBoundId)for(var C=0;C<b;++C){var D=(C+A)%b,E=j[D];if(E._enabled!==z){A++,E._virtalBoundId=-1,n._virtalBoundId=D,j[D]=n;break}}n._enabled=z,r.textureCount++,r.ids[q]=n._virtalBoundId,r.textures[q++]=n}if(s=B.vertexData,t=B._texture._uvs.uvsUint32,this.renderer.roundPixels){var F=this.renderer.resolution;h[m]=(s[0]*F|0)/F,h[m+1]=(s[1]*F|0)/F,h[m+5]=(s[2]*F|0)/F,h[m+6]=(s[3]*F|0)/F,h[m+10]=(s[4]*F|0)/F,h[m+11]=(s[5]*F|0)/F,h[m+15]=(s[6]*F|0)/F,h[m+16]=(s[7]*F|0)/F}else h[m]=s[0],h[m+1]=s[1],h[m+5]=s[2],h[m+6]=s[3],h[m+10]=s[4],h[m+11]=s[5],h[m+15]=s[6],h[m+16]=s[7];i[m+2]=t[0],i[m+7]=t[1],i[m+12]=t[2],i[m+17]=t[3],i[m+3]=i[m+8]=i[m+13]=i[m+18]=B._tintRGB+(255*Math.min(B.worldAlpha,1)<<24),h[m+4]=h[m+9]=h[m+14]=h[m+19]=n._virtalBoundId,m+=20}if(r.size=x-r.start,u.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(e.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var G=this.shader.attributes,H=this.vertexBuffers[this.vertexCount]=w.default.GLBuffer.createVertexBuffer(a,null,a.STREAM_DRAW),I=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(H,G.aVertexPosition,a.FLOAT,!1,this.vertByteSize,0).addAttribute(H,G.aTextureCoord,a.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(H,G.aColor,a.UNSIGNED_BYTE,!0,this.vertByteSize,12);G.aTextureId&&I.addAttribute(H,G.aTextureId,a.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=I}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(e.vertices,0,!1),this.vertexCount++}for(x=0;x<b;++x)k[x]._virtalBoundId=-1;for(x=0;x<p;++x){for(var J=g[x],K=J.textureCount,L=0;L<K;L++)o=J.textures[L],k[J.ids[L]]!==o&&this.renderer.bindTexture(o,J.ids[L],!0),o._virtalBoundId=-1;this.renderer.state.setBlendMode(J.blend),a.drawElements(a.TRIANGLES,6*J.size,a.UNSIGNED_SHORT,6*J.start*2)}this.currentIndex=0}},b.prototype.start=function(){this.renderer.bindShader(this.shader),u.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},b.prototype.stop=function(){this.flush()},b.prototype.destroy=function(){for(var b=0;b<this.vaoMax;b++)this.vertexBuffers[b]&&this.vertexBuffers[b].destroy(),this.vaos[b]&&this.vaos[b].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),a.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var c=0;c<this.buffers.length;++c)this.buffers[c].destroy()},b}(i.default);c.default=B,k.default.registerPlugin("sprite",B)},{"../../renderers/webgl/WebGLRenderer":102,"../../renderers/webgl/utils/ObjectRenderer":112,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":115,"../../settings":119,"../../utils/createIndicesForQuads":140,"./BatchBuffer":123,"./generateMultiTextureShader":125,"bit-twiddle":5,"pixi-gl-core":47}],125:[function(a,b,c){"use strict";function d(a,b){var c=h;c=c.replace(/%count%/gi,b),c=c.replace(/%forloop%/gi,e(b));for(var d=new g.default(a,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n",c),f=[],i=0;i<b;i++)f[i]=i;return d.bind(),d.uniforms.uSamplers=f,d}function e(a){var b="";b+="\n",b+="\n";for(var c=0;c<a;c++)c>0&&(b+="\nelse "),c<a-1&&(b+="if(textureId == "+c+".0)"),b+="\n{",b+="\n\tcolor = texture2D(uSamplers["+c+"], vTextureCoord);",b+="\n}";return b+="\n",b+="\n"}c.__esModule=!0,c.default=d;var f=a("../../Shader"),g=function(a){return a&&a.__esModule?a:{default:a}}(f),h=(a("path"),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},{"../../Shader":62,path:40}],126:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../sprites/Sprite"),j=d(i),k=a("../textures/Texture"),l=d(k),m=a("../math"),n=a("../utils"),o=a("../const"),p=a("../settings"),q=d(p),r=a("./TextStyle"),s=d(r),t=a("./TextMetrics"),u=d(t),v=a("../utils/trimCanvas"),w=d(v),x={texture:!0,children:!1,baseTexture:!0},y=function(a){function b(c,d,g){e(this,b),g=g||document.createElement("canvas"),g.width=3,g.height=3;var h=l.default.fromCanvas(g,q.default.SCALE_MODE,"text");h.orig=new m.Rectangle,h.trim=new m.Rectangle;var i=f(this,a.call(this,h));return l.default.addToCache(i._texture,i._texture.baseTexture.textureCacheIds[0]),i.canvas=g,i.context=i.canvas.getContext("2d"),i.resolution=q.default.RESOLUTION,i._text=null,i._style=null,i._styleListener=null,i._font="",i.text=c,i.style=d,i.localStyleID=-1,i}return g(b,a),b.prototype.updateText=function(a){var b=this._style;if(this.localStyleID!==b.styleID&&(this.dirty=!0,this.localStyleID=b.styleID),this.dirty||!a){this._font=this._style.toFontString();var c=u.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),d=c.width,e=c.height,f=c.lines,g=c.lineHeight,h=c.lineWidths,i=c.maxLineWidth,j=c.fontProperties;this.canvas.width=Math.ceil((d+2*b.padding)*this.resolution),this.canvas.height=Math.ceil((e+2*b.padding)*this.resolution),this.context.scale(this.resolution,this.resolution),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this._font,this.context.strokeStyle=b.stroke,this.context.lineWidth=b.strokeThickness,this.context.textBaseline=b.textBaseline,this.context.lineJoin=b.lineJoin,this.context.miterLimit=b.miterLimit;var k=void 0,l=void 0;if(b.dropShadow){this.context.shadowBlur=b.dropShadowBlur,this.context.globalAlpha=b.dropShadowAlpha,b.dropShadowBlur>0?this.context.shadowColor=b.dropShadowColor:this.context.fillStyle=b.dropShadowColor;for(var m=Math.cos(b.dropShadowAngle)*b.dropShadowDistance,n=Math.sin(b.dropShadowAngle)*b.dropShadowDistance,o=0;o<f.length;o++)k=b.strokeThickness/2,l=b.strokeThickness/2+o*g+j.ascent,"right"===b.align?k+=i-h[o]:"center"===b.align&&(k+=(i-h[o])/2),b.fill&&(this.drawLetterSpacing(f[o],k+m+b.padding,l+n+b.padding),b.stroke&&b.strokeThickness&&(this.context.strokeStyle=b.dropShadowColor,this.drawLetterSpacing(f[o],k+m+b.padding,l+n+b.padding,!0),this.context.strokeStyle=b.stroke))}this.context.shadowBlur=0,this.context.globalAlpha=1,this.context.fillStyle=this._generateFillStyle(b,f);for(var p=0;p<f.length;p++)k=b.strokeThickness/2,l=b.strokeThickness/2+p*g+j.ascent,"right"===b.align?k+=i-h[p]:"center"===b.align&&(k+=(i-h[p])/2),b.stroke&&b.strokeThickness&&this.drawLetterSpacing(f[p],k+b.padding,l+b.padding,!0),b.fill&&this.drawLetterSpacing(f[p],k+b.padding,l+b.padding);this.updateTexture()}},b.prototype.drawLetterSpacing=function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]&&arguments[3],e=this._style,f=e.letterSpacing;if(0===f)return void(d?this.context.strokeText(a,b,c):this.context.fillText(a,b,c));for(var g=String.prototype.split.call(a,""),h=b,i=0,j="";i<a.length;)j=g[i++],d?this.context.strokeText(j,h,c):this.context.fillText(j,h,c),h+=this.context.measureText(j).width+f},b.prototype.updateTexture=function(){if(this._style.trim){var a=(0,w.default)(this.canvas);this.canvas.width=a.width,this.canvas.height=a.height,this.context.putImageData(a.data,0,0)}var b=this._texture,c=this._style,d=c.trim?0:c.padding;b.baseTexture.hasLoaded=!0,b.baseTexture.resolution=this.resolution,b.baseTexture.realWidth=this.canvas.width,b.baseTexture.realHeight=this.canvas.height,b.baseTexture.width=this.canvas.width/this.resolution,b.baseTexture.height=this.canvas.height/this.resolution,b.trim.width=b._frame.width=this.canvas.width/this.resolution,b.trim.height=b._frame.height=this.canvas.height/this.resolution,b.trim.x=-d,b.trim.y=-d,b.orig.width=b._frame.width-2*d,b.orig.height=b._frame.height-2*d,this._onTextureUpdate(),b.baseTexture.emit("update",b.baseTexture),this.dirty=!1},b.prototype.renderWebGL=function(b){this.resolution!==b.resolution&&(this.resolution=b.resolution,this.dirty=!0),this.updateText(!0),a.prototype.renderWebGL.call(this,b)},b.prototype._renderCanvas=function(b){this.resolution!==b.resolution&&(this.resolution=b.resolution,this.dirty=!0),this.updateText(!0),a.prototype._renderCanvas.call(this,b)},b.prototype.getLocalBounds=function(b){return this.updateText(!0),a.prototype.getLocalBounds.call(this,b)},b.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},b.prototype._onStyleChange=function(){this.dirty=!0},b.prototype._generateFillStyle=function(a,b){if(!Array.isArray(a.fill))return a.fill;if(navigator.isCocoonJS)return a.fill[0];var c=void 0,d=void 0,e=void 0,f=void 0,g=this.canvas.width/this.resolution,h=this.canvas.height/this.resolution,i=a.fill.slice(),j=a.fillGradientStops.slice();if(!j.length)for(var k=i.length+1,l=1;l<k;++l)j.push(l/k);if(i.unshift(a.fill[0]),j.unshift(0),i.push(a.fill[a.fill.length-1]),j.push(1),a.fillGradientType===o.TEXT_GRADIENT.LINEAR_VERTICAL){c=this.context.createLinearGradient(g/2,0,g/2,h),d=(i.length+1)*b.length,e=0;for(var m=0;m<b.length;m++){e+=1;for(var n=0;n<i.length;n++)f="number"==typeof j[n]?j[n]/b.length+m/b.length:e/d,c.addColorStop(f,i[n]),e++}}else{c=this.context.createLinearGradient(0,h/2,g,h/2),d=i.length+1,e=1;for(var p=0;p<i.length;p++)f="number"==typeof j[p]?j[p]:e/d,c.addColorStop(f,i[p]),e++}return c},b.prototype.destroy=function(b){"boolean"==typeof b&&(b={children:b}),b=Object.assign({},x,b),a.prototype.destroy.call(this,b),this.context=null,this.canvas=null,this._style=null},h(b,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(a){this.updateText(!0);var b=(0,n.sign)(this.scale.x)||1;this.scale.x=b*a/this._texture.orig.width,this._width=a}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(a){this.updateText(!0);var b=(0,n.sign)(this.scale.y)||1;this.scale.y=b*a/this._texture.orig.height,this._height=a}},{key:"style",get:function(){return this._style},set:function(a){a=a||{},a instanceof s.default?this._style=a:this._style=new s.default(a),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(a){a=String(""===a||null===a||void 0===a?" ":a),this._text!==a&&(this._text=a,this.dirty=!0)}}]),b}(j.default);c.default=y},{"../const":64,"../math":88,"../settings":119,"../sprites/Sprite":120,"../textures/Texture":133,"../utils":142,"../utils/trimCanvas":146,"./TextMetrics":127,"./TextStyle":128}],127:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(b,c,e,f,g,h,i,j,k){d(this,a),this.text=b,this.style=c,this.width=e,this.height=f,this.lines=g,this.lineWidths=h,this.lineHeight=i,this.maxLineWidth=j,this.fontProperties=k}return a.measureText=function(b,c,d){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a._canvas;d=d||c.wordWrap;var f=c.toFontString(),g=a.measureFont(f),h=e.getContext("2d");h.font=f;for(var i=d?a.wordWrap(b,c,e):b,j=i.split(/(?:\r\n|\r|\n)/),k=new Array(j.length),l=0,m=0;m<j.length;m++){var n=h.measureText(j[m]).width+(j[m].length-1)*c.letterSpacing;k[m]=n,l=Math.max(l,n)}var o=l+c.strokeThickness;c.dropShadow&&(o+=c.dropShadowDistance);var p=c.lineHeight||g.fontSize+c.strokeThickness,q=Math.max(p,g.fontSize+c.strokeThickness)+(j.length-1)*p;return c.dropShadow&&(q+=c.dropShadowDistance),new a(b,c,o,q,j,k,p,l,g)},a.wordWrap=function(b,c){for(var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a._canvas,e=d.getContext("2d"),f="",g=b.split("\n"),h=c.wordWrapWidth,i={},j=0;j<g.length;j++){for(var k=h,l=g[j].split(" "),m=0;m<l.length;m++){var n=e.measureText(l[m]).width;if(c.breakWords&&n>h)for(var o=l[m].split(""),p=0;p<o.length;p++){var q=o[p],r=i[q];void 0===r&&(r=e.measureText(q).width,i[q]=r),r>k?(f+="\n"+q,k=h-r):(0===p&&(f+=" "),f+=q,k-=r)}else{var s=n+e.measureText(" ").width;0===m||s>k?(m>0&&(f+="\n"),f+=l[m],k=h-n):(k-=s,f+=" "+l[m])}}j<g.length-1&&(f+="\n")}return f},a.measureFont=function(b){if(a._fonts[b])return a._fonts[b];var c={},d=a._canvas,e=a._context;e.font=b;var f=Math.ceil(e.measureText("|Mq").width),g=Math.ceil(e.measureText("M").width),h=2*g;g=1.4*g|0,d.width=f,d.height=h,e.fillStyle="#f00",e.fillRect(0,0,f,h),e.font=b,e.textBaseline="alphabetic",e.fillStyle="#000",e.fillText("|Mq",0,g);var i=e.getImageData(0,0,f,h).data,j=i.length,k=4*f,l=0,m=0,n=!1;for(l=0;l<g;++l){for(var o=0;o<k;o+=4)if(255!==i[m+o]){n=!0;break}if(n)break;m+=k}for(c.ascent=g-l,m=j-k,n=!1,l=h;l>g;--l){for(var p=0;p<k;p+=4)if(255!==i[m+p]){n=!0;break}if(n)break;m-=k}return c.descent=l-g,c.fontSize=c.ascent+c.descent,a._fonts[b]=c,c},a}();c.default=e;var f=document.createElement("canvas");f.width=f.height=10,e._canvas=f,e._context=f.getContext("2d"),e._fonts={}},{}],128:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a){return"number"==typeof a?(0,j.hex2string)(a):("string"==typeof a&&0===a.indexOf("0x")&&(a=a.replace("0x","#")),a)}function f(a){if(Array.isArray(a)){for(var b=0;b<a.length;++b)a[b]=e(a[b]);return a}return e(a)}function g(a,b){if(!Array.isArray(a)||!Array.isArray(b))return!1;if(a.length!==b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!==b[c])return!1;return!0}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../const"),j=a("../utils"),k={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"#000000",dropShadowDistance:5,fill:"black",fillGradientType:i.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100},l=function(){function a(b){d(this,a),this.styleID=0,Object.assign(this,k,b)}return a.prototype.clone=function(){var b={};for(var c in k)b[c]=this[c];return new a(b)},a.prototype.reset=function(){Object.assign(this,k)},a.prototype.toFontString=function(){var a="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,b=this.fontFamily;Array.isArray(this.fontFamily)||(b=this.fontFamily.split(","));for(var c=b.length-1;c>=0;c--){var d=b[c].trim();/([\"\'])[^\'\"]+\1/.test(d)||(d='"'+d+'"'),b[c]=d}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+a+" "+b.join(",")},h(a,[{key:"align",get:function(){return this._align},set:function(a){this._align!==a&&(this._align=a,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(a){this._breakWords!==a&&(this._breakWords=a,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(a){this._dropShadow!==a&&(this._dropShadow=a,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(a){this._dropShadowAlpha!==a&&(this._dropShadowAlpha=a,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(a){this._dropShadowAngle!==a&&(this._dropShadowAngle=a,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(a){this._dropShadowBlur!==a&&(this._dropShadowBlur=a,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(a){var b=f(a);this._dropShadowColor!==b&&(this._dropShadowColor=b,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(a){this._dropShadowDistance!==a&&(this._dropShadowDistance=a,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(a){var b=f(a);this._fill!==b&&(this._fill=b,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(a){this._fillGradientType!==a&&(this._fillGradientType=a,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(a){g(this._fillGradientStops,a)||(this._fillGradientStops=a,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(a){this.fontFamily!==a&&(this._fontFamily=a,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(a){this._fontSize!==a&&(this._fontSize=a,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(a){this._fontStyle!==a&&(this._fontStyle=a,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(a){this._fontVariant!==a&&(this._fontVariant=a,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(a){this._fontWeight!==a&&(this._fontWeight=a,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(a){this._letterSpacing!==a&&(this._letterSpacing=a,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(a){this._lineHeight!==a&&(this._lineHeight=a,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(a){this._lineJoin!==a&&(this._lineJoin=a,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(a){this._miterLimit!==a&&(this._miterLimit=a,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(a){this._padding!==a&&(this._padding=a,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(a){var b=f(a);this._stroke!==b&&(this._stroke=b,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(a){this._strokeThickness!==a&&(this._strokeThickness=a,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(a){this._textBaseline!==a&&(this._textBaseline=a,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(a){this._trim!==a&&(this._trim=a,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(a){this._wordWrap!==a&&(this._wordWrap=a,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(a){this._wordWrapWidth!==a&&(this._wordWrapWidth=a,this.styleID++)}}]),a}();c.default=l},{"../const":64,"../utils":142}],129:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./BaseTexture"),i=d(h),j=a("../settings"),k=d(j),l=function(a){function b(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,g=arguments[2],h=arguments[3];e(this,b);var i=f(this,a.call(this,null,g));return i.resolution=h||k.default.RESOLUTION,i.width=c,i.height=d,i.realWidth=i.width*i.resolution,i.realHeight=i.height*i.resolution,i.scaleMode=void 0!==g?g:k.default.SCALE_MODE,i.hasLoaded=!0,i._glRenderTargets={},i._canvasRenderTarget=null,i.valid=!1,i}return g(b,a),b.prototype.resize=function(a,b){a===this.width&&b===this.height||(this.valid=a>0&&b>0,this.width=a,this.height=b,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},b.prototype.destroy=function(){a.prototype.destroy.call(this,!0),this.renderer=null},b}(i.default);c.default=l},{"../settings":119,"./BaseTexture":130}],130:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),
b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../utils"),i=a("../settings"),j=d(i),k=a("eventemitter3"),l=d(k),m=a("../utils/determineCrossOrigin"),n=d(m),o=a("bit-twiddle"),p=d(o),q=function(a){function b(c,d,g){e(this,b);var i=f(this,a.call(this));return i.uid=(0,h.uid)(),i.touched=0,i.resolution=g||j.default.RESOLUTION,i.width=100,i.height=100,i.realWidth=100,i.realHeight=100,i.scaleMode=void 0!==d?d:j.default.SCALE_MODE,i.hasLoaded=!1,i.isLoading=!1,i.source=null,i.origSource=null,i.imageType=null,i.sourceScale=1,i.premultipliedAlpha=!0,i.imageUrl=null,i.isPowerOfTwo=!1,i.mipmap=j.default.MIPMAP_TEXTURES,i.wrapMode=j.default.WRAP_MODE,i._glTextures={},i._enabled=0,i._virtalBoundId=-1,i._destroyed=!1,i.textureCacheIds=[],c&&i.loadSource(c),i}return g(b,a),b.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},b.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=p.default.isPow2(this.realWidth)&&p.default.isPow2(this.realHeight)},b.prototype.loadSource=function(a){var b=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,b&&this.source&&(this.source.onload=null,this.source.onerror=null);var c=!this.source;if(this.source=a,(a.src&&a.complete||a.getContext)&&a.width&&a.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),c&&this.emit("loaded",this);else if(!a.getContext){this.isLoading=!0;var d=this;if(a.onload=function(){if(d._updateImageType(),a.onload=null,a.onerror=null,d.isLoading){if(d.isLoading=!1,d._sourceLoaded(),"svg"===d.imageType)return void d._loadSvgSource();d.emit("loaded",d)}},a.onerror=function(){a.onload=null,a.onerror=null,d.isLoading&&(d.isLoading=!1,d.emit("error",d))},a.complete&&a.src){if(a.onload=null,a.onerror=null,"svg"===d.imageType)return void d._loadSvgSource();this.isLoading=!1,a.width&&a.height?(this._sourceLoaded(),b&&this.emit("loaded",this)):b&&this.emit("error",this)}}},b.prototype._updateImageType=function(){if(this.imageUrl){var a=(0,h.decomposeDataUri)(this.imageUrl),b=void 0;if(a&&"image"===a.mediaType){var c=a.subType.split("+")[0];if(!(b=(0,h.getUrlFileExtension)("."+c)))throw new Error("Invalid image type in data URI.")}else(b=(0,h.getUrlFileExtension)(this.imageUrl))||(b="png");this.imageType=b}},b.prototype._loadSvgSource=function(){if("svg"===this.imageType){var a=(0,h.decomposeDataUri)(this.imageUrl);a?this._loadSvgSourceUsingDataUri(a):this._loadSvgSourceUsingXhr()}},b.prototype._loadSvgSourceUsingDataUri=function(a){var b=void 0;if("base64"===a.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");b=atob(a.data)}else b=a.data;this._loadSvgSourceUsingString(b)},b.prototype._loadSvgSourceUsingXhr=function(){var a=this,b=new XMLHttpRequest;b.onload=function(){if(b.readyState!==b.DONE||200!==b.status)throw new Error("Failed to load SVG using XHR.");a._loadSvgSourceUsingString(b.response)},b.onerror=function(){return a.emit("error",a)},b.open("GET",this.imageUrl,!0),b.send()},b.prototype._loadSvgSourceUsingString=function(a){var c=(0,h.getSvgSize)(a),d=c.width,e=c.height;if(!d||!e)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(d*this.sourceScale),this.realHeight=Math.round(e*this.sourceScale),this._updateDimensions();var f=document.createElement("canvas");f.width=this.realWidth,f.height=this.realHeight,f._pixiId="canvas_"+(0,h.uid)(),f.getContext("2d").drawImage(this.source,0,0,d,e,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=f,b.addToCache(this,f._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},b.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},b.prototype.destroy=function(){this.imageUrl&&(delete h.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),b.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},b.prototype.dispose=function(){this.emit("dispose",this)},b.prototype.updateSourceImage=function(a){this.source.src=a,this.loadSource(this.source)},b.fromImage=function(a,c,d,e){var f=h.BaseTextureCache[a];if(!f){var g=new Image;void 0===c&&0!==a.indexOf("data:")&&(g.crossOrigin=(0,n.default)(a)),f=new b(g,d),f.imageUrl=a,e&&(f.sourceScale=e),f.resolution=(0,h.getResolutionOfUrl)(a),g.src=a,b.addToCache(f,a)}return f},b.fromCanvas=function(a,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";a._pixiId||(a._pixiId=d+"_"+(0,h.uid)());var e=h.BaseTextureCache[a._pixiId];return e||(e=new b(a,c),b.addToCache(e,a._pixiId)),e},b.from=function(a,c,d){if("string"==typeof a)return b.fromImage(a,void 0,c,d);if(a instanceof HTMLImageElement){var e=a.src,f=h.BaseTextureCache[e];return f||(f=new b(a,c),f.imageUrl=e,d&&(f.sourceScale=d),f.resolution=(0,h.getResolutionOfUrl)(e),b.addToCache(f,e)),f}return a instanceof HTMLCanvasElement?b.fromCanvas(a,c):a},b.addToCache=function(a,b){b&&(-1===a.textureCacheIds.indexOf(b)&&a.textureCacheIds.push(b),h.BaseTextureCache[b]&&console.warn("BaseTexture added to the cache with an id ["+b+"] that already had an entry"),h.BaseTextureCache[b]=a)},b.removeFromCache=function(a){if("string"==typeof a){var b=h.BaseTextureCache[a];if(b){var c=b.textureCacheIds.indexOf(a);return c>-1&&b.textureCacheIds.splice(c,1),delete h.BaseTextureCache[a],b}}else if(a&&a.textureCacheIds){for(var d=0;d<a.textureCacheIds.length;++d)delete h.BaseTextureCache[a.textureCacheIds[d]];return a.textureCacheIds.length=0,a}return null},b}(l.default);c.default=q},{"../settings":119,"../utils":142,"../utils/determineCrossOrigin":141,"bit-twiddle":5,eventemitter3:27}],131:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./BaseRenderTexture"),i=d(h),j=a("./Texture"),k=d(j),l=function(a){function b(c,d){e(this,b);var g=null;if(!(c instanceof i.default)){var h=arguments[1],j=arguments[2],k=arguments[3],l=arguments[4];console.warn("Please use RenderTexture.create("+h+", "+j+") instead of the ctor directly."),g=arguments[0],d=null,c=new i.default(h,j,k,l)}var m=f(this,a.call(this,c,d));return m.legacyRenderer=g,m.valid=!0,m._updateUvs(),m}return g(b,a),b.prototype.resize=function(a,b,c){this.valid=a>0&&b>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=b,c||this.baseTexture.resize(a,b),this._updateUvs()},b.create=function(a,c,d,e){return new b(new i.default(a,c,d,e))},b}(k.default);c.default=l},{"./BaseRenderTexture":129,"./Texture":133}],132:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("../"),g=a("../utils"),h=function(){function a(b,c){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,a),this.baseTexture=b,this.textures={},this.data=c,this.resolution=this._updateResolution(e||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return e(a,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),a.prototype._updateResolution=function(a){var b=this.data.meta.scale,c=(0,g.getResolutionOfUrl)(a,null);return null===c&&(c=void 0!==b?parseFloat(b):1),1!==c&&(this.baseTexture.resolution=c,this.baseTexture.update()),c},a.prototype.parse=function(b){this._batchIndex=0,this._callback=b,this._frameKeys.length<=a.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},a.prototype._processFrames=function(b){for(var c=b,d=a.BATCH_SIZE;c-b<d&&c<this._frameKeys.length;){var e=this._frameKeys[c],g=this._frames[e].frame;if(g){var h=null,i=null,j=new f.Rectangle(0,0,this._frames[e].sourceSize.w/this.resolution,this._frames[e].sourceSize.h/this.resolution);h=this._frames[e].rotated?new f.Rectangle(g.x/this.resolution,g.y/this.resolution,g.h/this.resolution,g.w/this.resolution):new f.Rectangle(g.x/this.resolution,g.y/this.resolution,g.w/this.resolution,g.h/this.resolution),this._frames[e].trimmed&&(i=new f.Rectangle(this._frames[e].spriteSourceSize.x/this.resolution,this._frames[e].spriteSourceSize.y/this.resolution,g.w/this.resolution,g.h/this.resolution)),this.textures[e]=new f.Texture(this.baseTexture,h,j,i,this._frames[e].rotated?2:0),f.Texture.addToCache(this.textures[e],e)}c++}},a.prototype._parseComplete=function(){var a=this._callback;this._callback=null,this._batchIndex=0,a.call(this,this.textures)},a.prototype._nextBatch=function(){var b=this;this._processFrames(this._batchIndex*a.BATCH_SIZE),this._batchIndex++,setTimeout(function(){b._batchIndex*a.BATCH_SIZE<b._frameKeys.length?b._nextBatch():b._parseComplete()},0)},a.prototype.destroy=function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var b in this.textures)this.textures[b].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,a&&this.baseTexture.destroy(),this.baseTexture=null},a}();c.default=h},{"../":83,"../utils":142}],133:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a){a.destroy=function(){},a.on=function(){},a.once=function(){},a.emit=function(){}}c.__esModule=!0;var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("./BaseTexture"),k=d(j),l=a("./VideoBaseTexture"),m=d(l),n=a("./TextureUvs"),o=d(n),p=a("eventemitter3"),q=d(p),r=a("../math"),s=a("../utils"),t=a("../settings"),u=d(t),v=function(a){function b(c,d,g,h,i){e(this,b);var j=f(this,a.call(this));if(j.noFrame=!1,d||(j.noFrame=!0,d=new r.Rectangle(0,0,1,1)),c instanceof b&&(c=c.baseTexture),j.baseTexture=c,j._frame=d,j.trim=h,j.valid=!1,j.requiresUpdate=!1,j._uvs=null,j.orig=g||d,j._rotate=Number(i||0),!0===i)j._rotate=2;else if(j._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return c.hasLoaded?(j.noFrame&&(d=new r.Rectangle(0,0,c.width,c.height),c.on("update",j.onBaseTextureUpdated,j)),j.frame=d):c.once("loaded",j.onBaseTextureLoaded,j),j._updateID=0,j.transform=null,j.textureCacheIds=[],j}return g(b,a),b.prototype.update=function(){this.baseTexture.update()},b.prototype.onBaseTextureLoaded=function(a){this._updateID++,this.noFrame?this.frame=new r.Rectangle(0,0,a.width,a.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},b.prototype.onBaseTextureUpdated=function(a){this._updateID++,this._frame.width=a.width,this._frame.height=a.height,this.emit("update",this)},b.prototype.destroy=function(a){this.baseTexture&&(a&&(s.TextureCache[this.baseTexture.imageUrl]&&b.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,b.removeFromCache(this),this.textureCacheIds=null},b.prototype.clone=function(){return new b(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},b.prototype._updateUvs=function(){this._uvs||(this._uvs=new o.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},b.fromImage=function(a,c,d,e){var f=s.TextureCache[a];return f||(f=new b(k.default.fromImage(a,c,d,e)),b.addToCache(f,a)),f},b.fromFrame=function(a){var b=s.TextureCache[a];if(!b)throw new Error('The frameId "'+a+'" does not exist in the texture cache');return b},b.fromCanvas=function(a,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new b(k.default.fromCanvas(a,c,d))},b.fromVideo=function(a,c){return"string"==typeof a?b.fromVideoUrl(a,c):new b(m.default.fromVideo(a,c))},b.fromVideoUrl=function(a,c){return new b(m.default.fromUrl(a,c))},b.from=function(a){if("string"==typeof a){var c=s.TextureCache[a];if(!c){return null!==a.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?b.fromVideoUrl(a):b.fromImage(a)}return c}return a instanceof HTMLImageElement?new b(k.default.from(a)):a instanceof HTMLCanvasElement?b.fromCanvas(a,u.default.SCALE_MODE,"HTMLCanvasElement"):a instanceof HTMLVideoElement?b.fromVideo(a):a instanceof k.default?new b(a):a},b.fromLoader=function(a,c,d){var e=new k.default(a,void 0,(0,s.getResolutionOfUrl)(c)),f=new b(e);return e.imageUrl=c,d||(d=c),k.default.addToCache(f.baseTexture,d),b.addToCache(f,d),d!==c&&(k.default.addToCache(f.baseTexture,c),b.addToCache(f,c)),f},b.addToCache=function(a,b){b&&(-1===a.textureCacheIds.indexOf(b)&&a.textureCacheIds.push(b),s.TextureCache[b]&&console.warn("Texture added to the cache with an id ["+b+"] that already had an entry"),s.TextureCache[b]=a)},b.removeFromCache=function(a){if("string"==typeof a){var b=s.TextureCache[a];if(b){var c=b.textureCacheIds.indexOf(a);return c>-1&&b.textureCacheIds.splice(c,1),delete s.TextureCache[a],b}}else if(a&&a.textureCacheIds){for(var d=0;d<a.textureCacheIds.length;++d)delete s.TextureCache[a.textureCacheIds[d]];return a.textureCacheIds.length=0,a}return null},i(b,[{key:"frame",get:function(){return this._frame},set:function(a){if(this._frame=a,this.noFrame=!1,a.x+a.width>this.baseTexture.width||a.y+a.height>this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: X: "+a.x+" + "+a.width+" > "+this.baseTexture.width+" Y: "+a.y+" + "+a.height+" > "+this.baseTexture.height);this.valid=a&&a.width&&a.height&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=a),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(a){this._rotate=a,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),b}(q.default);c.default=v,v.EMPTY=new v(new k.default),h(v.EMPTY),h(v.EMPTY.baseTexture),v.WHITE=function(){var a=document.createElement("canvas");a.width=10,a.height=10;var b=a.getContext("2d");return b.fillStyle="white",b.fillRect(0,0,10,10),new v(new k.default(a))}(),h(v.WHITE),h(v.WHITE.baseTexture)},{"../math":88,"../settings":119,"../utils":142,"./BaseTexture":130,"./TextureUvs":134,"./VideoBaseTexture":135,eventemitter3:27}],134:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("../math/GroupD8"),f=function(a){return a&&a.__esModule?a:{default:a}}(e),g=function(){function a(){d(this,a),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return a.prototype.set=function(a,b,c){var d=b.width,e=b.height;if(c){var g=a.width/2/d,h=a.height/2/e,i=a.x/d+g,j=a.y/e+h;c=f.default.add(c,f.default.NW),this.x0=i+g*f.default.uX(c),this.y0=j+h*f.default.uY(c),c=f.default.add(c,2),this.x1=i+g*f.default.uX(c),this.y1=j+h*f.default.uY(c),c=f.default.add(c,2),this.x2=i+g*f.default.uX(c),this.y2=j+h*f.default.uY(c),c=f.default.add(c,2),this.x3=i+g*f.default.uX(c),this.y3=j+h*f.default.uY(c)}else this.x0=a.x/d,this.y0=a.y/e,this.x1=(a.x+a.width)/d,this.y1=a.y/e,this.x2=(a.x+a.width)/d,this.y2=(a.y+a.height)/e,this.x3=a.x/d,this.y3=(a.y+a.height)/e;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},a}();c.default=g},{"../math/GroupD8":84}],135:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b){b||(b="video/"+a.substr(a.lastIndexOf(".")+1));var c=document.createElement("source");return c.src=a,c.type=b,c}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./BaseTexture"),j=function(a){return a&&a.__esModule?a:{default:a}}(i),k=a("../utils"),l=a("../ticker"),m=a("../const"),n=function(a){function b(c,f){if(d(this,b),!c)throw new Error("No video source element specified.");(c.readyState===c.HAVE_ENOUGH_DATA||c.readyState===c.HAVE_FUTURE_DATA)&&c.width&&c.height&&(c.complete=!0);var g=e(this,a.call(this,c,f));return g.width=c.videoWidth,g.height=c.videoHeight,g._autoUpdate=!0,g._isAutoUpdating=!1,g.autoPlay=!0,g.update=g.update.bind(g),g._onCanPlay=g._onCanPlay.bind(g),c.addEventListener("play",g._onPlayStart.bind(g)),c.addEventListener("pause",g._onPlayStop.bind(g)),g.hasLoaded=!1,g.__loaded=!1,g._isSourceReady()?g._onCanPlay():(c.addEventListener("canplay",g._onCanPlay),c.addEventListener("canplaythrough",g._onCanPlay)),g}return f(b,a),b.prototype._isSourcePlaying=function(){var a=this.source;return a.currentTime>0&&!1===a.paused&&!1===a.ended&&a.readyState>2},b.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},b.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(l.shared.add(this.update,this,m.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},b.prototype._onPlayStop=function(){this._isAutoUpdating&&(l.shared.remove(this.update,this),this._isAutoUpdating=!1)},b.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},b.prototype.destroy=function(){this._isAutoUpdating&&l.shared.remove(this.update,this),this.source&&this.source._pixiId&&(j.default.removeFromCache(this.source._pixiId),delete this.source._pixiId),a.prototype.destroy.call(this)},b.fromVideo=function(a,c){a._pixiId||(a._pixiId="video_"+(0,k.uid)());var d=k.BaseTextureCache[a._pixiId];return d||(d=new b(a,c),j.default.addToCache(d,a._pixiId)),d},b.fromUrl=function(a,c){var d=document.createElement("video");if(d.setAttribute("webkit-playsinline",""),d.setAttribute("playsinline",""),Array.isArray(a))for(var e=0;e<a.length;++e)d.appendChild(g(a[e].src||a[e],a[e].mime));else d.appendChild(g(a.src||a,a.mime));return d.load(),b.fromVideo(d,c)},h(b,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(a){a!==this._autoUpdate&&(this._autoUpdate=a,!this._autoUpdate&&this._isAutoUpdating?(l.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(l.shared.add(this.update,this,m.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),b}(j.default);c.default=n,n.fromUrls=n.fromUrl},{"../const":64,"../ticker":138,"../utils":142,"./BaseTexture":130}],136:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("../settings"),h=d(g),i=a("../const"),j=a("./TickerListener"),k=d(j),l=function(){function a(){var b=this;e(this,a),this._head=new k.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/h.default.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1,this._tick=function(a){b._requestId=null,b.started&&(b.update(a),b.started&&null===b._requestId&&b._head.next&&(b._requestId=requestAnimationFrame(b._tick)))}}return a.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},a.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},a.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},a.prototype.add=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.UPDATE_PRIORITY.NORMAL;return this._addListener(new k.default(a,b,c))},a.prototype.addOnce=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.UPDATE_PRIORITY.NORMAL;return this._addListener(new k.default(a,b,c,!0))},a.prototype._addListener=function(a){var b=this._head.next,c=this._head;if(b){for(;b;){if(a.priority>b.priority){a.connect(c);break}c=b,b=b.next}a.previous||a.connect(c)}else a.connect(c);return this._startIfPossible(),this},a.prototype.remove=function(a,b){for(var c=this._head.next;c;)c=c.match(a,b)?c.destroy():c.next;return this._head.next||this._cancelIfNeeded(),this},a.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},a.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},a.prototype.destroy=function(){this.stop();for(var a=this._head.next;a;)a=a.destroy(!0);this._head.destroy(),this._head=null},a.prototype.update=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),b=void 0;if(a>this.lastTime){b=this.elapsedMS=a-this.lastTime,b>this._maxElapsedMS&&(b=this._maxElapsedMS),this.deltaTime=b*h.default.TARGET_FPMS*this.speed;for(var c=this._head,d=c.next;d;)d=d.emit(this.deltaTime);c.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=a},f(a,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(a){var b=Math.min(Math.max(0,a)/1e3,h.default.TARGET_FPMS);this._maxElapsedMS=1/b}}]),a}();c.default=l},{"../const":64,"../settings":119,"./TickerListener":137}],137:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(b){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,f=arguments.length>3&&void 0!==arguments[3]&&arguments[3];d(this,a),this.fn=b,this.context=c,this.priority=e,this.once=f,this.next=null,this.previous=null,this._destroyed=!1}return a.prototype.match=function(a,b){return b=b||null,this.fn===a&&this.context===b},a.prototype.emit=function(a){this.fn&&(this.context?this.fn.call(this.context,a):this.fn(a));var b=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),b},a.prototype.connect=function(a){this.previous=a,a.next&&(a.next.previous=this),this.next=a.next,a.next=this},a.prototype.destroy=function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var b=this.previous;return this.next=a?null:b,this.previous=null,b},a}();c.default=e},{}],138:[function(a,b,c){"use strict";c.__esModule=!0,c.Ticker=c.shared=void 0;var d=a("./Ticker"),e=function(a){return a&&a.__esModule?a:{default:a}}(d),f=new e.default;f.autoStart=!0,f.destroy=function(){},c.shared=f,c.Ticker=e.default},{"./Ticker":136}],139:[function(a,b,c){"use strict";function d(){return!(!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}c.__esModule=!0,c.default=d},{}],140:[function(a,b,c){"use strict";function d(a){for(var b=6*a,c=new Uint16Array(b),d=0,e=0;d<b;d+=6,e+=4)c[d+0]=e+0,c[d+1]=e+1,c[d+2]=e+2,c[d+3]=e+0,c[d+4]=e+2,c[d+5]=e+3;return c}c.__esModule=!0,c.default=d},{}],141:[function(a,b,c){"use strict";function d(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===a.indexOf("data:"))return"";b=b||window.location,g||(g=document.createElement("a")),g.href=a,a=f.default.parse(g.href);var c=!a.port&&""===b.port||a.port===b.port;return a.hostname===b.hostname&&c&&a.protocol===b.protocol?"":"anonymous"}c.__esModule=!0,c.default=d;var e=a("url"),f=function(a){return a&&a.__esModule?a:{default:a}}(e),g=void 0},{url:234}],142:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a){return a&&a.__esModule?a:{default:a}}function f(){return++F}function g(a,b){return b=b||[],b[0]=(a>>16&255)/255,b[1]=(a>>8&255)/255,b[2]=(255&a)/255,b}function h(a){return a=a.toString(16),"#"+(a="000000".substr(0,6-a.length)+a)}function i(a){return(255*a[0]<<16)+(255*a[1]<<8)+(255*a[2]|0)}function j(a,b){var c=w.default.RETINA_PREFIX.exec(a);return c?parseFloat(c[1]):void 0!==b?b:1}function k(a){var b=u.DATA_URI.exec(a);if(b)return{mediaType:b[1]?b[1].toLowerCase():void 0,subType:b[2]?b[2].toLowerCase():void 0,encoding:b[3]?b[3].toLowerCase():void 0,data:b[4]}}function l(a){var b=u.URL_FILE_EXTENSION.exec(a);if(b)return b[1].toLowerCase()}function m(a){var b=u.SVG_SIZE.exec(a),c={};return b&&(c[b[1]]=Math.round(parseFloat(b[3])),c[b[5]]=Math.round(parseFloat(b[7]))),c}function n(){G=!0}function o(a){if(!G){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var b=["\n %c %c %c Pixi.js "+u.VERSION+" -  "+a+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,b)}else window.console&&window.console.log("Pixi.js "+u.VERSION+" - "+a+" - http://www.pixijs.com/");G=!0}}function p(){var a={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var b=document.createElement("canvas"),c=b.getContext("webgl",a)||b.getContext("experimental-webgl",a),d=!(!c||!c.getContextAttributes().stencil);if(c){var e=c.getExtension("WEBGL_lose_context");e&&e.loseContext()}return c=null,d}catch(a){return!1}}function q(a){return 0===a?0:a<0?-1:1}function r(a,b,c){var d=a.length;if(!(b>=d||0===c)){c=b+c>d?d-b:c;for(var e=d-c,f=b;f<e;++f)a[f]=a[f+c];a.length=e}}function s(){var a=void 0;for(a in H)H[a].destroy();for(a in I)I[a].destroy()}function t(){var a=void 0;for(a in H)delete H[a];for(a in I)delete I[a]}c.__esModule=!0,c.BaseTextureCache=c.TextureCache=c.mixins=c.pluginTarget=c.EventEmitter=c.isMobile=void 0,c.uid=f,c.hex2rgb=g,c.hex2string=h,c.rgb2hex=i,c.getResolutionOfUrl=j,c.decomposeDataUri=k,c.getUrlFileExtension=l,c.getSvgSize=m,c.skipHello=n,c.sayHello=o,c.isWebGLSupported=p,c.sign=q,c.removeItems=r,c.destroyTextureCache=s,c.clearTextureCache=t;var u=a("../const"),v=a("../settings"),w=e(v),x=a("eventemitter3"),y=e(x),z=a("./pluginTarget"),A=e(z),B=a("./mixin"),C=d(B),D=a("ismobilejs"),E=d(D),F=0,G=!1;c.isMobile=E,c.EventEmitter=y.default,c.pluginTarget=A.default,c.mixins=C;var H=c.TextureCache=Object.create(null),I=c.BaseTextureCache=Object.create(null)},{"../const":64,"../settings":119,"./mixin":144,"./pluginTarget":145,eventemitter3:27,ismobilejs:32}],143:[function(a,b,c){"use strict";function d(a){return f.default.tablet||f.default.phone?4:a}c.__esModule=!0,c.default=d;var e=a("ismobilejs"),f=function(a){return a&&a.__esModule?a:{default:a}}(e)},{ismobilejs:32}],144:[function(a,b,c){"use strict";function d(a,b){if(a&&b)for(var c=Object.keys(b),d=0;d<c.length;++d){var e=c[d];Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(b,e))}}function e(a,b){g.push(a,b)}function f(){for(var a=0;a<g.length;a+=2)d(g[a],g[a+1]);g.length=0}c.__esModule=!0,c.mixin=d,c.delayMixin=e,c.performMixins=f;var g=[]},{}],145:[function(a,b,c){"use strict";function d(a){a.__plugins={},a.registerPlugin=function(b,c){a.__plugins[b]=c},a.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var b in a.__plugins)this.plugins[b]=new a.__plugins[b](this)},a.prototype.destroyPlugins=function(){for(var a in this.plugins)this.plugins[a].destroy(),this.plugins[a]=null;this.plugins=null}}c.__esModule=!0,c.default={mixin:function(a){d(a)}}},{}],146:[function(a,b,c){"use strict";function d(a){var b=a.width,c=a.height,d=a.getContext("2d"),e=d.getImageData(0,0,b,c),f=e.data,g=f.length,h={top:null,left:null,right:null,bottom:null},i=void 0,j=void 0,k=void 0;for(i=0;i<g;i+=4)0!==f[i+3]&&(j=i/4%b,k=~~(i/4/b),null===h.top&&(h.top=k),null===h.left?h.left=j:j<h.left&&(h.left=j),null===h.right?h.right=j+1:h.right<j&&(h.right=j+1),null===h.bottom?h.bottom=k:h.bottom<k&&(h.bottom=k));return b=h.right-h.left,c=h.bottom-h.top+1,{height:c,width:b,data:d.getImageData(h.left,h.top,b,c)}}c.__esModule=!0,c.default=d},{}],147:[function(a,b,c){"use strict";function d(a){var b=(new Error).stack;void 0===b?console.warn("Deprecation Warning: ",a):(b=b.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",a),console.warn(b),console.groupEnd()):(console.warn("Deprecation Warning: ",a),console.warn(b)))}function e(a){var b=a.mesh,c=a.particles,e=a.extras,f=a.filters,g=a.prepare,h=a.loaders,i=a.interaction;Object.defineProperties(a,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{
get:function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return d("You do not need to use a PIXI Stage any more, you can simply render any container."),a.Container}},DisplayObjectContainer:{get:function(){return d("DisplayObjectContainer has been shortened to Container, please use Container from now on."),a.Container}},Strip:{get:function(){return d("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),b.Mesh}},Rope:{get:function(){return d("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),b.Rope}},ParticleContainer:{get:function(){return d("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),c.ParticleContainer}},MovieClip:{get:function(){return d("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),e.AnimatedSprite}},TilingSprite:{get:function(){return d("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),e.TilingSprite}},BitmapText:{get:function(){return d("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),e.BitmapText}},blendModes:{get:function(){return d("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),a.BLEND_MODES}},scaleModes:{get:function(){return d("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),a.SCALE_MODES}},BaseTextureCache:{get:function(){return d("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),a.utils.BaseTextureCache}},TextureCache:{get:function(){return d("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),a.utils.TextureCache}},math:{get:function(){return d("The math namespace is deprecated, please access members already accessible on PIXI."),a}},AbstractFilter:{get:function(){return d("AstractFilter has been renamed to Filter, please use PIXI.Filter"),a.Filter}},TransformManual:{get:function(){return d("TransformManual has been renamed to TransformBase, please update your pixi-spine"),a.TransformBase}},TARGET_FPMS:{get:function(){return d("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),a.settings.TARGET_FPMS},set:function(b){d("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),a.settings.TARGET_FPMS=b}},FILTER_RESOLUTION:{get:function(){return d("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),a.settings.FILTER_RESOLUTION},set:function(b){d("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),a.settings.FILTER_RESOLUTION=b}},RESOLUTION:{get:function(){return d("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),a.settings.RESOLUTION},set:function(b){d("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),a.settings.RESOLUTION=b}},MIPMAP_TEXTURES:{get:function(){return d("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),a.settings.MIPMAP_TEXTURES},set:function(b){d("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),a.settings.MIPMAP_TEXTURES=b}},SPRITE_BATCH_SIZE:{get:function(){return d("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),a.settings.SPRITE_BATCH_SIZE},set:function(b){d("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),a.settings.SPRITE_BATCH_SIZE=b}},SPRITE_MAX_TEXTURES:{get:function(){return d("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),a.settings.SPRITE_MAX_TEXTURES},set:function(b){d("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),a.settings.SPRITE_MAX_TEXTURES=b}},RETINA_PREFIX:{get:function(){return d("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),a.settings.RETINA_PREFIX},set:function(b){d("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),a.settings.RETINA_PREFIX=b}},DEFAULT_RENDER_OPTIONS:{get:function(){return d("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),a.settings.RENDER_OPTIONS}}});for(var j=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],k=0;k<j.length;k++)!function(b){var c=j[b];Object.defineProperty(a[c.parent],"DEFAULT",{get:function(){return d("PIXI."+c.parent+".DEFAULT has been deprecated, please use PIXI.settings."+c.target),a.settings[c.target]},set:function(b){d("PIXI."+c.parent+".DEFAULT has been deprecated, please use PIXI.settings."+c.target),a.settings[c.target]=b}})}(k);Object.defineProperties(a.settings,{PRECISION:{get:function(){return d("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),a.settings.PRECISION_FRAGMENT},set:function(b){d("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),a.settings.PRECISION_FRAGMENT=b}}}),Object.defineProperties(e,{MovieClip:{get:function(){return d("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),e.AnimatedSprite}}}),a.DisplayObject.prototype.generateTexture=function(a,b,c){return d("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),a.generateTexture(this,b,c)},a.Graphics.prototype.generateTexture=function(a,b){return d("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(a,b)},a.RenderTexture.prototype.render=function(a,b,c,e){this.legacyRenderer.render(a,this,c,b,!e),d("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},a.RenderTexture.prototype.getImage=function(a){return d("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(a)},a.RenderTexture.prototype.getBase64=function(a){return d("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(a)},a.RenderTexture.prototype.getCanvas=function(a){return d("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(a)},a.RenderTexture.prototype.getPixels=function(a){return d("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(a)},a.Sprite.prototype.setTexture=function(a){this.texture=a,d("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},e.BitmapText.prototype.setText=function(a){this.text=a,d("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")},a.Text.prototype.setText=function(a){this.text=a,d("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},a.Text.calculateFontProperties=function(b){return d("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),a.TextMetrics.measureFont(b)},Object.defineProperties(a.Text,{fontPropertiesCache:{get:function(){return d("Text.fontPropertiesCache is deprecated"),a.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return d("Text.fontPropertiesCanvas is deprecated"),a.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return d("Text.fontPropertiesContext is deprecated"),a.TextMetrics._context}}}),a.Text.prototype.setStyle=function(a){this.style=a,d("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},a.Text.prototype.determineFontProperties=function(b){return d("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),a.TextMetrics.measureFont(b)},a.Text.getFontStyle=function(b){return d("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),b=b||{},b instanceof a.TextStyle||(b=new a.TextStyle(b)),b.toFontString()},Object.defineProperties(a.TextStyle.prototype,{font:{get:function(){d("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var a="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+a+" "+this._fontFamily},set:function(a){d("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),a.indexOf("italic")>1?this._fontStyle="italic":a.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",a.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var b=a.split(" "),c=-1;this._fontSize=26;for(var e=0;e<b.length;++e)if(b[e].match(/(px|pt|em|%)/)){c=e,this._fontSize=b[e];break}this._fontWeight="normal";for(var f=0;f<c;++f)if(b[f].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=b[f];break}if(c>-1&&c<b.length-1){this._fontFamily="";for(var g=c+1;g<b.length;++g)this._fontFamily+=b[g]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),a.Texture.prototype.setFrame=function(a){this.frame=a,d("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},a.Texture.addTextureToCache=function(b,c){a.Texture.addToCache(b,c),d("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},a.Texture.removeTextureFromCache=function(b){return d("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),a.BaseTexture.removeFromCache(b),a.Texture.removeFromCache(b)},Object.defineProperties(f,{AbstractFilter:{get:function(){return d("AstractFilter has been renamed to Filter, please use PIXI.Filter"),a.AbstractFilter}},SpriteMaskFilter:{get:function(){return d("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),a.SpriteMaskFilter}}}),a.utils.uuid=function(){return d("utils.uuid() is deprecated, please use utils.uid() from now on."),a.utils.uid()},a.utils.canUseNewCanvasBlendModes=function(){return d("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),a.CanvasTinter.canUseMultiply};var l=!0;if(Object.defineProperty(a.utils,"_saidHello",{set:function(a){a&&(d("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),l=a},get:function(){return l}}),g.BasePrepare.prototype.register=function(a,b){return d("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),a&&this.registerFindHook(a),b&&this.registerUploadHook(b),this},Object.defineProperty(g.canvas,"UPLOADS_PER_FRAME",{set:function(){d("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return d("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),Object.defineProperty(g.webgl,"UPLOADS_PER_FRAME",{set:function(){d("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return d("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),h.Loader){var m=h.Resource,n=h.Loader;Object.defineProperties(m.prototype,{isJson:{get:function(){return d("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===m.TYPE.JSON}},isXml:{get:function(){return d("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===m.TYPE.XML}},isImage:{get:function(){return d("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===m.TYPE.IMAGE}},isAudio:{get:function(){return d("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===m.TYPE.AUDIO}},isVideo:{get:function(){return d("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===m.TYPE.VIDEO}}}),Object.defineProperties(n.prototype,{before:{get:function(){return d("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return d("The after() method is deprecated, please use use()."),this.use}}})}Object.defineProperty(i.interactiveTarget,"defaultCursor",{set:function(a){d("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=a},get:function(){return d("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),Object.defineProperty(i.InteractionManager,"defaultCursorStyle",{set:function(a){d("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=a},get:function(){return d("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(i.InteractionManager,"currentCursorStyle",{set:function(a){d("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=a},get:function(){return d("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}})}c.__esModule=!0,c.default=e},{}],148:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("../../core"),f=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(e),g=new f.Rectangle,h=function(){function a(b){d(this,a),this.renderer=b,b.extract=this}return a.prototype.image=function(a){var b=new Image;return b.src=this.base64(a),b},a.prototype.base64=function(a){return this.canvas(a).toDataURL()},a.prototype.canvas=function(a){var b=this.renderer,c=void 0,d=void 0,e=void 0,h=void 0;a&&(h=a instanceof f.RenderTexture?a:b.generateTexture(a)),h?(c=h.baseTexture._canvasRenderTarget.context,d=h.baseTexture._canvasRenderTarget.resolution,e=h.frame):(c=b.rootContext,e=g,e.width=this.renderer.width,e.height=this.renderer.height);var i=e.width*d,j=e.height*d,k=new f.CanvasRenderTarget(i,j),l=c.getImageData(e.x*d,e.y*d,i,j);return k.context.putImageData(l,0,0),k.canvas},a.prototype.pixels=function(a){var b=this.renderer,c=void 0,d=void 0,e=void 0,h=void 0;return a&&(h=a instanceof f.RenderTexture?a:b.generateTexture(a)),h?(c=h.baseTexture._canvasRenderTarget.context,d=h.baseTexture._canvasRenderTarget.resolution,e=h.frame):(c=b.rootContext,e=g,e.width=b.width,e.height=b.height),c.getImageData(0,0,e.width*d,e.height*d).data},a.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},a}();c.default=h,f.CanvasRenderer.registerPlugin("extract",h)},{"../../core":83}],149:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=a("./webgl/WebGLExtract");Object.defineProperty(c,"webgl",{enumerable:!0,get:function(){return d(e).default}});var f=a("./canvas/CanvasExtract");Object.defineProperty(c,"canvas",{enumerable:!0,get:function(){return d(f).default}})},{"./canvas/CanvasExtract":148,"./webgl/WebGLExtract":150}],150:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("../../core"),f=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(e),g=new f.Rectangle,h=function(){function a(b){d(this,a),this.renderer=b,b.extract=this}return a.prototype.image=function(a){var b=new Image;return b.src=this.base64(a),b},a.prototype.base64=function(a){return this.canvas(a).toDataURL()},a.prototype.canvas=function(a){var b=this.renderer,c=void 0,d=void 0,e=void 0,h=!1,i=void 0;a&&(i=a instanceof f.RenderTexture?a:this.renderer.generateTexture(a)),i?(c=i.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],d=c.resolution,e=i.frame,h=!1):(c=this.renderer.rootRenderTarget,d=c.resolution,h=!0,e=g,e.width=c.size.width,e.height=c.size.height);var j=e.width*d,k=e.height*d,l=new f.CanvasRenderTarget(j,k);if(c){b.bindRenderTarget(c);var m=new Uint8Array(4*j*k),n=b.gl;n.readPixels(e.x*d,e.y*d,j,k,n.RGBA,n.UNSIGNED_BYTE,m);var o=l.context.getImageData(0,0,j,k);o.data.set(m),l.context.putImageData(o,0,0),h&&(l.context.scale(1,-1),l.context.drawImage(l.canvas,0,-k))}return l.canvas},a.prototype.pixels=function(a){var b=this.renderer,c=void 0,d=void 0,e=void 0,h=void 0;a&&(h=a instanceof f.RenderTexture?a:this.renderer.generateTexture(a)),h?(c=h.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],d=c.resolution,e=h.frame):(c=this.renderer.rootRenderTarget,d=c.resolution,e=g,e.width=c.size.width,e.height=c.size.height);var i=e.width*d,j=e.height*d,k=new Uint8Array(4*i*j);if(c){b.bindRenderTarget(c);var l=b.gl;l.readPixels(e.x*d,e.y*d,i,j,l.RGBA,l.UNSIGNED_BYTE,k)}return k},a.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},a}();c.default=h,f.WebGLRenderer.registerPlugin("extract",h)},{"../../core":83}],151:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("../core"),i=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(h),j=function(a){function b(c,f){d(this,b);var g=e(this,a.call(this,c[0]instanceof i.Texture?c[0]:c[0].texture));return g._textures=null,g._durations=null,g.textures=c,g._autoUpdate=!1!==f,g.animationSpeed=1,g.loop=!0,g.onComplete=null,g.onFrameChange=null,g._currentTime=0,g.playing=!1,g}return f(b,a),b.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&i.ticker.shared.remove(this.update,this))},b.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&i.ticker.shared.add(this.update,this,i.UPDATE_PRIORITY.HIGH))},b.prototype.gotoAndStop=function(a){this.stop();var b=this.currentFrame;this._currentTime=a,b!==this.currentFrame&&this.updateTexture()},b.prototype.gotoAndPlay=function(a){var b=this.currentFrame;this._currentTime=a,b!==this.currentFrame&&this.updateTexture(),this.play()},b.prototype.update=function(a){var b=this.animationSpeed*a,c=this.currentFrame;if(null!==this._durations){var d=this._currentTime%1*this._durations[this.currentFrame];for(d+=b/60*1e3;d<0;)this._currentTime--,d+=this._durations[this.currentFrame];var e=Math.sign(this.animationSpeed*a);for(this._currentTime=Math.floor(this._currentTime);d>=this._durations[this.currentFrame];)d-=this._durations[this.currentFrame]*e,this._currentTime+=e;this._currentTime+=d/this._durations[this.currentFrame]}else this._currentTime+=b;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):c!==this.currentFrame&&this.updateTexture()},b.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.onFrameChange&&this.onFrameChange(this.currentFrame)},b.prototype.destroy=function(){this.stop(),a.prototype.destroy.call(this)},b.fromFrames=function(a){for(var c=[],d=0;d<a.length;++d)c.push(i.Texture.fromFrame(a[d]));return new b(c)},b.fromImages=function(a){for(var c=[],d=0;d<a.length;++d)c.push(i.Texture.fromImage(a[d]));return new b(c)},g(b,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(a){if(a[0]instanceof i.Texture)this._textures=a,this._durations=null;else{this._textures=[],this._durations=[];for(var b=0;b<a.length;b++)this._textures.push(a[b].texture),this._durations.push(a[b].time)}}},{key:"currentFrame",get:function(){var a=Math.floor(this._currentTime)%this._textures.length;return a<0&&(a+=this._textures.length),a}}]),b}(i.Sprite);c.default=j},{"../core":83}],152:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("../core"),i=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(h),j=a("../core/math/ObservablePoint"),k=function(a){return a&&a.__esModule?a:{default:a}}(j),l=function(a){function b(c){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d(this,b);var g=e(this,a.call(this));return g._textWidth=0,g._textHeight=0,g._glyphs=[],g._font={tint:void 0!==f.tint?f.tint:16777215,align:f.align||"left",name:null,size:0},g.font=f.font,g._text=c,g.maxWidth=0,g.maxLineHeight=0,g._anchor=new k.default(function(){g.dirty=!0},g,0,0),g.dirty=!1,g.updateText(),g}return f(b,a),b.prototype.updateText=function(){for(var a=b.fonts[this._font.name],c=this._font.size/a.size,d=new i.Point,e=[],f=[],g=null,h=0,j=0,k=0,l=-1,m=0,n=0,o=0;o<this.text.length;o++){var p=this.text.charCodeAt(o);if(/(\s)/.test(this.text.charAt(o))&&(l=o,m=h),/(?:\r\n|\r|\n)/.test(this.text.charAt(o)))f.push(h),j=Math.max(j,h),k++,d.x=0,d.y+=a.lineHeight,g=null;else if(-1!==l&&this.maxWidth>0&&d.x*c>this.maxWidth)i.utils.removeItems(e,l,o-l),o=l,l=-1,f.push(m),j=Math.max(j,m),k++,d.x=0,d.y+=a.lineHeight,g=null;else{var q=a.chars[p];q&&(g&&q.kerning[g]&&(d.x+=q.kerning[g]),e.push({texture:q.texture,line:k,charCode:p,position:new i.Point(d.x+q.xOffset,d.y+q.yOffset)}),h=d.x+(q.texture.width+q.xOffset),d.x+=q.xAdvance,n=Math.max(n,q.yOffset+q.texture.height),g=p)}}f.push(h),j=Math.max(j,h);for(var r=[],s=0;s<=k;s++){var t=0;"right"===this._font.align?t=j-f[s]:"center"===this._font.align&&(t=(j-f[s])/2),r.push(t)}for(var u=e.length,v=this.tint,w=0;w<u;w++){var x=this._glyphs[w];x?x.texture=e[w].texture:(x=new i.Sprite(e[w].texture),this._glyphs.push(x)),x.position.x=(e[w].position.x+r[e[w].line])*c,x.position.y=e[w].position.y*c,x.scale.x=x.scale.y=c,x.tint=v,x.parent||this.addChild(x)}for(var y=u;y<this._glyphs.length;++y)this.removeChild(this._glyphs[y]);if(this._textWidth=j*c,this._textHeight=(d.y+a.lineHeight)*c,0!==this.anchor.x||0!==this.anchor.y)for(var z=0;z<u;z++)this._glyphs[z].x-=this._textWidth*this.anchor.x,this._glyphs[z].y-=this._textHeight*this.anchor.y;this.maxLineHeight=n*c},b.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},b.prototype.getLocalBounds=function(){return this.validate(),a.prototype.getLocalBounds.call(this)},b.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},b.registerFont=function(a,c){var d={},e=a.getElementsByTagName("info")[0],f=a.getElementsByTagName("common")[0];d.font=e.getAttribute("face"),d.size=parseInt(e.getAttribute("size"),10),d.lineHeight=parseInt(f.getAttribute("lineHeight"),10),d.chars={};for(var g=a.getElementsByTagName("char"),h=0;h<g.length;h++){var j=g[h],k=parseInt(j.getAttribute("id"),10),l=new i.Rectangle(parseInt(j.getAttribute("x"),10)+c.frame.x,parseInt(j.getAttribute("y"),10)+c.frame.y,parseInt(j.getAttribute("width"),10),parseInt(j.getAttribute("height"),10));d.chars[k]={xOffset:parseInt(j.getAttribute("xoffset"),10),yOffset:parseInt(j.getAttribute("yoffset"),10),xAdvance:parseInt(j.getAttribute("xadvance"),10),kerning:{},texture:new i.Texture(c.baseTexture,l)}}for(var m=a.getElementsByTagName("kerning"),n=0;n<m.length;n++){var o=m[n],p=parseInt(o.getAttribute("first"),10),q=parseInt(o.getAttribute("second"),10),r=parseInt(o.getAttribute("amount"),10);d.chars[q]&&(d.chars[q].kerning[p]=r)}return b.fonts[d.font]=d,d},g(b,[{key:"tint",get:function(){return this._font.tint},set:function(a){this._font.tint="number"==typeof a&&a>=0?a:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(a){this._font.align=a||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(a){"number"==typeof a?this._anchor.set(a):this._anchor.copy(a)}},{key:"font",get:function(){return this._font},set:function(a){a&&("string"==typeof a?(a=a.split(" "),this._font.name=1===a.length?a[0]:a.slice(1).join(" "),this._font.size=a.length>=2?parseInt(a[0],10):b.fonts[this._font.name].size):(this._font.name=a.name,this._font.size="number"==typeof a.size?a.size:parseInt(a.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(a){a=a.toString()||" ",this._text!==a&&(this._text=a,this.dirty=!0)}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),b}(i.Container);c.default=l,l.fonts={}},{"../core":83,"../core/math/ObservablePoint":86}],153:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("../core/math/Matrix"),g=function(a){return a&&a.__esModule?a:{default:a}}(f),h=new g.default,i=function(){function a(b,c){d(this,a),this._texture=b,this.mapCoord=new g.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===c?.5:c}return a.prototype.multiplyUvs=function(a,b){void 0===b&&(b=a);for(var c=this.mapCoord,d=0;d<a.length;d+=2){var e=a[d],f=a[d+1];b[d]=e*c.a+f*c.c+c.tx,b[d+1]=e*c.b+f*c.d+c.ty}return b},a.prototype.update=function(a){var b=this._texture;if(!b||!b.valid)return!1;if(!a&&this._lastTextureID===b._updateID)return!1;this._lastTextureID=b._updateID;var c=b._uvs;this.mapCoord.set(c.x1-c.x0,c.y1-c.y0,c.x3-c.x0,c.y3-c.y0,c.x0,c.y0);var d=b.orig,e=b.trim;e&&(h.set(d.width/e.width,0,0,d.height/e.height,-e.x/e.width,-e.y/e.height),this.mapCoord.append(h));var f=b.baseTexture,g=this.uClampFrame,i=this.clampMargin/f.resolution,j=this.clampOffset;return g[0]=(b._frame.x+i+j)/f.width,g[1]=(b._frame.y+i+j)/f.height,g[2]=(b._frame.x+b._frame.width-i+j)/f.width,g[3]=(b._frame.y+b._frame.height-i+j)/f.height,this.uClampOffset[0]=j/f.realWidth,this.uClampOffset[1]=j/f.realHeight,!0},e(a,[{key:"texture",get:function(){return this._texture},set:function(a){this._texture=a,this._lastTextureID=-1}}]),a}();c.default=i},{"../core/math/Matrix":85}],154:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../core"),j=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(i),k=a("../core/sprites/canvas/CanvasTinter"),l=d(k),m=a("./TextureTransform"),n=d(m),o=new j.Point,p=function(a){function b(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;e(this,b);var h=f(this,a.call(this,c));return h.tileTransform=new j.TransformStatic,h._width=d,h._height=g,h._canvasPattern=null,h.uvTransform=c.transform||new n.default(c),h.pluginName="tilingSprite",h.uvRespectAnchor=!1,h}return g(b,a),b.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture)},b.prototype._renderWebGL=function(a){var b=this._texture;b&&b.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),a.setObjectRenderer(a.plugins[this.pluginName]),a.plugins[this.pluginName].render(this))},b.prototype._renderCanvas=function(a){var b=this._texture;if(b.baseTexture.hasLoaded){var c=a.context,d=this.worldTransform,e=a.resolution,f=b.baseTexture,g=f.resolution,h=this.tilePosition.x/this.tileScale.x%b._frame.width*g,i=this.tilePosition.y/this.tileScale.y%b._frame.height*g;if(!this._canvasPattern){var k=new j.CanvasRenderTarget(b._frame.width,b._frame.height,g);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=l.default.getTintedTexture(this,this.tint)),k.context.drawImage(this.tintedTexture,0,0)):k.context.drawImage(f.source,-b._frame.x,-b._frame.y),this._canvasPattern=k.context.createPattern(k.canvas,"repeat")}c.globalAlpha=this.worldAlpha,c.setTransform(d.a*e,d.b*e,d.c*e,d.d*e,d.tx*e,d.ty*e),a.setBlendMode(this.blendMode),c.fillStyle=this._canvasPattern,c.scale(this.tileScale.x/g,this.tileScale.y/g);var m=this.anchor.x*-this._width,n=this.anchor.y*-this._height;this.uvRespectAnchor?(c.translate(h,i),c.fillRect(-h+m,-i+n,this._width/this.tileScale.x*g,this._height/this.tileScale.y*g)):(c.translate(h+m,i+n),
c.fillRect(-h,-i,this._width/this.tileScale.x*g,this._height/this.tileScale.y*g))}},b.prototype._calculateBounds=function(){var a=this._width*-this._anchor._x,b=this._height*-this._anchor._y,c=this._width*(1-this._anchor._x),d=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,a,b,c,d)},b.prototype.getLocalBounds=function(b){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),b||(this._localBoundsRect||(this._localBoundsRect=new j.Rectangle),b=this._localBoundsRect),this._bounds.getRectangle(b)):a.prototype.getLocalBounds.call(this,b)},b.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,o);var b=this._width,c=this._height,d=-b*this.anchor._x;if(o.x>d&&o.x<d+b){var e=-c*this.anchor._y;if(o.y>e&&o.y<e+c)return!0}return!1},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.tileTransform=null,this.uvTransform=null},b.from=function(a,c,d){return new b(j.Texture.from(a),c,d)},b.fromFrame=function(a,c,d){var e=j.utils.TextureCache[a];if(!e)throw new Error('The frameId "'+a+'" does not exist in the texture cache '+this);return new b(e,c,d)},b.fromImage=function(a,c,d,e,f){return new b(j.Texture.fromImage(a,e,f),c,d)},h(b,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(a){this.uvTransform.clampMargin=a,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(a){this.tileTransform.scale.copy(a)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(a){this.tileTransform.position.copy(a)}},{key:"width",get:function(){return this._width},set:function(a){this._width=a}},{key:"height",get:function(){return this._height},set:function(a){this._height=a}}]),b}(j.Sprite);c.default=p},{"../core":83,"../core/sprites/canvas/CanvasTinter":122,"./TextureTransform":153}],155:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=a("../core"),g=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(f),h=a("../core/textures/Texture"),i=d(h),j=a("../core/textures/BaseTexture"),k=d(j),l=a("../core/utils"),m=g.DisplayObject,n=new g.Matrix;m.prototype._cacheAsBitmap=!1,m.prototype._cacheData=!1;var o=function a(){e(this,a),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(m.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(a){if(this._cacheAsBitmap!==a){this._cacheAsBitmap=a;var b=void 0;a?(this._cacheData||(this._cacheData=new o),b=this._cacheData,b.originalRenderWebGL=this.renderWebGL,b.originalRenderCanvas=this.renderCanvas,b.originalUpdateTransform=this.updateTransform,b.originalCalculateBounds=this._calculateBounds,b.originalGetLocalBounds=this.getLocalBounds,b.originalDestroy=this.destroy,b.originalContainsPoint=this.containsPoint,b.originalMask=this._mask,b.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(b=this._cacheData,b.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=b.originalRenderWebGL,this.renderCanvas=b.originalRenderCanvas,this._calculateBounds=b.originalCalculateBounds,this.getLocalBounds=b.originalGetLocalBounds,this.destroy=b.originalDestroy,this.updateTransform=b.originalUpdateTransform,this.containsPoint=b.originalContainsPoint,this._mask=b.originalMask,this.filterArea=b.originalFilterArea)}}}}),m.prototype._renderCachedWebGL=function(a){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(a),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(a))},m.prototype._initCachedDisplayObject=function(a){if(!this._cacheData||!this._cacheData.sprite){var b=this.alpha;this.alpha=1,a.currentRenderer.flush();var c=this.getLocalBounds().clone();if(this._filters){var d=this._filters[0].padding;c.pad(d)}var e=a._activeRenderTarget,f=a.filterManager.filterStack,h=g.RenderTexture.create(0|c.width,0|c.height),j="cacheAsBitmap_"+(0,l.uid)();this._cacheData.textureCacheId=j,k.default.addToCache(h.baseTexture,j),i.default.addToCache(h,j);var m=n;m.tx=-c.x,m.ty=-c.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,a.render(this,h,!0,m,!0),a.bindRenderTarget(e),a.filterManager.filterStack=f,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var o=new g.Sprite(h);o.transform.worldTransform=this.transform.worldTransform,o.anchor.x=-c.x/c.width,o.anchor.y=-c.y/c.height,o.alpha=b,o._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=o,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=a._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=o.containsPoint.bind(o)}},m.prototype._renderCachedCanvas=function(a){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(a),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(a))},m.prototype._initCachedDisplayObjectCanvas=function(a){if(!this._cacheData||!this._cacheData.sprite){var b=this.getLocalBounds(),c=this.alpha;this.alpha=1;var d=a.context,e=g.RenderTexture.create(0|b.width,0|b.height),f="cacheAsBitmap_"+(0,l.uid)();this._cacheData.textureCacheId=f,k.default.addToCache(e.baseTexture,f),i.default.addToCache(e,f);var h=n;this.transform.localTransform.copy(h),h.invert(),h.tx-=b.x,h.ty-=b.y,this.renderCanvas=this._cacheData.originalRenderCanvas,a.render(this,e,!0,h,!1),a.context=d,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var j=new g.Sprite(e);j.transform.worldTransform=this.transform.worldTransform,j.anchor.x=-b.x/b.width,j.anchor.y=-b.y/b.height,j._bounds=this._bounds,j.alpha=c,this.parent?this.updateTransform():(this.parent=a._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=j,this.containsPoint=j.containsPoint.bind(j)}},m.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},m.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},m.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,k.default.removeFromCache(this._cacheData.textureCacheId),i.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},m.prototype._cacheAsBitmapDestroy=function(a){this.cacheAsBitmap=!1,this.destroy(a)}},{"../core":83,"../core/textures/BaseTexture":130,"../core/textures/Texture":133,"../core/utils":142}],156:[function(a,b,c){"use strict";var d=a("../core"),e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(d);e.DisplayObject.prototype.name=null,e.Container.prototype.getChildByName=function(a){for(var b=0;b<this.children.length;b++)if(this.children[b].name===a)return this.children[b];return null}},{"../core":83}],157:[function(a,b,c){"use strict";var d=a("../core"),e=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(d);e.DisplayObject.prototype.getGlobalPosition=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new e.Point,b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,a,b):(a.x=this.position.x,a.y=this.position.y),a}},{"../core":83}],158:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0,c.BitmapText=c.TilingSpriteRenderer=c.TilingSprite=c.AnimatedSprite=void 0;var e=a("./AnimatedSprite");Object.defineProperty(c,"AnimatedSprite",{enumerable:!0,get:function(){return d(e).default}});var f=a("./TilingSprite");Object.defineProperty(c,"TilingSprite",{enumerable:!0,get:function(){return d(f).default}});var g=a("./webgl/TilingSpriteRenderer");Object.defineProperty(c,"TilingSpriteRenderer",{enumerable:!0,get:function(){return d(g).default}});var h=a("./BitmapText");Object.defineProperty(c,"BitmapText",{enumerable:!0,get:function(){return d(h).default}}),a("./cacheAsBitmap"),a("./getChildByName"),a("./getGlobalPosition")},{"./AnimatedSprite":151,"./BitmapText":152,"./TilingSprite":154,"./cacheAsBitmap":155,"./getChildByName":156,"./getGlobalPosition":157,"./webgl/TilingSpriteRenderer":159}],159:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("../../core"),h=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(g),i=a("../../core/const"),j=(a("path"),new h.Matrix),k=new Float32Array(4),l=function(a){function b(c){d(this,b);var f=e(this,a.call(this,c));return f.shader=null,f.simpleShader=null,f.quad=null,f}return f(b,a),b.prototype.onContextChange=function(){var a=this.renderer.gl;this.shader=new h.Shader(a,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n\n    gl_FragColor = sample * color ;\n}\n"),this.simpleShader=new h.Shader(a,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\n    gl_FragColor = sample * color;\n}\n"),this.renderer.bindVao(null),this.quad=new h.Quad(a,this.renderer.state.attribState),this.quad.initVao(this.shader)},b.prototype.render=function(a){var b=this.renderer,c=this.quad;b.bindVao(c.vao);var d=c.vertices;d[0]=d[6]=a._width*-a.anchor.x,d[1]=d[3]=a._height*-a.anchor.y,d[2]=d[4]=a._width*(1-a.anchor.x),d[5]=d[7]=a._height*(1-a.anchor.y),a.uvRespectAnchor&&(d=c.uvs,d[0]=d[6]=-a.anchor.x,d[1]=d[3]=-a.anchor.y,d[2]=d[4]=1-a.anchor.x,d[5]=d[7]=1-a.anchor.y),c.upload();var e=a._texture,f=e.baseTexture,g=a.tileTransform.localTransform,l=a.uvTransform,m=f.isPowerOfTwo&&e.frame.width===f.width&&e.frame.height===f.height;m&&(f._glTextures[b.CONTEXT_UID]?m=f.wrapMode!==i.WRAP_MODES.CLAMP:f.wrapMode===i.WRAP_MODES.CLAMP&&(f.wrapMode=i.WRAP_MODES.REPEAT));var n=m?this.simpleShader:this.shader;b.bindShader(n);var o=e.width,p=e.height,q=a._width,r=a._height;j.set(g.a*o/q,g.b*o/r,g.c*p/q,g.d*p/r,g.tx/q,g.ty/r),j.invert(),m?j.prepend(l.mapCoord):(n.uniforms.uMapCoord=l.mapCoord.toArray(!0),n.uniforms.uClampFrame=l.uClampFrame,n.uniforms.uClampOffset=l.uClampOffset),n.uniforms.uTransform=j.toArray(!0);var s=k;h.utils.hex2rgb(a.tint,s),s[3]=a.worldAlpha,n.uniforms.uColor=s,n.uniforms.translationMatrix=a.transform.worldTransform.toArray(!0),n.uniforms.uSampler=b.bindTexture(e),b.setBlendMode(a.blendMode),c.vao.draw(this.renderer.gl.TRIANGLES,6,0)},b}(h.ObjectRenderer);c.default=l,h.WebGLRenderer.registerPlugin("tilingSprite",l)},{"../../core":83,"../../core/const":64,path:40}],160:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../../core"),j=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(i),k=a("./BlurXFilter"),l=d(k),m=a("./BlurYFilter"),n=d(m),o=function(a){function b(c,d,g,h){e(this,b);var i=f(this,a.call(this));return i.blurXFilter=new l.default(c,d,g,h),i.blurYFilter=new n.default(c,d,g,h),i.padding=0,i.resolution=g||j.settings.RESOLUTION,i.quality=d||4,i.blur=c||8,i}return g(b,a),b.prototype.apply=function(a,b,c){var d=a.getRenderTarget(!0);this.blurXFilter.apply(a,b,d,!0),this.blurYFilter.apply(a,d,c,!1),a.returnRenderTarget(d)},h(b,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=this.blurYFilter.blur=a,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(a){this.blurXFilter.quality=this.blurYFilter.quality=a}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=a,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(a){this.blurYFilter.blur=a,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}}]),b}(j.Filter);c.default=o},{"../../core":83,"./BlurXFilter":161,"./BlurYFilter":162}],161:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../../core"),j=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(i),k=a("./generateBlurVertSource"),l=d(k),m=a("./generateBlurFragSource"),n=d(m),o=a("./getMaxBlurKernelSize"),p=d(o),q=function(a){function b(c,d,g,h){e(this,b),h=h||5;var i=(0,l.default)(h,!0),k=(0,n.default)(h),m=f(this,a.call(this,i,k));return m.resolution=g||j.settings.RESOLUTION,m._quality=0,m.quality=d||4,m.strength=c||8,m.firstRun=!0,m}return g(b,a),b.prototype.apply=function(a,b,c,d){if(this.firstRun){var e=a.renderer.gl,f=(0,p.default)(e);this.vertexSrc=(0,l.default)(f,!0),this.fragmentSrc=(0,n.default)(f),this.firstRun=!1}if(this.uniforms.strength=1/c.size.width*(c.size.width/b.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)a.applyFilter(this,b,c,d);else{for(var g=a.getRenderTarget(!0),h=b,i=g,j=0;j<this.passes-1;j++){a.applyFilter(this,h,i,!0);var k=i;i=h,h=k}a.applyFilter(this,h,c,d),a.returnRenderTarget(g)}},h(b,[{key:"blur",get:function(){return this.strength},set:function(a){this.padding=2*Math.abs(a),this.strength=a}},{key:"quality",get:function(){return this._quality},set:function(a){this._quality=a,this.passes=a}}]),b}(j.Filter);c.default=q},{"../../core":83,"./generateBlurFragSource":163,"./generateBlurVertSource":164,"./getMaxBlurKernelSize":165}],162:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../../core"),j=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(i),k=a("./generateBlurVertSource"),l=d(k),m=a("./generateBlurFragSource"),n=d(m),o=a("./getMaxBlurKernelSize"),p=d(o),q=function(a){function b(c,d,g,h){e(this,b),h=h||5;var i=(0,l.default)(h,!1),k=(0,n.default)(h),m=f(this,a.call(this,i,k));return m.resolution=g||j.settings.RESOLUTION,m._quality=0,m.quality=d||4,m.strength=c||8,m.firstRun=!0,m}return g(b,a),b.prototype.apply=function(a,b,c,d){if(this.firstRun){var e=a.renderer.gl,f=(0,p.default)(e);this.vertexSrc=(0,l.default)(f,!1),this.fragmentSrc=(0,n.default)(f),this.firstRun=!1}if(this.uniforms.strength=1/c.size.height*(c.size.height/b.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)a.applyFilter(this,b,c,d);else{for(var g=a.getRenderTarget(!0),h=b,i=g,j=0;j<this.passes-1;j++){a.applyFilter(this,h,i,!0);var k=i;i=h,h=k}a.applyFilter(this,h,c,d),a.returnRenderTarget(g)}},h(b,[{key:"blur",get:function(){return this.strength},set:function(a){this.padding=2*Math.abs(a),this.strength=a}},{key:"quality",get:function(){return this._quality},set:function(a){this._quality=a,this.passes=a}}]),b}(j.Filter);c.default=q},{"../../core":83,"./generateBlurFragSource":163,"./generateBlurVertSource":164,"./getMaxBlurKernelSize":165}],163:[function(a,b,c){"use strict";function d(a){for(var b=e[a],c=b.length,d=f,g="",h="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",i=void 0,j=0;j<a;j++){var k=h.replace("%index%",j);i=j,j>=c&&(i=a-j-1),k=k.replace("%value%",b[i]),g+=k,g+="\n"}return d=d.replace("%blur%",g),d=d.replace("%size%",a)}c.__esModule=!0,c.default=d;var e={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},f=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},{}],164:[function(a,b,c){"use strict";function d(a,b){var c=Math.ceil(a/2),d=e,f="",g=void 0;g=b?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var h=0;h<a;h++){var i=g.replace("%index%",h);i=i.replace("%sampleIndex%",h-(c-1)+".0"),f+=i,f+="\n"}return d=d.replace("%blur%",f),d=d.replace("%size%",a)}c.__esModule=!0,c.default=d;var e=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},{}],165:[function(a,b,c){"use strict";function d(a){for(var b=a.getParameter(a.MAX_VARYING_VECTORS),c=15;c>b;)c-=2;return c}c.__esModule=!0,c.default=d},{}],166:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("../../core"),i=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(h),j=(a("path"),function(a){function b(){d(this,b);var c=e(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return c.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],c.alpha=1,c}return f(b,a),b.prototype._loadMatrix=function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=a;b&&(this._multiply(c,this.uniforms.m,a),c=this._colorMatrix(c)),this.uniforms.m=c},b.prototype._multiply=function(a,b,c){return a[0]=b[0]*c[0]+b[1]*c[5]+b[2]*c[10]+b[3]*c[15],a[1]=b[0]*c[1]+b[1]*c[6]+b[2]*c[11]+b[3]*c[16],a[2]=b[0]*c[2]+b[1]*c[7]+b[2]*c[12]+b[3]*c[17],a[3]=b[0]*c[3]+b[1]*c[8]+b[2]*c[13]+b[3]*c[18],a[4]=b[0]*c[4]+b[1]*c[9]+b[2]*c[14]+b[3]*c[19]+b[4],a[5]=b[5]*c[0]+b[6]*c[5]+b[7]*c[10]+b[8]*c[15],a[6]=b[5]*c[1]+b[6]*c[6]+b[7]*c[11]+b[8]*c[16],a[7]=b[5]*c[2]+b[6]*c[7]+b[7]*c[12]+b[8]*c[17],a[8]=b[5]*c[3]+b[6]*c[8]+b[7]*c[13]+b[8]*c[18],a[9]=b[5]*c[4]+b[6]*c[9]+b[7]*c[14]+b[8]*c[19]+b[9],a[10]=b[10]*c[0]+b[11]*c[5]+b[12]*c[10]+b[13]*c[15],a[11]=b[10]*c[1]+b[11]*c[6]+b[12]*c[11]+b[13]*c[16],a[12]=b[10]*c[2]+b[11]*c[7]+b[12]*c[12]+b[13]*c[17],a[13]=b[10]*c[3]+b[11]*c[8]+b[12]*c[13]+b[13]*c[18],a[14]=b[10]*c[4]+b[11]*c[9]+b[12]*c[14]+b[13]*c[19]+b[14],a[15]=b[15]*c[0]+b[16]*c[5]+b[17]*c[10]+b[18]*c[15],a[16]=b[15]*c[1]+b[16]*c[6]+b[17]*c[11]+b[18]*c[16],a[17]=b[15]*c[2]+b[16]*c[7]+b[17]*c[12]+b[18]*c[17],a[18]=b[15]*c[3]+b[16]*c[8]+b[17]*c[13]+b[18]*c[18],a[19]=b[15]*c[4]+b[16]*c[9]+b[17]*c[14]+b[18]*c[19]+b[19],a},b.prototype._colorMatrix=function(a){var b=new Float32Array(a);return b[4]/=255,b[9]/=255,b[14]/=255,b[19]/=255,b},b.prototype.brightness=function(a,b){var c=[a,0,0,0,0,0,a,0,0,0,0,0,a,0,0,0,0,0,1,0];this._loadMatrix(c,b)},b.prototype.greyscale=function(a,b){var c=[a,a,a,0,0,a,a,a,0,0,a,a,a,0,0,0,0,0,1,0];this._loadMatrix(c,b)},b.prototype.blackAndWhite=function(a){var b=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.hue=function(a,b){a=(a||0)/180*Math.PI;var c=Math.cos(a),d=Math.sin(a),e=Math.sqrt,f=1/3,g=e(f),h=c+(1-c)*f,i=f*(1-c)-g*d,j=f*(1-c)+g*d,k=f*(1-c)+g*d,l=c+f*(1-c),m=f*(1-c)-g*d,n=f*(1-c)-g*d,o=f*(1-c)+g*d,p=c+f*(1-c),q=[h,i,j,0,0,k,l,m,0,0,n,o,p,0,0,0,0,0,1,0];this._loadMatrix(q,b)},b.prototype.contrast=function(a,b){var c=(a||0)+1,d=-128*(c-1),e=[c,0,0,0,d,0,c,0,0,d,0,0,c,0,d,0,0,0,1,0];this._loadMatrix(e,b)},b.prototype.saturate=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments[1],c=2*a/3+1,d=-.5*(c-1),e=[c,d,d,0,0,d,c,d,0,0,d,d,c,0,0,0,0,0,1,0];this._loadMatrix(e,b)},b.prototype.desaturate=function(){this.saturate(-1)},b.prototype.negative=function(a){var b=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.sepia=function(a){var b=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.technicolor=function(a){var b=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.polaroid=function(a){var b=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.toBGR=function(a){var b=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.kodachrome=function(a){var b=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.browni=function(a){var b=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.vintage=function(a){var b=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.colorTone=function(a,b,c,d,e){a=a||.2,b=b||.15,c=c||16770432,d=d||3375104;var f=(c>>16&255)/255,g=(c>>8&255)/255,h=(255&c)/255,i=(d>>16&255)/255,j=(d>>8&255)/255,k=(255&d)/255,l=[.3,.59,.11,0,0,f,g,h,a,0,i,j,k,b,0,f-i,g-j,h-k,0,0];this._loadMatrix(l,e)},b.prototype.night=function(a,b){a=a||.1;var c=[-2*a,-a,0,0,0,-a,0,a,0,0,0,a,2*a,0,0,0,0,0,1,0];this._loadMatrix(c,b)},b.prototype.predator=function(a,b){var c=[11.224130630493164*a,-4.794486999511719*a,-2.8746118545532227*a,0*a,.40342438220977783*a,-3.6330697536468506*a,9.193157196044922*a,-2.951810836791992*a,0*a,-1.316135048866272*a,-3.2184197902679443*a,-4.2375030517578125*a,7.476448059082031*a,0*a,.8044459223747253*a,0,0,0,1,0];this._loadMatrix(c,b)},b.prototype.lsd=function(a){var b=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.reset=function(){var a=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(a,!1)},g(b,[{key:"matrix",get:function(){return this.uniforms.m},set:function(a){this.uniforms.m=a}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(a){this.uniforms.uAlpha=a}}]),b}(i.Filter));c.default=j,j.prototype.grayscale=j.prototype.greyscale},{"../../core":83,path:40}],167:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("../../core"),i=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(h),j=(a("path"),function(a){function b(c,f){d(this,b);var g=new i.Matrix;c.renderable=!1
;var h=e(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return h.maskSprite=c,h.maskMatrix=g,h.uniforms.mapSampler=c._texture,h.uniforms.filterMatrix=g,h.uniforms.scale={x:1,y:1},null!==f&&void 0!==f||(f=20),h.scale=new i.Point(f,f),h}return f(b,a),b.prototype.apply=function(a,b,c){var d=1/c.destinationFrame.width*(c.size.width/b.size.width);this.uniforms.filterMatrix=a.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*d,this.uniforms.scale.y=this.scale.y*d,a.applyFilter(this,b,c)},g(b,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(a){this.uniforms.mapSampler=a}}]),b}(i.Filter));c.default=j},{"../../core":83,path:40}],168:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("../../core"),h=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(g),i=(a("path"),function(a){function b(){return d(this,b),e(this,a.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return f(b,a),b}(h.Filter));c.default=i},{"../../core":83,path:40}],169:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=a("./fxaa/FXAAFilter");Object.defineProperty(c,"FXAAFilter",{enumerable:!0,get:function(){return d(e).default}});var f=a("./noise/NoiseFilter");Object.defineProperty(c,"NoiseFilter",{enumerable:!0,get:function(){return d(f).default}});var g=a("./displacement/DisplacementFilter");Object.defineProperty(c,"DisplacementFilter",{enumerable:!0,get:function(){return d(g).default}});var h=a("./blur/BlurFilter");Object.defineProperty(c,"BlurFilter",{enumerable:!0,get:function(){return d(h).default}});var i=a("./blur/BlurXFilter");Object.defineProperty(c,"BlurXFilter",{enumerable:!0,get:function(){return d(i).default}});var j=a("./blur/BlurYFilter");Object.defineProperty(c,"BlurYFilter",{enumerable:!0,get:function(){return d(j).default}});var k=a("./colormatrix/ColorMatrixFilter");Object.defineProperty(c,"ColorMatrixFilter",{enumerable:!0,get:function(){return d(k).default}});var l=a("./void/VoidFilter");Object.defineProperty(c,"VoidFilter",{enumerable:!0,get:function(){return d(l).default}})},{"./blur/BlurFilter":160,"./blur/BlurXFilter":161,"./blur/BlurYFilter":162,"./colormatrix/ColorMatrixFilter":166,"./displacement/DisplacementFilter":167,"./fxaa/FXAAFilter":168,"./noise/NoiseFilter":170,"./void/VoidFilter":171}],170:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("../../core"),i=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(h),j=(a("path"),function(a){function b(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();d(this,b);var g=e(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return g.noise=c,g.seed=f,g}return f(b,a),g(b,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(a){this.uniforms.uNoise=a}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(a){this.uniforms.uSeed=a}}]),b}(i.Filter));c.default=j},{"../../core":83,path:40}],171:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("../../core"),h=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(g),i=(a("path"),function(a){function b(){d(this,b);var c=e(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"));return c.glShaderKey="void",c}return f(b,a),b}(h.Filter));c.default=i},{"../../core":83,path:40}],172:[function(a,b,c){(function(b){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}c.__esModule=!0,c.loader=c.prepare=c.particles=c.mesh=c.loaders=c.interaction=c.filters=c.extras=c.extract=c.accessibility=void 0;var e=a("./polyfill");Object.keys(e).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(c,a,{enumerable:!0,get:function(){return e[a]}})});var f=a("./core");Object.keys(f).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(c,a,{enumerable:!0,get:function(){return f[a]}})});var g=a("./deprecation"),h=function(a){return a&&a.__esModule?a:{default:a}}(g),i=a("./accessibility"),j=d(i),k=a("./extract"),l=d(k),m=a("./extras"),n=d(m),o=a("./filters"),p=d(o),q=a("./interaction"),r=d(q),s=a("./loaders"),t=d(s),u=a("./mesh"),v=d(u),w=a("./particles"),x=d(w),y=a("./prepare"),z=d(y);f.utils.mixins.performMixins();var A=t.shared||null;c.accessibility=j,c.extract=l,c.extras=n,c.filters=p,c.interaction=r,c.loaders=t,c.mesh=v,c.particles=x,c.prepare=z,c.loader=A,"function"==typeof h.default&&(0,h.default)(c),b.PIXI=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":60,"./core":83,"./deprecation":147,"./extract":149,"./extras":158,"./filters":169,"./interaction":177,"./loaders":180,"./mesh":189,"./particles":192,"./polyfill":198,"./prepare":202}],173:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("../core"),f=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(e),g=function(){function a(){d(this,a),this.global=new f.Point,this.target=null,this.originalEvent=null,this.identifier=null}return a.prototype.getLocalPosition=function(a,b,c){return a.worldTransform.applyInverse(c||this.global,b)},a}();c.default=g},{"../core":83}],174:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(){d(this,a),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return a.prototype.stopPropagation=function(){this.stopped=!0},a.prototype._reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},a}();c.default=e},{}],175:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},i=a("../core"),j=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(i),k=a("./InteractionData"),l=d(k),m=a("./InteractionEvent"),n=d(m),o=a("./InteractionTrackingData"),p=d(o),q=a("eventemitter3"),r=d(q),s=a("./interactiveTarget"),t=d(s);j.utils.mixins.delayMixin(j.DisplayObject.prototype,t.default);var u="MOUSE",v={target:null,data:{global:null}},w=function(a){function b(c,d){e(this,b);var g=f(this,a.call(this));return d=d||{},g.renderer=c,g.autoPreventDefault=void 0===d.autoPreventDefault||d.autoPreventDefault,g.interactionFrequency=d.interactionFrequency||10,g.mouse=new l.default,g.mouse.identifier=u,g.mouse.global.set(-999999),g.activeInteractionData={},g.activeInteractionData[u]=g.mouse,g.interactionDataPool=[],g.eventData=new n.default,g.interactionDOMElement=null,g.moveWhenInside=!1,g.eventsAdded=!1,g.mouseOverRenderer=!1,g.supportsTouchEvents="ontouchstart"in window,g.supportsPointerEvents=!!window.PointerEvent,g.onPointerUp=g.onPointerUp.bind(g),g.processPointerUp=g.processPointerUp.bind(g),g.onPointerCancel=g.onPointerCancel.bind(g),g.processPointerCancel=g.processPointerCancel.bind(g),g.onPointerDown=g.onPointerDown.bind(g),g.processPointerDown=g.processPointerDown.bind(g),g.onPointerMove=g.onPointerMove.bind(g),g.processPointerMove=g.processPointerMove.bind(g),g.onPointerOut=g.onPointerOut.bind(g),g.processPointerOverOut=g.processPointerOverOut.bind(g),g.onPointerOver=g.onPointerOver.bind(g),g.cursorStyles={default:"inherit",pointer:"pointer"},g.currentCursorMode=null,g.cursor=null,g._tempPoint=new j.Point,g.resolution=1,g.setTargetElement(g.renderer.view,g.renderer.resolution),g}return g(b,a),b.prototype.hitTest=function(a,b){return v.target=null,v.data.global=a,b||(b=this.renderer._lastObjectRendered),this.processInteractive(v,b,null,!0),v.target},b.prototype.setTargetElement=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=a,this.resolution=b,this.addEvents()},b.prototype.addEvents=function(){this.interactionDOMElement&&(j.ticker.shared.add(this.update,this,j.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0))),this.eventsAdded=!0)},b.prototype.removeEvents=function(){this.interactionDOMElement&&(j.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.interactionDOMElement=null,this.eventsAdded=!1)},b.prototype.update=function(a){if(this._deltaTime+=a,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor=null;for(var b in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(b)){var c=this.activeInteractionData[b];if(c.originalEvent&&"touch"!==c.pointerType){var d=this.configureInteractionEventForDOMEvent(this.eventData,c.originalEvent,c);this.processInteractive(d,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},b.prototype.setCursorMode=function(a){if(a=a||"default",this.currentCursorMode!==a){this.currentCursorMode=a;var b=this.cursorStyles[a];if(b)switch(void 0===b?"undefined":h(b)){case"string":this.interactionDOMElement.style.cursor=b;break;case"function":b(a);break;case"object":Object.assign(this.interactionDOMElement.style,b)}}},b.prototype.dispatchEvent=function(a,b,c){c.stopped||(c.currentTarget=a,c.type=b,a.emit(b,c),a[b]&&a[b](c))},b.prototype.mapPositionToPoint=function(a,b,c){var d=void 0;d=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var e=navigator.isCocoonJS?this.resolution:1/this.resolution;a.x=(b-d.left)*(this.interactionDOMElement.width/d.width)*e,a.y=(c-d.top)*(this.interactionDOMElement.height/d.height)*e},b.prototype.processInteractive=function(a,b,c,d,e){if(!b||!b.visible)return!1;var f=a.data.global;e=b.interactive||e;var g=!1,h=e;if(b.hitArea?h=!1:d&&b._mask&&(b._mask.containsPoint(f)||(d=!1)),b.interactiveChildren&&b.children)for(var i=b.children,j=i.length-1;j>=0;j--){var k=i[j],l=this.processInteractive(a,k,c,d,h);if(l){if(!k.parent)continue;h=!1,l&&(a.target&&(d=!1),g=!0)}}return e&&(d&&!a.target&&(b.hitArea?(b.worldTransform.applyInverse(f,this._tempPoint),b.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(g=!0)):b.containsPoint&&b.containsPoint(f)&&(g=!0)),b.interactive&&(g&&!a.target&&(a.target=b),c&&c(a,b,!!g))),g},b.prototype.onPointerDown=function(a){var b=this.normalizeToPointerData(a);this.autoPreventDefault&&b[0].isNormalized&&a.preventDefault();for(var c=b.length,d=0;d<c;d++){var e=b[d],f=this.getInteractionDataForPointerId(e),g=this.configureInteractionEventForDOMEvent(this.eventData,e,f);if(g.data.originalEvent=a,this.processInteractive(g,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",g),"touch"===e.pointerType)this.emit("touchstart",g);else if("mouse"===e.pointerType){var h=2===e.button||3===e.which;this.emit(h?"rightdown":"mousedown",this.eventData)}}},b.prototype.processPointerDown=function(a,b,c){var d=a.data.originalEvent,e=a.data.identifier;if(c)if(b.trackedPointers[e]||(b.trackedPointers[e]=new p.default(e)),this.dispatchEvent(b,"pointerdown",a),"touchstart"===d.type||"touch"===d.pointerType)this.dispatchEvent(b,"touchstart",a);else if("mousedown"===d.type||"mouse"===d.pointerType){var f=2===d.button||3===d.which;f?b.trackedPointers[e].rightDown=!0:b.trackedPointers[e].leftDown=!0,this.dispatchEvent(b,f?"rightdown":"mousedown",a)}},b.prototype.onPointerComplete=function(a,b,c){for(var d=this.normalizeToPointerData(a),e=d.length,f=a.target!==this.interactionDOMElement?"outside":"",g=0;g<e;g++){var h=d[g],i=this.getInteractionDataForPointerId(h),j=this.configureInteractionEventForDOMEvent(this.eventData,h,i);if(j.data.originalEvent=a,this.processInteractive(j,this.renderer._lastObjectRendered,c,b||!f),this.emit(b?"pointercancel":"pointerup"+f,j),"mouse"===h.pointerType){var k=2===h.button||3===h.which;this.emit(k?"rightup"+f:"mouseup"+f,j)}else"touch"===h.pointerType&&(this.emit(b?"touchcancel":"touchend"+f,j),this.releaseInteractionDataForPointerId(h.pointerId,i))}},b.prototype.onPointerCancel=function(a){this.onPointerComplete(a,!0,this.processPointerCancel)},b.prototype.processPointerCancel=function(a,b){var c=a.data.originalEvent,d=a.data.identifier;void 0!==b.trackedPointers[d]&&(delete b.trackedPointers[d],this.dispatchEvent(b,"pointercancel",a),"touchcancel"!==c.type&&"touch"!==c.pointerType||this.dispatchEvent(b,"touchcancel",a))},b.prototype.onPointerUp=function(a){this.onPointerComplete(a,!1,this.processPointerUp)},b.prototype.processPointerUp=function(a,b,c){var d=a.data.originalEvent,e=a.data.identifier,f=b.trackedPointers[e],g="touchend"===d.type||"touch"===d.pointerType;if(0===d.type.indexOf("mouse")||"mouse"===d.pointerType){var h=2===d.button||3===d.which,i=p.default.FLAGS,j=h?i.RIGHT_DOWN:i.LEFT_DOWN,k=void 0!==f&&f.flags&j;c?(this.dispatchEvent(b,h?"rightup":"mouseup",a),k&&this.dispatchEvent(b,h?"rightclick":"click",a)):k&&this.dispatchEvent(b,h?"rightupoutside":"mouseupoutside",a),f&&(h?f.rightDown=!1:f.leftDown=!1)}c?(this.dispatchEvent(b,"pointerup",a),g&&this.dispatchEvent(b,"touchend",a),f&&(this.dispatchEvent(b,"pointertap",a),g&&(this.dispatchEvent(b,"tap",a),f.over=!1))):f&&(this.dispatchEvent(b,"pointerupoutside",a),g&&this.dispatchEvent(b,"touchendoutside",a)),f&&f.none&&delete b.trackedPointers[e]},b.prototype.onPointerMove=function(a){var b=this.normalizeToPointerData(a);"mouse"===b[0].pointerType&&(this.didMove=!0,this.cursor=null);for(var c=b.length,d=0;d<c;d++){var e=b[d],f=this.getInteractionDataForPointerId(e),g=this.configureInteractionEventForDOMEvent(this.eventData,e,f);g.data.originalEvent=a;var h="touch"!==e.pointerType||this.moveWhenInside;this.processInteractive(g,this.renderer._lastObjectRendered,this.processPointerMove,h),this.emit("pointermove",g),"touch"===e.pointerType&&this.emit("touchmove",g),"mouse"===e.pointerType&&this.emit("mousemove",g)}"mouse"===b[0].pointerType&&this.setCursorMode(this.cursor)},b.prototype.processPointerMove=function(a,b,c){var d=a.data.originalEvent,e="touchmove"===d.type||"touch"===d.pointerType,f="mousemove"===d.type||"mouse"===d.pointerType;f&&this.processPointerOverOut(a,b,c),this.moveWhenInside&&!c||(this.dispatchEvent(b,"pointermove",a),e&&this.dispatchEvent(b,"touchmove",a),f&&this.dispatchEvent(b,"mousemove",a))},b.prototype.onPointerOut=function(a){var b=this.normalizeToPointerData(a),c=b[0];"mouse"===c.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var d=this.getInteractionDataForPointerId(c),e=this.configureInteractionEventForDOMEvent(this.eventData,c,d);e.data.originalEvent=c,this.processInteractive(e,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",e),"mouse"===c.pointerType?this.emit("mouseout",e):this.releaseInteractionDataForPointerId(d.identifier)},b.prototype.processPointerOverOut=function(a,b,c){var d=a.data.originalEvent,e=a.data.identifier,f="mouseover"===d.type||"mouseout"===d.type||"mouse"===d.pointerType,g=b.trackedPointers[e];c&&!g&&(g=b.trackedPointers[e]=new p.default(e)),void 0!==g&&(c&&this.mouseOverRenderer?(g.over||(g.over=!0,this.dispatchEvent(b,"pointerover",a),f&&this.dispatchEvent(b,"mouseover",a)),f&&null===this.cursor&&(this.cursor=b.cursor)):g.over&&(g.over=!1,this.dispatchEvent(b,"pointerout",this.eventData),f&&this.dispatchEvent(b,"mouseout",a),g.none&&delete b.trackedPointers[e]))},b.prototype.onPointerOver=function(a){var b=this.normalizeToPointerData(a),c=b[0],d=this.getInteractionDataForPointerId(c),e=this.configureInteractionEventForDOMEvent(this.eventData,c,d);e.data.originalEvent=c,"mouse"===c.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",e),"mouse"===c.pointerType&&this.emit("mouseover",e)},b.prototype.getInteractionDataForPointerId=function(a){var b=a.pointerId;if(b===u||"mouse"===a.pointerType)return this.mouse;if(this.activeInteractionData[b])return this.activeInteractionData[b];var c=this.interactionDataPool.pop()||new l.default;return c.identifier=b,this.activeInteractionData[b]=c,c},b.prototype.releaseInteractionDataForPointerId=function(a){var b=this.activeInteractionData[a];b&&(delete this.activeInteractionData[a],this.interactionDataPool.push(b))},b.prototype.configureInteractionEventForDOMEvent=function(a,b,c){return a.data=c,this.mapPositionToPoint(c.global,b.clientX,b.clientY),navigator.isCocoonJS&&"touch"===b.pointerType&&(c.global.x=c.global.x/this.resolution,c.global.y=c.global.y/this.resolution),"touch"===b.pointerType&&(b.globalX=c.global.x,b.globalY=c.global.y),c.originalEvent=b,a._reset(),a},b.prototype.normalizeToPointerData=function(a){var b=[];if(this.supportsTouchEvents&&a instanceof TouchEvent)for(var c=0,d=a.changedTouches.length;c<d;c++){var e=a.changedTouches[c];void 0===e.button&&(e.button=a.touches.length?1:0),void 0===e.buttons&&(e.buttons=a.touches.length?1:0),void 0===e.isPrimary&&(e.isPrimary=1===a.touches.length),void 0===e.width&&(e.width=e.radiusX||1),void 0===e.height&&(e.height=e.radiusY||1),void 0===e.tiltX&&(e.tiltX=0),void 0===e.tiltY&&(e.tiltY=0),void 0===e.pointerType&&(e.pointerType="touch"),void 0===e.pointerId&&(e.pointerId=e.identifier||0),void 0===e.pressure&&(e.pressure=e.force||.5),void 0===e.rotation&&(e.rotation=e.rotationAngle||0),void 0===e.layerX&&(e.layerX=e.offsetX=e.clientX),void 0===e.layerY&&(e.layerY=e.offsetY=e.clientY),e.isNormalized=!0,b.push(e)}else!(a instanceof MouseEvent)||this.supportsPointerEvents&&a instanceof window.PointerEvent?b.push(a):(void 0===a.isPrimary&&(a.isPrimary=!0),void 0===a.width&&(a.width=1),void 0===a.height&&(a.height=1),void 0===a.tiltX&&(a.tiltX=0),void 0===a.tiltY&&(a.tiltY=0),void 0===a.pointerType&&(a.pointerType="mouse"),void 0===a.pointerId&&(a.pointerId=u),void 0===a.pressure&&(a.pressure=.5),void 0===a.rotation&&(a.rotation=0),a.isNormalized=!0,b.push(a));return b},b.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,
this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},b}(r.default);c.default=w,j.WebGLRenderer.registerPlugin("interaction",w),j.CanvasRenderer.registerPlugin("interaction",w)},{"../core":83,"./InteractionData":173,"./InteractionEvent":174,"./InteractionTrackingData":176,"./interactiveTarget":178,eventemitter3:27}],176:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){d(this,a),this._pointerId=b,this._flags=a.FLAGS.NONE}return a.prototype._doSet=function(a,b){this._flags=b?this._flags|a:this._flags&~a},e(a,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(a){this._flags=a}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(a){this._doSet(this.constructor.FLAGS.OVER,a)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(a){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,a)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(a){this._doSet(this.constructor.FLAGS.LEFT_DOWN,a)}}]),a}();c.default=f,f.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],177:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=a("./InteractionData");Object.defineProperty(c,"InteractionData",{enumerable:!0,get:function(){return d(e).default}});var f=a("./InteractionManager");Object.defineProperty(c,"InteractionManager",{enumerable:!0,get:function(){return d(f).default}});var g=a("./interactiveTarget");Object.defineProperty(c,"interactiveTarget",{enumerable:!0,get:function(){return d(g).default}})},{"./InteractionData":173,"./InteractionManager":175,"./interactiveTarget":178}],178:[function(a,b,c){"use strict";c.__esModule=!0,c.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(a){a?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},{}],179:[function(a,b,c){"use strict";function d(a,b){a.bitmapFont=i.BitmapText.registerFont(a.data,b)}c.__esModule=!0,c.parse=d,c.default=function(){return function(a,b){if(!a.data||a.type!==h.Resource.TYPE.XML)return void b();if(0===a.data.getElementsByTagName("page").length||0===a.data.getElementsByTagName("info").length||null===a.data.getElementsByTagName("info")[0].getAttribute("face"))return void b();var c=a.isDataUrl?"":f.dirname(a.url);a.isDataUrl&&("."===c&&(c=""),this.baseUrl&&c&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(c+="/"),c=c.replace(this.baseUrl,""))),c&&"/"!==c.charAt(c.length-1)&&(c+="/");var e=c+a.data.getElementsByTagName("page")[0].getAttribute("file");if(g.utils.TextureCache[e])d(a,g.utils.TextureCache[e]),b();else{var i={crossOrigin:a.crossOrigin,loadType:h.Resource.LOAD_TYPE.IMAGE,metadata:a.metadata.imageMetadata,parentResource:a};this.add(a.name+"_image",e,i,function(c){d(a,c.texture),b()})}}};var e=a("path"),f=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(e),g=a("../core"),h=a("resource-loader"),i=a("../extras")},{"../core":83,"../extras":158,path:40,"resource-loader":215}],180:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0,c.shared=c.Resource=c.textureParser=c.getResourcePath=c.spritesheetParser=c.parseBitmapFontData=c.bitmapFontParser=c.Loader=void 0;var e=a("./bitmapFontParser");Object.defineProperty(c,"bitmapFontParser",{enumerable:!0,get:function(){return d(e).default}}),Object.defineProperty(c,"parseBitmapFontData",{enumerable:!0,get:function(){return e.parse}});var f=a("./spritesheetParser");Object.defineProperty(c,"spritesheetParser",{enumerable:!0,get:function(){return d(f).default}}),Object.defineProperty(c,"getResourcePath",{enumerable:!0,get:function(){return f.getResourcePath}});var g=a("./textureParser");Object.defineProperty(c,"textureParser",{enumerable:!0,get:function(){return d(g).default}});var h=a("resource-loader");Object.defineProperty(c,"Resource",{enumerable:!0,get:function(){return h.Resource}});var i=a("../core/Application"),j=d(i),k=a("./loader"),l=d(k);c.Loader=l.default;var m=new l.default;m.destroy=function(){},c.shared=m;var n=j.default.prototype;n._loader=null,Object.defineProperty(n,"loader",{get:function(){if(!this._loader){var a=this._options.sharedLoader;this._loader=a?m:new l.default}return this._loader}}),n._parentDestroy=n.destroy,n.destroy=function(){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy()}},{"../core/Application":61,"./bitmapFontParser":179,"./loader":181,"./spritesheetParser":182,"./textureParser":183,"resource-loader":215}],181:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("resource-loader"),i=d(h),j=a("resource-loader/lib/middlewares/parsing/blob"),k=a("eventemitter3"),l=d(k),m=a("./textureParser"),n=d(m),o=a("./spritesheetParser"),p=d(o),q=a("./bitmapFontParser"),r=d(q),s=function(a){function b(c,d){e(this,b);var g=f(this,a.call(this,c,d));l.default.call(g);for(var h=0;h<b._pixiMiddleware.length;++h)g.use(b._pixiMiddleware[h]());return g.onStart.add(function(a){return g.emit("start",a)}),g.onProgress.add(function(a,b){return g.emit("progress",a,b)}),g.onError.add(function(a,b,c){return g.emit("error",a,b,c)}),g.onLoad.add(function(a,b){return g.emit("load",a,b)}),g.onComplete.add(function(a,b){return g.emit("complete",a,b)}),g}return g(b,a),b.addPixiMiddleware=function(a){b._pixiMiddleware.push(a)},b.prototype.destroy=function(){this.removeAllListeners(),this.reset()},b}(i.default);c.default=s;for(var t in l.default.prototype)s.prototype[t]=l.default.prototype[t];s._pixiMiddleware=[j.blobMiddlewareFactory,n.default,p.default,r.default];var u=i.default.Resource;u.setExtensionXhrType("fnt",u.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":179,"./spritesheetParser":182,"./textureParser":183,eventemitter3:27,"resource-loader":215,"resource-loader/lib/middlewares/parsing/blob":216}],182:[function(a,b,c){"use strict";function d(a,b){return a.isDataUrl?a.data.meta.image:g.default.resolve(a.url.replace(b,""),a.data.meta.image)}c.__esModule=!0,c.default=function(){return function(a,b){var c=a.name+"_image";if(!a.data||a.type!==e.Resource.TYPE.JSON||!a.data.frames||this.resources[c])return void b();var f={crossOrigin:a.crossOrigin,loadType:e.Resource.LOAD_TYPE.IMAGE,metadata:a.metadata.imageMetadata,parentResource:a},g=d(a,this.baseUrl);this.add(c,g,f,function(c){var d=new h.Spritesheet(c.texture.baseTexture,a.data,a.url);d.parse(function(){a.spritesheet=d,a.textures=d.textures,b()})})}},c.getResourcePath=d;var e=a("resource-loader"),f=a("url"),g=function(a){return a&&a.__esModule?a:{default:a}}(f),h=a("../core")},{"../core":83,"resource-loader":215,url:234}],183:[function(a,b,c){"use strict";c.__esModule=!0,c.default=function(){return function(a,b){a.data&&a.type===d.Resource.TYPE.IMAGE&&(a.texture=f.default.fromLoader(a.data,a.url,a.name)),b()}};var d=a("resource-loader"),e=a("../core/textures/Texture"),f=function(a){return a&&a.__esModule?a:{default:a}}(e)},{"../core/textures/Texture":133,"resource-loader":215}],184:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("../core"),i=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(h),j=a("../extras/TextureTransform"),k=function(a){return a&&a.__esModule?a:{default:a}}(j),l=new i.Point,m=new i.Polygon,n=function(a){function b(c,f,g,h,j){d(this,b);var l=e(this,a.call(this));return l._texture=c,l.uvs=g||new Float32Array([0,0,1,0,1,1,0,1]),l.vertices=f||new Float32Array([0,0,100,0,100,100,0,100]),l.indices=h||new Uint16Array([0,1,3,2]),l.dirty=0,l.indexDirty=0,l.blendMode=i.BLEND_MODES.NORMAL,l.canvasPadding=0,l.drawMode=j||b.DRAW_MODES.TRIANGLE_MESH,l.shader=null,l.tintRgb=new Float32Array([1,1,1]),l._glDatas={},l._uvTransform=new k.default(c),l.uploadUvTransform=!1,l.pluginName="mesh",l}return f(b,a),b.prototype._renderWebGL=function(a){this.refresh(),a.setObjectRenderer(a.plugins[this.pluginName]),a.plugins[this.pluginName].render(this)},b.prototype._renderCanvas=function(a){this.refresh(),a.plugins[this.pluginName].render(this)},b.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},b.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},b.prototype.refresh=function(a){this._uvTransform.update(a)&&this._refresh()},b.prototype._refresh=function(){},b.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},b.prototype.containsPoint=function(a){if(!this.getBounds().contains(a.x,a.y))return!1;this.worldTransform.applyInverse(a,l);for(var c=this.vertices,d=m.points,e=this.indices,f=this.indices.length,g=this.drawMode===b.DRAW_MODES.TRIANGLES?3:1,h=0;h+2<f;h+=g){var i=2*e[h],j=2*e[h+1],k=2*e[h+2];if(d[0]=c[i],d[1]=c[i+1],d[2]=c[j],d[3]=c[j+1],d[4]=c[k],d[5]=c[k+1],m.contains(l.x,l.y))return!0}return!1},g(b,[{key:"texture",get:function(){return this._texture},set:function(a){this._texture!==a&&(this._texture=a,a&&(a.baseTexture.hasLoaded?this._onTextureUpdate():a.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return i.utils.rgb2hex(this.tintRgb)},set:function(a){this.tintRgb=i.utils.hex2rgb(a,this.tintRgb)}}]),b}(i.Container);c.default=n,n.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":83,"../extras/TextureTransform":153}],185:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("./Plane"),i=function(a){return a&&a.__esModule?a:{default:a}}(h),j=10,k=function(a){function b(c,f,g,h,i){d(this,b);var k=e(this,a.call(this,c,4,4)),l=k.uvs;return l[6]=l[14]=l[22]=l[30]=1,l[25]=l[27]=l[29]=l[31]=1,k._origWidth=c.orig.width,k._origHeight=c.orig.height,k._uvw=1/k._origWidth,k._uvh=1/k._origHeight,k.width=k._origWidth,k.height=k._origHeight,l[2]=l[10]=l[18]=l[26]=k._uvw*f,l[4]=l[12]=l[20]=l[28]=1-k._uvw*h,l[9]=l[11]=l[13]=l[15]=k._uvh*g,l[17]=l[19]=l[21]=l[23]=1-k._uvh*i,k.leftWidth=void 0!==f?f:j,k.rightWidth=void 0!==h?h:j,k.topHeight=void 0!==g?g:j,k.bottomHeight=void 0!==i?i:j,k.refresh(!0),k}return f(b,a),b.prototype.updateHorizontalVertices=function(){var a=this.vertices;a[9]=a[11]=a[13]=a[15]=this._topHeight,a[17]=a[19]=a[21]=a[23]=this._height-this._bottomHeight,a[25]=a[27]=a[29]=a[31]=this._height},b.prototype.updateVerticalVertices=function(){var a=this.vertices;a[2]=a[10]=a[18]=a[26]=this._leftWidth,a[4]=a[12]=a[20]=a[28]=this._width-this._rightWidth,a[6]=a[14]=a[22]=a[30]=this._width},b.prototype._renderCanvas=function(a){var b=a.context;b.globalAlpha=this.worldAlpha;var c=this.worldTransform,d=a.resolution;a.roundPixels?b.setTransform(c.a*d,c.b*d,c.c*d,c.d*d,c.tx*d|0,c.ty*d|0):b.setTransform(c.a*d,c.b*d,c.c*d,c.d*d,c.tx*d,c.ty*d);var e=this._texture.baseTexture,f=e.source,g=e.width,h=e.height;this.drawSegment(b,f,g,h,0,1,10,11),this.drawSegment(b,f,g,h,2,3,12,13),this.drawSegment(b,f,g,h,4,5,14,15),this.drawSegment(b,f,g,h,8,9,18,19),this.drawSegment(b,f,g,h,10,11,20,21),this.drawSegment(b,f,g,h,12,13,22,23),this.drawSegment(b,f,g,h,16,17,26,27),this.drawSegment(b,f,g,h,18,19,28,29),this.drawSegment(b,f,g,h,20,21,30,31)},b.prototype.drawSegment=function(a,b,c,d,e,f,g,h){var i=this.uvs,j=this.vertices,k=(i[g]-i[e])*c,l=(i[h]-i[f])*d,m=j[g]-j[e],n=j[h]-j[f];k<1&&(k=1),l<1&&(l=1),m<1&&(m=1),n<1&&(n=1),a.drawImage(b,i[e]*c,i[f]*d,k,l,j[e],j[f],m,n)},g(b,[{key:"width",get:function(){return this._width},set:function(a){this._width=a,this.updateVerticalVertices()}},{key:"height",get:function(){return this._height},set:function(a){this._height=a,this.updateHorizontalVertices()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(a){this._leftWidth=a;var b=this.uvs,c=this.vertices;b[2]=b[10]=b[18]=b[26]=this._uvw*a,c[2]=c[10]=c[18]=c[26]=a,this.dirty=!0}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(a){this._rightWidth=a;var b=this.uvs,c=this.vertices;b[4]=b[12]=b[20]=b[28]=1-this._uvw*a,c[4]=c[12]=c[20]=c[28]=this._width-a,this.dirty=!0}},{key:"topHeight",get:function(){return this._topHeight},set:function(a){this._topHeight=a;var b=this.uvs,c=this.vertices;b[9]=b[11]=b[13]=b[15]=this._uvh*a,c[9]=c[11]=c[13]=c[15]=a,this.dirty=!0}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(a){this._bottomHeight=a;var b=this.uvs,c=this.vertices;b[17]=b[19]=b[21]=b[23]=1-this._uvh*a,c[17]=c[19]=c[21]=c[23]=this._height-a,this.dirty=!0}}]),b}(i.default);c.default=k},{"./Plane":186}],186:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("./Mesh"),h=function(a){return a&&a.__esModule?a:{default:a}}(g),i=function(a){function b(c,f,g){d(this,b);var i=e(this,a.call(this,c));return i._ready=!0,i.verticesX=f||10,i.verticesY=g||10,i.drawMode=h.default.DRAW_MODES.TRIANGLES,i.refresh(),i}return f(b,a),b.prototype._refresh=function(){for(var a=this._texture,b=this.verticesX*this.verticesY,c=[],d=[],e=[],f=[],g=this.verticesX-1,h=this.verticesY-1,i=a.width/g,j=a.height/h,k=0;k<b;k++){var l=k%this.verticesX,m=k/this.verticesX|0;c.push(l*i,m*j),e.push(l/g,m/h)}for(var n=g*h,o=0;o<n;o++){var p=o%g,q=o/g|0,r=q*this.verticesX+p,s=q*this.verticesX+p+1,t=(q+1)*this.verticesX+p,u=(q+1)*this.verticesX+p+1;f.push(r,s,t),f.push(s,u,t)}this.vertices=new Float32Array(c),this.uvs=new Float32Array(e),this.colors=new Float32Array(d),this.indices=new Uint16Array(f),this.indexDirty=!0,this.multiplyUvs()},b.prototype._onTextureUpdate=function(){h.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},b}(h.default);c.default=i},{"./Mesh":184}],187:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("./Mesh"),h=function(a){return a&&a.__esModule?a:{default:a}}(g),i=function(a){function b(c,f){d(this,b);var g=e(this,a.call(this,c));return g.points=f,g.vertices=new Float32Array(4*f.length),g.uvs=new Float32Array(4*f.length),g.colors=new Float32Array(2*f.length),g.indices=new Uint16Array(2*f.length),g.autoUpdate=!0,g.refresh(),g}return f(b,a),b.prototype._refresh=function(){var a=this.points;if(!(a.length<1)&&this._texture._uvs){this.vertices.length/4!==a.length&&(this.vertices=new Float32Array(4*a.length),this.uvs=new Float32Array(4*a.length),this.colors=new Float32Array(2*a.length),this.indices=new Uint16Array(2*a.length));var b=this.uvs,c=this.indices,d=this.colors;b[0]=0,b[1]=0,b[2]=0,b[3]=1,d[0]=1,d[1]=1,c[0]=0,c[1]=1;for(var e=a.length,f=1;f<e;f++){var g=4*f,h=f/(e-1);b[g]=h,b[g+1]=0,b[g+2]=h,b[g+3]=1,g=2*f,d[g]=1,d[g+1]=1,g=2*f,c[g]=g,c[g+1]=g+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},b.prototype.refreshVertices=function(){var a=this.points;if(!(a.length<1))for(var b=a[0],c=void 0,d=0,e=0,f=this.vertices,g=a.length,h=0;h<g;h++){var i=a[h],j=4*h;c=h<a.length-1?a[h+1]:i,e=-(c.x-b.x),d=c.y-b.y;var k=10*(1-h/(g-1));k>1&&(k=1);var l=Math.sqrt(d*d+e*e),m=this._texture.height/2;d/=l,e/=l,d*=m,e*=m,f[j]=i.x+d,f[j+1]=i.y+e,f[j+2]=i.x-d,f[j+3]=i.y-e,b=i}},b.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},b}(h.default);c.default=i},{"./Mesh":184}],188:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("../../core"),f=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(e),g=a("../Mesh"),h=function(a){return a&&a.__esModule?a:{default:a}}(g),i=function(){function a(b){d(this,a),this.renderer=b}return a.prototype.render=function(a){var b=this.renderer,c=b.context,d=a.worldTransform,e=b.resolution;b.roundPixels?c.setTransform(d.a*e,d.b*e,d.c*e,d.d*e,d.tx*e|0,d.ty*e|0):c.setTransform(d.a*e,d.b*e,d.c*e,d.d*e,d.tx*e,d.ty*e),b.setBlendMode(a.blendMode),a.drawMode===h.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(a):this._renderTriangles(a)},a.prototype._renderTriangleMesh=function(a){for(var b=a.vertices.length/2,c=0;c<b-2;c++){var d=2*c;this._renderDrawTriangle(a,d,d+2,d+4)}},a.prototype._renderTriangles=function(a){for(var b=a.indices,c=b.length,d=0;d<c;d+=3){var e=2*b[d],f=2*b[d+1],g=2*b[d+2];this._renderDrawTriangle(a,e,f,g)}},a.prototype._renderDrawTriangle=function(a,b,c,d){var e=this.renderer.context,f=a.uvs,g=a.vertices,h=a._texture;if(h.valid){var i=h.baseTexture,j=i.source,k=i.width,l=i.height,m=void 0,n=void 0,o=void 0,p=void 0,q=void 0,r=void 0;if(a.uploadUvTransform){var s=a._uvTransform.mapCoord;m=(f[b]*s.a+f[b+1]*s.c+s.tx)*i.width,n=(f[c]*s.a+f[c+1]*s.c+s.tx)*i.width,o=(f[d]*s.a+f[d+1]*s.c+s.tx)*i.width,p=(f[b]*s.b+f[b+1]*s.d+s.ty)*i.height,q=(f[c]*s.b+f[c+1]*s.d+s.ty)*i.height,r=(f[d]*s.b+f[d+1]*s.d+s.ty)*i.height}else m=f[b]*i.width,n=f[c]*i.width,o=f[d]*i.width,p=f[b+1]*i.height,q=f[c+1]*i.height,r=f[d+1]*i.height;var t=g[b],u=g[c],v=g[d],w=g[b+1],x=g[c+1],y=g[d+1];if(a.canvasPadding>0){var z=a.canvasPadding/a.worldTransform.a,A=a.canvasPadding/a.worldTransform.d,B=(t+u+v)/3,C=(w+x+y)/3,D=t-B,E=w-C,F=Math.sqrt(D*D+E*E);t=B+D/F*(F+z),w=C+E/F*(F+A),D=u-B,E=x-C,F=Math.sqrt(D*D+E*E),u=B+D/F*(F+z),x=C+E/F*(F+A),D=v-B,E=y-C,F=Math.sqrt(D*D+E*E),v=B+D/F*(F+z),y=C+E/F*(F+A)}e.save(),e.beginPath(),e.moveTo(t,w),e.lineTo(u,x),e.lineTo(v,y),e.closePath(),e.clip();var G=m*q+p*o+n*r-q*o-p*n-m*r,H=t*q+p*v+u*r-q*v-p*u-t*r,I=m*u+t*o+n*v-u*o-t*n-m*v,J=m*q*v+p*u*o+t*n*r-t*q*o-p*n*v-m*u*r,K=w*q+p*y+x*r-q*y-p*x-w*r,L=m*x+w*o+n*y-x*o-w*n-m*y,M=m*q*y+p*x*o+w*n*r-w*q*o-p*n*y-m*x*r;e.transform(H/G,K/G,I/G,L/G,J/G,M/G),e.drawImage(j,0,0,k*i.resolution,l*i.resolution,0,0,k,l),e.restore()}},a.prototype.renderMeshFlat=function(a){var b=this.renderer.context,c=a.vertices,d=c.length/2;b.beginPath();for(var e=1;e<d-2;++e){var f=2*e,g=c[f],h=c[f+1],i=c[f+2],j=c[f+3],k=c[f+4],l=c[f+5];b.moveTo(g,h),b.lineTo(i,j),b.lineTo(k,l)}b.fillStyle="#FF0000",b.fill(),b.closePath()},a.prototype.destroy=function(){this.renderer=null},a}();c.default=i,f.CanvasRenderer.registerPlugin("mesh",i)},{"../../core":83,"../Mesh":184}],189:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=a("./Mesh");Object.defineProperty(c,"Mesh",{enumerable:!0,get:function(){return d(e).default}});var f=a("./webgl/MeshRenderer");Object.defineProperty(c,"MeshRenderer",{enumerable:!0,get:function(){return d(f).default}});var g=a("./canvas/CanvasMeshRenderer");Object.defineProperty(c,"CanvasMeshRenderer",{enumerable:!0,get:function(){return d(g).default}});var h=a("./Plane");Object.defineProperty(c,"Plane",{enumerable:!0,get:function(){return d(h).default}});var i=a("./NineSlicePlane");Object.defineProperty(c,"NineSlicePlane",{enumerable:!0,get:function(){return d(i).default}});var j=a("./Rope");Object.defineProperty(c,"Rope",{enumerable:!0,get:function(){return d(j).default}})},{"./Mesh":184,"./NineSlicePlane":185,"./Plane":186,"./Rope":187,"./canvas/CanvasMeshRenderer":188,"./webgl/MeshRenderer":190}],190:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../core"),i=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(h),j=a("pixi-gl-core"),k=d(j),l=a("../Mesh"),m=d(l),n=(a("path"),i.Matrix.IDENTITY),o=function(a){function b(c){e(this,b);var d=f(this,a.call(this,c));return d.shader=null,d}return g(b,a),b.prototype.onContextChange=function(){var a=this.renderer.gl;this.shader=new i.Shader(a,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform float alpha;\nuniform vec3 tint;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * vec4(tint * alpha, alpha);\n}\n")},b.prototype.render=function(a){var b=this.renderer,c=b.gl,d=a._texture;if(d.valid){var e=a._glDatas[b.CONTEXT_UID];e||(b.bindVao(null),e={shader:this.shader,vertexBuffer:k.default.GLBuffer.createVertexBuffer(c,a.vertices,c.STREAM_DRAW),uvBuffer:k.default.GLBuffer.createVertexBuffer(c,a.uvs,c.STREAM_DRAW),indexBuffer:k.default.GLBuffer.createIndexBuffer(c,a.indices,c.STATIC_DRAW),vao:null,dirty:a.dirty,indexDirty:a.indexDirty},e.vao=new k.default.VertexArrayObject(c).addIndex(e.indexBuffer).addAttribute(e.vertexBuffer,e.shader.attributes.aVertexPosition,c.FLOAT,!1,8,0).addAttribute(e.uvBuffer,e.shader.attributes.aTextureCoord,c.FLOAT,!1,8,0),a._glDatas[b.CONTEXT_UID]=e),b.bindVao(e.vao),a.dirty!==e.dirty&&(e.dirty=a.dirty,e.uvBuffer.upload(a.uvs)),a.indexDirty!==e.indexDirty&&(e.indexDirty=a.indexDirty,e.indexBuffer.upload(a.indices)),e.vertexBuffer.upload(a.vertices),b.bindShader(e.shader),e.shader.uniforms.uSampler=b.bindTexture(d),b.state.setBlendMode(a.blendMode),e.shader.uniforms.uTransform&&(a.uploadUvTransform?e.shader.uniforms.uTransform=a._uvTransform.mapCoord.toArray(!0):e.shader.uniforms.uTransform=n.toArray(!0)),e.shader.uniforms.translationMatrix=a.worldTransform.toArray(!0),e.shader.uniforms.alpha=a.worldAlpha,e.shader.uniforms.tint=a.tintRgb;var f=a.drawMode===m.default.DRAW_MODES.TRIANGLE_MESH?c.TRIANGLE_STRIP:c.TRIANGLES;e.vao.draw(f,a.indices.length,0)}},b}(i.ObjectRenderer);c.default=o,i.WebGLRenderer.registerPlugin("mesh",o)},{"../../core":83,"../Mesh":184,path:40,"pixi-gl-core":47}],191:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("../core"),h=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(g),i=function(a){function b(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,f=arguments[1],g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384;d(this,b);var i=e(this,a.call(this));return g>16384&&(g=16384),g>c&&(g=c),i._properties=[!1,!0,!1,!1,!1],i._maxSize=c,i._batchSize=g,i._glBuffers={},i._bufferToUpdate=0,i.interactiveChildren=!1,i.blendMode=h.BLEND_MODES.NORMAL,i.roundPixels=!0,i.baseTexture=null,i.setProperties(f),i}return f(b,a),b.prototype.setProperties=function(a){a&&(this._properties[0]="scale"in a?!!a.scale:this._properties[0],this._properties[1]="position"in a?!!a.position:this._properties[1],this._properties[2]="rotation"in a?!!a.rotation:this._properties[2],this._properties[3]="uvs"in a?!!a.uvs:this._properties[3],this._properties[4]="alpha"in a?!!a.alpha:this._properties[4])},b.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},b.prototype.renderWebGL=function(a){var b=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return b.onChildrenChange(0)})),a.setObjectRenderer(a.plugins.particle),a.plugins.particle.render(this))},b.prototype.onChildrenChange=function(a){var b=Math.floor(a/this._batchSize);b<this._bufferToUpdate&&(this._bufferToUpdate=b)},b.prototype.renderCanvas=function(a){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var b=a.context,c=this.worldTransform,d=!0,e=0,f=0,g=0,h=0,i=a.blendModes[this.blendMode];i!==b.globalCompositeOperation&&(b.globalCompositeOperation=i),b.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var j=0;j<this.children.length;++j){var k=this.children[j];if(k.visible){var l=k._texture.frame;if(b.globalAlpha=this.worldAlpha*k.alpha,k.rotation%(2*Math.PI)==0)d&&(b.setTransform(c.a,c.b,c.c,c.d,c.tx*a.resolution,c.ty*a.resolution),d=!1),e=k.anchor.x*(-l.width*k.scale.x)+k.position.x+.5,f=k.anchor.y*(-l.height*k.scale.y)+k.position.y+.5,g=l.width*k.scale.x,h=l.height*k.scale.y;else{d||(d=!0),k.displayObjectUpdateTransform();var m=k.worldTransform;a.roundPixels?b.setTransform(m.a,m.b,m.c,m.d,m.tx*a.resolution|0,m.ty*a.resolution|0):b.setTransform(m.a,m.b,m.c,m.d,m.tx*a.resolution,m.ty*a.resolution),e=k.anchor.x*-l.width+.5,f=k.anchor.y*-l.height+.5,g=l.width,h=l.height}var n=k._texture.baseTexture.resolution;b.drawImage(k._texture.baseTexture.source,l.x*n,l.y*n,l.width*n,l.height*n,e*a.resolution,f*a.resolution,g*a.resolution,h*a.resolution)}}}},b.prototype.destroy=function(b){if(a.prototype.destroy.call(this,b),this._buffers)for(var c=0;c<this._buffers.length;++c)this._buffers[c].destroy();this._properties=null,this._buffers=null},b}(h.Container);c.default=i},{"../core":83}],192:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=a("./ParticleContainer");Object.defineProperty(c,"ParticleContainer",{enumerable:!0,get:function(){return d(e).default}});var f=a("./webgl/ParticleRenderer");Object.defineProperty(c,"ParticleRenderer",{enumerable:!0,get:function(){return d(f).default}})},{"./ParticleContainer":191,"./webgl/ParticleRenderer":194}],193:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("pixi-gl-core"),g=d(f),h=a("../../core/utils/createIndicesForQuads"),i=d(h),j=function(){function a(b,c,d,f){e(this,a),this.gl=b,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=f,this.dynamicProperties=[],this.staticProperties=[];for(var g=0;g<c.length;++g){var h=c[g];h={attribute:h.attribute,size:h.size,uploadFunction:h.uploadFunction,offset:h.offset},d[g]?this.dynamicProperties.push(h):this.staticProperties.push(h)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}return a.prototype.initBuffers=function(){var a=this.gl,b=0;this.indices=(0,i.default)(this.size),this.indexBuffer=g.default.GLBuffer.createIndexBuffer(a,this.indices,a.STATIC_DRAW),this.dynamicStride=0;for(var c=0;c<this.dynamicProperties.length;++c){var d=this.dynamicProperties[c];d.offset=b,b+=d.size,this.dynamicStride+=d.size}this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=g.default.GLBuffer.createVertexBuffer(a,this.dynamicData,a.STREAM_DRAW);var e=0;this.staticStride=0
;for(var f=0;f<this.staticProperties.length;++f){var h=this.staticProperties[f];h.offset=e,e+=h.size,this.staticStride+=h.size}this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=g.default.GLBuffer.createVertexBuffer(a,this.staticData,a.STATIC_DRAW),this.vao=new g.default.VertexArrayObject(a).addIndex(this.indexBuffer);for(var j=0;j<this.dynamicProperties.length;++j){var k=this.dynamicProperties[j];this.vao.addAttribute(this.dynamicBuffer,k.attribute,a.FLOAT,!1,4*this.dynamicStride,4*k.offset)}for(var l=0;l<this.staticProperties.length;++l){var m=this.staticProperties[l];this.vao.addAttribute(this.staticBuffer,m.attribute,a.FLOAT,!1,4*this.staticStride,4*m.offset)}},a.prototype.uploadDynamic=function(a,b,c){for(var d=0;d<this.dynamicProperties.length;d++){var e=this.dynamicProperties[d];e.uploadFunction(a,b,c,this.dynamicData,this.dynamicStride,e.offset)}this.dynamicBuffer.upload()},a.prototype.uploadStatic=function(a,b,c){for(var d=0;d<this.staticProperties.length;d++){var e=this.staticProperties[d];e.uploadFunction(a,b,c,this.staticData,this.staticStride,e.offset)}this.staticBuffer.upload()},a.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()},a}();c.default=j},{"../../core/utils/createIndicesForQuads":140,"pixi-gl-core":47}],194:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../core"),i=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(h),j=a("./ParticleShader"),k=d(j),l=a("./ParticleBuffer"),m=d(l),n=function(a){function b(c){e(this,b);var d=f(this,a.call(this,c));return d.shader=null,d.indexBuffer=null,d.properties=null,d.tempMatrix=new i.Matrix,d.CONTEXT_UID=0,d}return g(b,a),b.prototype.onContextChange=function(){var a=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new k.default(a),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},b.prototype.start=function(){this.renderer.bindShader(this.shader)},b.prototype.render=function(a){var b=a.children,c=a._maxSize,d=a._batchSize,e=this.renderer,f=b.length;if(0!==f){f>c&&(f=c);var g=a._glBuffers[e.CONTEXT_UID];g||(g=a._glBuffers[e.CONTEXT_UID]=this.generateBuffers(a)),this.renderer.setBlendMode(a.blendMode);var h=e.gl,i=a.worldTransform.copy(this.tempMatrix);i.prepend(e._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=i.toArray(!0),this.shader.uniforms.uAlpha=a.worldAlpha;var j=b[0]._texture.baseTexture;this.shader.uniforms.uSampler=e.bindTexture(j);for(var k=0,l=0;k<f;k+=d,l+=1){var m=f-k;m>d&&(m=d);var n=g[l];n.uploadDynamic(b,k,m),a._bufferToUpdate===l&&(n.uploadStatic(b,k,m),a._bufferToUpdate=l+1),e.bindVao(n.vao),n.vao.draw(h.TRIANGLES,6*m)}}},b.prototype.generateBuffers=function(a){for(var b=this.renderer.gl,c=[],d=a._maxSize,e=a._batchSize,f=a._properties,g=0;g<d;g+=e)c.push(new m.default(b,this.properties,f,e));return c},b.prototype.uploadVertices=function(a,b,c,d,e,f){for(var g=0,h=0,i=0,j=0,k=0;k<c;++k){var l=a[b+k],m=l._texture,n=l.scale.x,o=l.scale.y,p=m.trim,q=m.orig;p?(h=p.x-l.anchor.x*q.width,g=h+p.width,j=p.y-l.anchor.y*q.height,i=j+p.height):(g=q.width*(1-l.anchor.x),h=q.width*-l.anchor.x,i=q.height*(1-l.anchor.y),j=q.height*-l.anchor.y),d[f]=h*n,d[f+1]=j*o,d[f+e]=g*n,d[f+e+1]=j*o,d[f+2*e]=g*n,d[f+2*e+1]=i*o,d[f+3*e]=h*n,d[f+3*e+1]=i*o,f+=4*e}},b.prototype.uploadPosition=function(a,b,c,d,e,f){for(var g=0;g<c;g++){var h=a[b+g].position;d[f]=h.x,d[f+1]=h.y,d[f+e]=h.x,d[f+e+1]=h.y,d[f+2*e]=h.x,d[f+2*e+1]=h.y,d[f+3*e]=h.x,d[f+3*e+1]=h.y,f+=4*e}},b.prototype.uploadRotation=function(a,b,c,d,e,f){for(var g=0;g<c;g++){var h=a[b+g].rotation;d[f]=h,d[f+e]=h,d[f+2*e]=h,d[f+3*e]=h,f+=4*e}},b.prototype.uploadUvs=function(a,b,c,d,e,f){for(var g=0;g<c;++g){var h=a[b+g]._texture._uvs;h?(d[f]=h.x0,d[f+1]=h.y0,d[f+e]=h.x1,d[f+e+1]=h.y1,d[f+2*e]=h.x2,d[f+2*e+1]=h.y2,d[f+3*e]=h.x3,d[f+3*e+1]=h.y3,f+=4*e):(d[f]=0,d[f+1]=0,d[f+e]=0,d[f+e+1]=0,d[f+2*e]=0,d[f+2*e+1]=0,d[f+3*e]=0,d[f+3*e+1]=0,f+=4*e)}},b.prototype.uploadAlpha=function(a,b,c,d,e,f){for(var g=0;g<c;g++){var h=a[b+g].alpha;d[f]=h,d[f+e]=h,d[f+2*e]=h,d[f+3*e]=h,f+=4*e}},b.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),a.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},b}(i.ObjectRenderer);c.default=n,i.WebGLRenderer.registerPlugin("particle",n)},{"../../core":83,"./ParticleBuffer":193,"./ParticleShader":195}],195:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var g=a("../../core/Shader"),h=function(a){return a&&a.__esModule?a:{default:a}}(g),i=function(a){function b(c){return d(this,b),e(this,a.call(this,c,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n")))}return f(b,a),b}(h.default);c.default=i},{"../../core/Shader":62}],196:[function(a,b,c){"use strict";Math.sign||(Math.sign=function(a){return a=Number(a),0===a||isNaN(a)?a:a>0?1:-1})},{}],197:[function(a,b,c){"use strict";var d=a("object-assign"),e=function(a){return a&&a.__esModule?a:{default:a}}(d);Object.assign||(Object.assign=e.default)},{"object-assign":35}],198:[function(a,b,c){"use strict";a("./Object.assign"),a("./requestAnimationFrame"),a("./Math.sign"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":196,"./Object.assign":197,"./requestAnimationFrame":199}],199:[function(a,b,c){(function(a){"use strict";if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!a.performance||!a.performance.now){var b=Date.now();a.performance||(a.performance={}),a.performance.now=function(){return Date.now()-b}}for(var c=Date.now(),d=["ms","moz","webkit","o"],e=0;e<d.length&&!a.requestAnimationFrame;++e){var f=d[e];a.requestAnimationFrame=a[f+"RequestAnimationFrame"],a.cancelAnimationFrame=a[f+"CancelAnimationFrame"]||a[f+"CancelRequestAnimationFrame"]}a.requestAnimationFrame||(a.requestAnimationFrame=function(a){if("function"!=typeof a)throw new TypeError(a+"is not a function");var b=Date.now(),d=16+c-b;return d<0&&(d=0),c=b,setTimeout(function(){c=Date.now(),a(performance.now())},d)}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){return clearTimeout(a)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],200:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){var c=!1;if(a&&a._textures&&a._textures.length)for(var d=0;d<a._textures.length;d++)if(a._textures[d]instanceof m.Texture){var e=a._textures[d].baseTexture;-1===b.indexOf(e)&&(b.push(e),c=!0)}return c}function f(a,b){return a instanceof m.BaseTexture&&(-1===b.indexOf(a)&&b.push(a),!0)}function g(a,b){if(a._texture&&a._texture instanceof m.Texture){var c=a._texture.baseTexture;return-1===b.indexOf(c)&&b.push(c),!0}return!1}function h(a,b){return b instanceof m.Text&&(b.updateText(!0),!0)}function i(a,b){if(b instanceof m.TextStyle){var c=m.Text.getFontStyle(b);return m.Text.fontPropertiesCache[c]||m.Text.calculateFontProperties(c),!0}return!1}function j(a,b){if(a instanceof m.Text){-1===b.indexOf(a.style)&&b.push(a.style),-1===b.indexOf(a)&&b.push(a);var c=a._texture.baseTexture;return-1===b.indexOf(c)&&b.push(c),!0}return!1}function k(a,b){return a instanceof m.TextStyle&&(-1===b.indexOf(a)&&b.push(a),!0)}c.__esModule=!0;var l=a("../core"),m=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(l),n=a("./limiters/CountLimiter"),o=function(a){return a&&a.__esModule?a:{default:a}}(n),p=m.ticker.shared;m.settings.UPLOADS_PER_FRAME=4;var q=function(){function a(b){var c=this;d(this,a),this.limiter=new o.default(m.settings.UPLOADS_PER_FRAME),this.renderer=b,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){c.queue&&c.prepareItems()},this.registerFindHook(j),this.registerFindHook(k),this.registerFindHook(e),this.registerFindHook(f),this.registerFindHook(g),this.registerUploadHook(h),this.registerUploadHook(i)}return a.prototype.upload=function(a,b){"function"==typeof a&&(b=a,a=null),a&&this.add(a),this.queue.length?(b&&this.completes.push(b),this.ticking||(this.ticking=!0,p.addOnce(this.tick,this,m.UPDATE_PRIORITY.UTILITY))):b&&b()},a.prototype.tick=function(){setTimeout(this.delayedTick,0)},a.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var a=this.queue[0],b=!1;if(a&&!a._destroyed)for(var c=0,d=this.uploadHooks.length;c<d;c++)if(this.uploadHooks[c](this.uploadHookHelper,a)){this.queue.shift(),b=!0;break}b||this.queue.shift()}if(this.queue.length)p.addOnce(this.tick,this,m.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var e=this.completes.slice(0);this.completes.length=0;for(var f=0,g=e.length;f<g;f++)e[f]()}},a.prototype.registerFindHook=function(a){return a&&this.addHooks.push(a),this},a.prototype.registerUploadHook=function(a){return a&&this.uploadHooks.push(a),this},a.prototype.add=function(a){for(var b=0,c=this.addHooks.length;b<c&&!this.addHooks[b](a,this.queue);b++);if(a instanceof m.Container)for(var d=a.children.length-1;d>=0;d--)this.add(a.children[d]);return this},a.prototype.destroy=function(){this.ticking&&p.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},a}();c.default=q},{"../core":83,"./limiters/CountLimiter":203}],201:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b){if(b instanceof i.BaseTexture){var c=b.source,d=0===c.width?a.canvas.width:Math.min(a.canvas.width,c.width),e=0===c.height?a.canvas.height:Math.min(a.canvas.height,c.height);return a.ctx.drawImage(c,0,0,d,e,0,0,a.canvas.width,a.canvas.height),!0}return!1}c.__esModule=!0;var h=a("../../core"),i=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(h),j=a("../BasePrepare"),k=function(a){return a&&a.__esModule?a:{default:a}}(j),l=16,m=function(a){function b(c){d(this,b);var f=e(this,a.call(this,c));return f.uploadHookHelper=f,f.canvas=document.createElement("canvas"),f.canvas.width=l,f.canvas.height=l,f.ctx=f.canvas.getContext("2d"),f.registerUploadHook(g),f}return f(b,a),b.prototype.destroy=function(){a.prototype.destroy.call(this),this.ctx=null,this.canvas=null},b}(k.default);c.default=m,i.CanvasRenderer.registerPlugin("prepare",m)},{"../../core":83,"../BasePrepare":200}],202:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var e=a("./webgl/WebGLPrepare");Object.defineProperty(c,"webgl",{enumerable:!0,get:function(){return d(e).default}});var f=a("./canvas/CanvasPrepare");Object.defineProperty(c,"canvas",{enumerable:!0,get:function(){return d(f).default}});var g=a("./BasePrepare");Object.defineProperty(c,"BasePrepare",{enumerable:!0,get:function(){return d(g).default}});var h=a("./limiters/CountLimiter");Object.defineProperty(c,"CountLimiter",{enumerable:!0,get:function(){return d(h).default}});var i=a("./limiters/TimeLimiter");Object.defineProperty(c,"TimeLimiter",{enumerable:!0,get:function(){return d(i).default}})},{"./BasePrepare":200,"./canvas/CanvasPrepare":201,"./limiters/CountLimiter":203,"./limiters/TimeLimiter":204,"./webgl/WebGLPrepare":205}],203:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(b){d(this,a),this.maxItemsPerFrame=b,this.itemsLeft=0}return a.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},a.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},a}();c.default=e},{}],204:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(b){d(this,a),this.maxMilliseconds=b,this.frameStart=0}return a.prototype.beginFrame=function(){this.frameStart=Date.now()},a.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},a}();c.default=e},{}],205:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b){return b instanceof k.BaseTexture&&(b._glTextures[a.CONTEXT_UID]||a.textureManager.updateTexture(b),!0)}function h(a,b){return b instanceof k.Graphics&&((b.dirty||b.clearDirty||!b._webGL[a.plugins.graphics.CONTEXT_UID])&&a.plugins.graphics.updateGraphics(b),!0)}function i(a,b){return a instanceof k.Graphics&&(b.push(a),!0)}c.__esModule=!0;var j=a("../../core"),k=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(j),l=a("../BasePrepare"),m=function(a){return a&&a.__esModule?a:{default:a}}(l),n=function(a){function b(c){d(this,b);var f=e(this,a.call(this,c));return f.uploadHookHelper=f.renderer,f.registerFindHook(i),f.registerUploadHook(g),f.registerUploadHook(h),f}return f(b,a),b}(m.default);c.default=n,k.WebGLRenderer.registerPlugin("prepare",n)},{"../../core":83,"../BasePrepare":200}],206:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],207:[function(a,b,c){(function(a){!function(d){function e(a){throw new RangeError(H[a])}function f(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function g(a,b){var c=a.split("@"),d="";return c.length>1&&(d=c[0]+"@",a=c[1]),a=a.replace(G,"."),d+f(a.split("."),b).join(".")}function h(a){for(var b,c,d=[],e=0,f=a.length;e<f;)b=a.charCodeAt(e++),b>=55296&&b<=56319&&e<f?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function i(a){return f(a,function(a){var b="";return a>65535&&(a-=65536,b+=K(a>>>10&1023|55296),a=56320|1023&a),b+=K(a)}).join("")}function j(a){return a-48<10?a-22:a-65<26?a-65:a-97<26?a-97:w}function k(a,b){return a+22+75*(a<26)-((0!=b)<<5)}function l(a,b,c){var d=0;for(a=c?J(a/A):a>>1,a+=J(a/b);a>I*y>>1;d+=w)a=J(a/I);return J(d+(I+1)*a/(a+z))}function m(a){var b,c,d,f,g,h,k,m,n,o,p=[],q=a.length,r=0,s=C,t=B;for(c=a.lastIndexOf(D),c<0&&(c=0),d=0;d<c;++d)a.charCodeAt(d)>=128&&e("not-basic"),p.push(a.charCodeAt(d));for(f=c>0?c+1:0;f<q;){for(g=r,h=1,k=w;f>=q&&e("invalid-input"),m=j(a.charCodeAt(f++)),(m>=w||m>J((v-r)/h))&&e("overflow"),r+=m*h,n=k<=t?x:k>=t+y?y:k-t,!(m<n);k+=w)o=w-n,h>J(v/o)&&e("overflow"),h*=o;b=p.length+1,t=l(r-g,b,0==g),J(r/b)>v-s&&e("overflow"),s+=J(r/b),r%=b,p.splice(r++,0,s)}return i(p)}function n(a){var b,c,d,f,g,i,j,m,n,o,p,q,r,s,t,u=[];for(a=h(a),q=a.length,b=C,c=0,g=B,i=0;i<q;++i)(p=a[i])<128&&u.push(K(p));for(d=f=u.length,f&&u.push(D);d<q;){for(j=v,i=0;i<q;++i)(p=a[i])>=b&&p<j&&(j=p);for(r=d+1,j-b>J((v-c)/r)&&e("overflow"),c+=(j-b)*r,b=j,i=0;i<q;++i)if(p=a[i],p<b&&++c>v&&e("overflow"),p==b){for(m=c,n=w;o=n<=g?x:n>=g+y?y:n-g,!(m<o);n+=w)t=m-o,s=w-o,u.push(K(k(o+t%s,0))),m=J(t/s);u.push(K(k(m,0))),g=l(c,r,d==f),c=0,++d}++c,++b}return u.join("")}function o(a){return g(a,function(a){return E.test(a)?m(a.slice(4).toLowerCase()):a})}function p(a){return g(a,function(a){return F.test(a)?"xn--"+n(a):a})}var q="object"==typeof c&&c&&!c.nodeType&&c,r="object"==typeof b&&b&&!b.nodeType&&b,s="object"==typeof a&&a;s.global!==s&&s.window!==s&&s.self!==s||(d=s);var t,u,v=2147483647,w=36,x=1,y=26,z=38,A=700,B=72,C=128,D="-",E=/^xn--/,F=/[^\x20-\x7E]/,G=/[\x2E\u3002\uFF0E\uFF61]/g,H={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},I=w-x,J=Math.floor,K=String.fromCharCode;if(t={version:"1.4.1",ucs2:{decode:h,encode:i},decode:m,encode:n,toASCII:p,toUnicode:o},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return t});else if(q&&r)if(b.exports==q)r.exports=t;else for(u in t)t.hasOwnProperty(u)&&(q[u]=t[u]);else d.punycode=t}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],208:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;a=a.split(b);var h=1e3;f&&"number"==typeof f.maxKeys&&(h=f.maxKeys);var i=a.length;h>0&&i>h&&(i=h);for(var j=0;j<i;++j){var k,l,m,n,o=a[j].replace(/\+/g,"%20"),p=o.indexOf(c);p>=0?(k=o.substr(0,p),l=o.substr(p+1)):(k=o,l=""),m=decodeURIComponent(k),n=decodeURIComponent(l),d(g,m)?e(g[m])?g[m].push(n):g[m]=[g[m],n]:g[m]=n}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],209:[function(a,b,c){"use strict";function d(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var e=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?d(g(a),function(g){var h=encodeURIComponent(e(g))+c;return f(a[g])?d(a[g],function(a){return h+encodeURIComponent(e(a))}).join(b):h+encodeURIComponent(e(a[g]))}).join(b):h?encodeURIComponent(e(h))+c+encodeURIComponent(e(a)):""};var f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],210:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":208,"./encode":209}],211:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=a("mini-signals"),h=d(g),i=a("parse-uri"),j=d(i),k=a("./async"),l=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(k),m=a("./Resource"),n=d(m),o=/(#[\w-]+)?$/,p=function(){function a(){var b=this,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;e(this,a),this.baseUrl=c,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(a,c){return b._loadResource(a,c)},this._queue=l.queue(this._boundLoadResource,d),this._queue.pause(),this.resources={},this.onProgress=new h.default,this.onError=new h.default,this.onLoad=new h.default,this.onStart=new h.default,this.onComplete=new h.default}return a.prototype.add=function(a,b,c,d){if(Array.isArray(a)){for(var e=0;e<a.length;++e)this.add(a[e]);return this}if("object"===(void 0===a?"undefined":f(a))&&(d=b||a.callback||a.onComplete,c=a,b=a.url,a=a.name||a.key||a.url),"string"!=typeof b&&(d=c,c=b,b=a),"string"!=typeof b)throw new Error("No url passed to add resource to loader.");if("function"==typeof c&&(d=c,c=null),this.loading&&(!c||!c.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[a])throw new Error('Resource named "'+a+'" already exists.');if(b=this._prepareUrl(b),this.resources[a]=new n.default(a,b,c),"function"==typeof d&&this.resources[a].onAfterMiddleware.once(d),this.loading){for(var g=c.parentResource,h=[],i=0;i<g.children.length;++i)g.children[i].isComplete||h.push(g.children[i]);var j=g.progressChunk*(h.length+1),k=j/(h.length+2);g.children.push(this.resources[a]),g.progressChunk=k;for(var l=0;l<h.length;++l)h[l].progressChunk=k;this.resources[a].progressChunk=k}return this._queue.push(this.resources[a]),this},a.prototype.pre=function(a){return this._beforeMiddleware.push(a),this},a.prototype.use=function(a){return this._afterMiddleware.push(a),this},a.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var a in this.resources){var b=this.resources[a];b._onLoadBinding&&b._onLoadBinding.detach(),b.isLoading&&b.abort()}return this.resources={},this},a.prototype.load=function(a){if("function"==typeof a&&this.onComplete.once(a),this.loading)return this;for(var b=100/this._queue._tasks.length,c=0;c<this._queue._tasks.length;++c)this._queue._tasks[c].data.progressChunk=b;return this.loading=!0,this.onStart.dispatch(this),this._queue.resume(),this},a.prototype._prepareUrl=function(a){var b=(0,j.default)(a,{strictMode:!0}),c=void 0;if(c=b.protocol||!b.path||0===a.indexOf("//")?a:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==a.charAt(0)?this.baseUrl+"/"+a:this.baseUrl+a,this.defaultQueryString){var d=o.exec(c)[0];c=c.substr(0,c.length-d.length),-1!==c.indexOf("?")?c+="&"+this.defaultQueryString:c+="?"+this.defaultQueryString,c+=d}return c},a.prototype._loadResource=function(a,b){var c=this;a._dequeue=b,l.eachSeries(this._beforeMiddleware,function(b,d){b.call(c,a,function(){d(a.isComplete?{}:null)})},function(){a.isComplete?c._onLoad(a):(a._onLoadBinding=a.onComplete.once(c._onLoad,c),a.load())})},a.prototype._onComplete=function(){this.loading=!1,this.onComplete.dispatch(this,this.resources)},a.prototype._onLoad=function(a){var b=this;a._onLoadBinding=null,a._dequeue(),this._resourcesParsing.push(a),l.eachSeries(this._afterMiddleware,function(c,d){c.call(b,a,d)},function(){a.onAfterMiddleware.dispatch(a),b.progress+=a.progressChunk,b.onProgress.dispatch(b,a),a.error?b.onError.dispatch(a.error,b,a):b.onLoad.dispatch(b,a),b._resourcesParsing.splice(b._resourcesParsing.indexOf(a),1),b._queue.idle()&&0===b._resourcesParsing.length&&(b.progress=100,b._onComplete())})},a}();c.default=p},{"./Resource":212,"./async":213,"mini-signals":34,"parse-uri":36}],212:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(){}function g(a,b,c){b&&0===b.indexOf(".")&&(b=b.substring(1)),b&&(a[b]=c)}function h(a){return a.toString().replace("object ","")}c.__esModule=!0;var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("parse-uri"),k=d(j),l=a("mini-signals"),m=d(l),n=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),o=null,p=function(){function a(b,c,d){if(e(this,a),"string"!=typeof b||"string"!=typeof c)throw new Error("Both name and url are required for constructing a resource.");d=d||{},this._flags=0,this._setFlag(a.STATUS_FLAGS.DATA_URL,0===c.indexOf("data:")),this.name=b,this.url=c,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===d.crossOrigin?"anonymous":d.crossOrigin,this.loadType=d.loadType||this._determineLoadType(),this.xhrType=d.xhrType,this.metadata=d.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=a.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=f,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new m.default,this.onProgress=new m.default,this.onComplete=new m.default,this.onAfterMiddleware=new m.default}return a.setExtensionLoadType=function(b,c){g(a._loadTypeMap,b,c)},a.setExtensionXhrType=function(b,c){g(a._xhrTypeMap,b,c)},a.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(a.STATUS_FLAGS.COMPLETE,!0),this._setFlag(a.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},a.prototype.abort=function(b){if(!this.error){if(this.error=new Error(b),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=a.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},a.prototype.load=function(b){var c=this;if(!this.isLoading){if(this.isComplete)return void(b&&setTimeout(function(){return b(c)},1));switch(b&&this.onComplete.once(b),this._setFlag(a.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case a.LOAD_TYPE.IMAGE:this.type=a.TYPE.IMAGE,this._loadElement("image");break;case a.LOAD_TYPE.AUDIO:this.type=a.TYPE.AUDIO,this._loadSourceElement("audio");break;case a.LOAD_TYPE.VIDEO:this.type=a.TYPE.VIDEO,this._loadSourceElement("video");break;case a.LOAD_TYPE.XHR:default:n&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},a.prototype._hasFlag=function(a){return!!(this._flags&a)},a.prototype._setFlag=function(a,b){this._flags=b?this._flags|a:this._flags&~a},a.prototype._loadElement=function(a){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===a&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(a),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),
this.data.addEventListener("progress",this._boundOnProgress,!1)},a.prototype._loadSourceElement=function(a){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===a&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(a),null===this.data)return void this.abort("Unsupported element: "+a);if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var b=0;b<this.url.length;++b)this.data.appendChild(this._createSource(a,this.url[b]));else this.data.appendChild(this._createSource(a,this.url));this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},a.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var b=this.xhr=new XMLHttpRequest;b.open("GET",this.url,!0),this.xhrType===a.XHR_RESPONSE_TYPE.JSON||this.xhrType===a.XHR_RESPONSE_TYPE.DOCUMENT?b.responseType=a.XHR_RESPONSE_TYPE.TEXT:b.responseType=this.xhrType,b.addEventListener("error",this._boundXhrOnError,!1),b.addEventListener("abort",this._boundXhrOnAbort,!1),b.addEventListener("progress",this._boundOnProgress,!1),b.addEventListener("load",this._boundXhrOnLoad,!1),b.send()},a.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var a=this.xhr=new XDomainRequest;a.timeout=5e3,a.onerror=this._boundXhrOnError,a.ontimeout=this._boundXdrOnTimeout,a.onprogress=this._boundOnProgress,a.onload=this._boundXhrOnLoad,a.open("GET",this.url,!0),setTimeout(function(){return a.send()},1)},a.prototype._createSource=function(a,b,c){c||(c=a+"/"+b.substr(b.lastIndexOf(".")+1));var d=document.createElement("source");return d.src=b,d.type=c,d},a.prototype._onError=function(a){this.abort("Failed to load element using: "+a.target.nodeName)},a.prototype._onProgress=function(a){a&&a.lengthComputable&&this.onProgress.dispatch(this,a.loaded/a.total)},a.prototype._xhrOnError=function(){var a=this.xhr;this.abort(h(a)+" Request failed. Status: "+a.status+', text: "'+a.statusText+'"')},a.prototype._xhrOnAbort=function(){this.abort(h(this.xhr)+" Request was aborted by the user.")},a.prototype._xdrOnTimeout=function(){this.abort(h(this.xhr)+" Request timed out.")},a.prototype._xhrOnLoad=function(){var b=this.xhr,c="",d=void 0===b.status?200:b.status;if(""!==b.responseType&&"text"!==b.responseType&&void 0!==b.responseType||(c=b.responseText),0===d&&c.length>0?d=200:1223===d&&(d=204),2!=(d/100|0))return void this.abort("["+b.status+"] "+b.statusText+": "+b.responseURL);if(this.xhrType===a.XHR_RESPONSE_TYPE.TEXT)this.data=c,this.type=a.TYPE.TEXT;else if(this.xhrType===a.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(c),this.type=a.TYPE.JSON}catch(a){return void this.abort("Error trying to parse loaded json: "+a)}else if(this.xhrType===a.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var e=new DOMParser;this.data=e.parseFromString(c,"text/xml")}else{var f=document.createElement("div");f.innerHTML=c,this.data=f}this.type=a.TYPE.XML}catch(a){return void this.abort("Error trying to parse loaded xml: "+a)}else this.data=b.response||c;this.complete()},a.prototype._determineCrossOrigin=function(a,b){if(0===a.indexOf("data:"))return"";b=b||window.location,o||(o=document.createElement("a")),o.href=a,a=(0,k.default)(o.href,{strictMode:!0});var c=!a.port&&""===b.port||a.port===b.port,d=a.protocol?a.protocol+":":"";return a.host===b.hostname&&c&&d===b.protocol?"":"anonymous"},a.prototype._determineXhrType=function(){return a._xhrTypeMap[this.extension]||a.XHR_RESPONSE_TYPE.TEXT},a.prototype._determineLoadType=function(){return a._loadTypeMap[this.extension]||a.LOAD_TYPE.XHR},a.prototype._getExtension=function(){var a=this.url,b="";if(this.isDataUrl){var c=a.indexOf("/");b=a.substring(c+1,a.indexOf(";",c))}else{var d=a.indexOf("?");-1!==d&&(a=a.substring(0,d)),b=a.substring(a.lastIndexOf(".")+1)}return b.toLowerCase()},a.prototype._getMimeFromXhrType=function(b){switch(b){case a.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case a.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case a.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case a.XHR_RESPONSE_TYPE.JSON:return"application/json";case a.XHR_RESPONSE_TYPE.DEFAULT:case a.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},i(a,[{key:"isDataUrl",get:function(){return this._hasFlag(a.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(a.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(a.STATUS_FLAGS.LOADING)}}]),a}();c.default=p,p.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},p.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},p.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},p.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},p._loadTypeMap={gif:p.LOAD_TYPE.IMAGE,png:p.LOAD_TYPE.IMAGE,bmp:p.LOAD_TYPE.IMAGE,jpg:p.LOAD_TYPE.IMAGE,jpeg:p.LOAD_TYPE.IMAGE,tif:p.LOAD_TYPE.IMAGE,tiff:p.LOAD_TYPE.IMAGE,webp:p.LOAD_TYPE.IMAGE,tga:p.LOAD_TYPE.IMAGE,svg:p.LOAD_TYPE.IMAGE,"svg+xml":p.LOAD_TYPE.IMAGE,mp3:p.LOAD_TYPE.AUDIO,ogg:p.LOAD_TYPE.AUDIO,wav:p.LOAD_TYPE.AUDIO,mp4:p.LOAD_TYPE.VIDEO,webm:p.LOAD_TYPE.VIDEO},p._xhrTypeMap={xhtml:p.XHR_RESPONSE_TYPE.DOCUMENT,html:p.XHR_RESPONSE_TYPE.DOCUMENT,htm:p.XHR_RESPONSE_TYPE.DOCUMENT,xml:p.XHR_RESPONSE_TYPE.DOCUMENT,tmx:p.XHR_RESPONSE_TYPE.DOCUMENT,svg:p.XHR_RESPONSE_TYPE.DOCUMENT,tsx:p.XHR_RESPONSE_TYPE.DOCUMENT,gif:p.XHR_RESPONSE_TYPE.BLOB,png:p.XHR_RESPONSE_TYPE.BLOB,bmp:p.XHR_RESPONSE_TYPE.BLOB,jpg:p.XHR_RESPONSE_TYPE.BLOB,jpeg:p.XHR_RESPONSE_TYPE.BLOB,tif:p.XHR_RESPONSE_TYPE.BLOB,tiff:p.XHR_RESPONSE_TYPE.BLOB,webp:p.XHR_RESPONSE_TYPE.BLOB,tga:p.XHR_RESPONSE_TYPE.BLOB,json:p.XHR_RESPONSE_TYPE.JSON,text:p.XHR_RESPONSE_TYPE.TEXT,txt:p.XHR_RESPONSE_TYPE.TEXT,ttf:p.XHR_RESPONSE_TYPE.BUFFER,otf:p.XHR_RESPONSE_TYPE.BUFFER},p.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},{"mini-signals":34,"parse-uri":36}],213:[function(a,b,c){"use strict";function d(){}function e(a,b,c){var d=0,e=a.length;!function f(g){if(g||d===e)return void(c&&c(g));b(a[d++],f)}()}function f(a){return function(){if(null===a)throw new Error("Callback was already called.");var b=a;a=null,b.apply(this,arguments)}}function g(a,b){function c(a,b,c){if(null!=c&&"function"!=typeof c)throw new Error("task callback must be a function");if(h.started=!0,null==a&&h.idle())return void setTimeout(function(){return h.drain()},1);var e={data:a,callback:"function"==typeof c?c:d};b?h._tasks.unshift(e):h._tasks.push(e),setTimeout(function(){return h.process()},1)}function e(a){return function(){g-=1,a.callback.apply(a,arguments),null!=arguments[0]&&h.error(arguments[0],a.data),g<=h.concurrency-h.buffer&&h.unsaturated(),h.idle()&&h.drain(),h.process()}}if(null==b)b=1;else if(0===b)throw new Error("Concurrency must not be zero");var g=0,h={_tasks:[],concurrency:b,saturated:d,unsaturated:d,buffer:b/4,empty:d,drain:d,error:d,started:!1,paused:!1,push:function(a,b){c(a,!1,b)},kill:function(){g=0,h.drain=d,h.started=!1,h._tasks=[]},unshift:function(a,b){c(a,!0,b)},process:function(){for(;!h.paused&&g<h.concurrency&&h._tasks.length;){var b=h._tasks.shift();0===h._tasks.length&&h.empty(),g+=1,g===h.concurrency&&h.saturated(),a(b.data,f(e(b)))}},length:function(){return h._tasks.length},running:function(){return g},idle:function(){return h._tasks.length+g===0},pause:function(){!0!==h.paused&&(h.paused=!0)},resume:function(){if(!1!==h.paused){h.paused=!1;for(var a=1;a<=h.concurrency;a++)h.process()}}};return h}c.__esModule=!0,c.eachSeries=e,c.queue=g},{}],214:[function(a,b,c){"use strict";function d(a){for(var b="",c=0;c<a.length;){for(var d=[0,0,0],f=[0,0,0,0],g=0;g<d.length;++g)c<a.length?d[g]=255&a.charCodeAt(c++):d[g]=0;f[0]=d[0]>>2,f[1]=(3&d[0])<<4|d[1]>>4,f[2]=(15&d[1])<<2|d[2]>>6,f[3]=63&d[2];switch(c-(a.length-1)){case 2:f[3]=64,f[2]=64;break;case 1:f[3]=64}for(var h=0;h<f.length;++h)b+=e.charAt(f[h])}return b}c.__esModule=!0,c.encodeBinary=d;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},{}],215:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}function e(a){return a&&a.__esModule?a:{default:a}}c.__esModule=!0;var f=a("./Loader"),g=e(f),h=a("./Resource"),i=e(h),j=a("./async"),k=d(j),l=a("./b64"),m=d(l);g.default.Resource=i.default,g.default.async=k,g.default.base64=m,b.exports=g.default,c.default=g.default},{"./Loader":211,"./Resource":212,"./async":213,"./b64":214}],216:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){return function(a,b){if(!a.data)return void b();if(a.xhr&&a.xhrType===h.default.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof a.data){if(0===a.data.type.indexOf("image")){var c=function(){var c=k.createObjectURL(a.data);return a.blob=a.data,a.data=new Image,a.data.src=c,a.type=h.default.TYPE.IMAGE,a.data.onload=function(){k.revokeObjectURL(c),a.data.onload=null,b()},{v:void 0}}();if("object"===(void 0===c?"undefined":f(c)))return c.v}}else{var d=a.xhr.getResponseHeader("content-type");if(d&&0===d.indexOf("image"))return a.data=new Image,a.data.src="data:"+d+";base64,"+j.default.encodeBinary(a.xhr.responseText),a.type=h.default.TYPE.IMAGE,void(a.data.onload=function(){a.data.onload=null,b()})}b()}}c.__esModule=!0;var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};c.blobMiddlewareFactory=e;var g=a("../../Resource"),h=d(g),i=a("../../b64"),j=d(i),k=window.URL||window.webkitURL},{"../../Resource":212,"../../b64":214}],217:[function(a,b,c){function d(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d=f(a),g=d.source,k=d.id,l=d.path,m=j[k]&&l in j[k].nsps,n=b.forceNew||b["force new connection"]||!1===b.multiplex||m;return n?(i("ignoring socket cache for %s",g),c=h(g,b)):(j[k]||(i("new io instance for %s",g),j[k]=h(g,b)),c=j[k]),d.query&&!b.query?b.query=d.query:b&&"object"==typeof b.query&&(b.query=e(b.query)),c.socket(d.path,b)}function e(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")}var f=a("./url"),g=a("socket.io-parser"),h=a("./manager"),i=a("debug")("socket.io-client");b.exports=c=d;var j=c.managers={};c.protocol=g.protocol,c.connect=d,c.Manager=a("./manager"),c.Socket=a("./socket")},{"./manager":218,"./socket":220,"./url":221,debug:222,"socket.io-parser":226}],218:[function(a,b,c){function d(a,b){if(!(this instanceof d))return new d(a,b);a&&"object"==typeof a&&(b=a,a=void 0),b=b||{},b.path=b.path||"/socket.io",this.nsps={},this.subs=[],this.opts=b,this.reconnection(!1!==b.reconnection),this.reconnectionAttempts(b.reconnectionAttempts||1/0),this.reconnectionDelay(b.reconnectionDelay||1e3),this.reconnectionDelayMax(b.reconnectionDelayMax||5e3),this.randomizationFactor(b.randomizationFactor||.5),this.backoff=new m({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==b.timeout?2e4:b.timeout),this.readyState="closed",this.uri=a,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new h.Encoder,this.decoder=new h.Decoder,this.autoConnect=!1!==b.autoConnect,this.autoConnect&&this.open()}var e=a("engine.io-client"),f=a("./socket"),g=a("component-emitter"),h=a("socket.io-parser"),i=a("./on"),j=a("component-bind"),k=a("debug")("socket.io-client:manager"),l=a("indexof"),m=a("backo2"),n=Object.prototype.hasOwnProperty;b.exports=d,d.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var a in this.nsps)n.call(this.nsps,a)&&this.nsps[a].emit.apply(this.nsps[a],arguments)},d.prototype.updateSocketIds=function(){for(var a in this.nsps)n.call(this.nsps,a)&&(this.nsps[a].id=this.engine.id)},g(d.prototype),d.prototype.reconnection=function(a){return arguments.length?(this._reconnection=!!a,this):this._reconnection},d.prototype.reconnectionAttempts=function(a){return arguments.length?(this._reconnectionAttempts=a,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(a){return arguments.length?(this._reconnectionDelay=a,this.backoff&&this.backoff.setMin(a),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(a){return arguments.length?(this._randomizationFactor=a,this.backoff&&this.backoff.setJitter(a),this):this._randomizationFactor},d.prototype.reconnectionDelayMax=function(a){return arguments.length?(this._reconnectionDelayMax=a,this.backoff&&this.backoff.setMax(a),this):this._reconnectionDelayMax},d.prototype.timeout=function(a){return arguments.length?(this._timeout=a,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},d.prototype.open=d.prototype.connect=function(a,b){if(k("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;k("opening %s",this.uri),this.engine=e(this.uri,this.opts);var c=this.engine,d=this;this.readyState="opening",this.skipReconnect=!1;var f=i(c,"open",function(){d.onopen(),a&&a()}),g=i(c,"error",function(b){if(k("connect_error"),d.cleanup(),d.readyState="closed",d.emitAll("connect_error",b),a){var c=new Error("Connection error");c.data=b,a(c)}else d.maybeReconnectOnOpen()});if(!1!==this._timeout){var h=this._timeout;k("connect attempt will timeout after %d",h);var j=setTimeout(function(){k("connect attempt timed out after %d",h),f.destroy(),c.close(),c.emit("error","timeout"),d.emitAll("connect_timeout",h)},h);this.subs.push({destroy:function(){clearTimeout(j)}})}return this.subs.push(f),this.subs.push(g),this},d.prototype.onopen=function(){k("open"),this.cleanup(),this.readyState="open",this.emit("open");var a=this.engine;this.subs.push(i(a,"data",j(this,"ondata"))),this.subs.push(i(a,"ping",j(this,"onping"))),this.subs.push(i(a,"pong",j(this,"onpong"))),this.subs.push(i(a,"error",j(this,"onerror"))),this.subs.push(i(a,"close",j(this,"onclose"))),this.subs.push(i(this.decoder,"decoded",j(this,"ondecoded")))},d.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},d.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},d.prototype.ondata=function(a){this.decoder.add(a)},d.prototype.ondecoded=function(a){this.emit("packet",a)},d.prototype.onerror=function(a){k("error",a),this.emitAll("error",a)},d.prototype.socket=function(a,b){function c(){~l(e.connecting,d)||e.connecting.push(d)}var d=this.nsps[a];if(!d){d=new f(this,a,b),this.nsps[a]=d;var e=this;d.on("connecting",c),d.on("connect",function(){d.id=e.engine.id}),this.autoConnect&&c()}return d},d.prototype.destroy=function(a){var b=l(this.connecting,a);~b&&this.connecting.splice(b,1),this.connecting.length||this.close()},d.prototype.packet=function(a){k("writing packet %j",a);var b=this;a.query&&0===a.type&&(a.nsp+="?"+a.query),b.encoding?b.packetBuffer.push(a):(b.encoding=!0,this.encoder.encode(a,function(c){for(var d=0;d<c.length;d++)b.engine.write(c[d],a.options);b.encoding=!1,b.processPacketQueue()}))},d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var a=this.packetBuffer.shift();this.packet(a)}},d.prototype.cleanup=function(){k("cleanup");for(var a=this.subs.length,b=0;b<a;b++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){k("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(a){k("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",a),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var a=this;if(this.backoff.attempts>=this._reconnectionAttempts)k("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var b=this.backoff.duration();k("will wait %dms before reconnect attempt",b),this.reconnecting=!0;var c=setTimeout(function(){a.skipReconnect||(k("attempting reconnect"),a.emitAll("reconnect_attempt",a.backoff.attempts),a.emitAll("reconnecting",a.backoff.attempts),a.skipReconnect||a.open(function(b){b?(k("reconnect attempt error"),a.reconnecting=!1,a.reconnect(),a.emitAll("reconnect_error",b.data)):(k("reconnect success"),a.onreconnect())}))},b);this.subs.push({destroy:function(){clearTimeout(c)}})}},d.prototype.onreconnect=function(){var a=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",a)}},{"./on":219,"./socket":220,backo2:3,"component-bind":8,"component-emitter":9,debug:222,"engine.io-client":12,indexof:31,"socket.io-parser":226}],219:[function(a,b,c){function d(a,b,c){return a.on(b,c),{destroy:function(){a.removeListener(b,c)}}}b.exports=d},{}],220:[function(a,b,c){function d(a,b,c){this.io=a,this.nsp=b,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,c&&c.query&&(this.query=c.query),this.io.autoConnect&&this.open()}var e=a("socket.io-parser"),f=a("component-emitter"),g=a("to-array"),h=a("./on"),i=a("component-bind"),j=a("debug")("socket.io-client:socket"),k=a("has-binary");b.exports=d;var l={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},m=f.prototype.emit;f(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var a=this.io;this.subs=[h(a,"open",i(this,"onopen")),h(a,"packet",i(this,"onpacket")),h(a,"close",i(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting"),this)},d.prototype.send=function(){var a=g(arguments);return a.unshift("message"),this.emit.apply(this,a),this},d.prototype.emit=function(a){if(l.hasOwnProperty(a))return m.apply(this,arguments),this;var b=g(arguments),c=e.EVENT;k(b)&&(c=e.BINARY_EVENT);var d={type:c,data:b};return d.options={},d.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof b[b.length-1]&&(j("emitting packet with ack id %d",this.ids),this.acks[this.ids]=b.pop(),d.id=this.ids++),this.connected?this.packet(d):this.sendBuffer.push(d),delete this.flags,this},d.prototype.packet=function(a){a.nsp=this.nsp,this.io.packet(a)},d.prototype.onopen=function(){j("transport is open - connecting"),"/"!==this.nsp&&(this.query?this.packet({type:e.CONNECT,query:this.query}):this.packet({type:e.CONNECT}))},d.prototype.onclose=function(a){j("close (%s)",a),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",a)},d.prototype.onpacket=function(a){if(a.nsp===this.nsp)switch(a.type){case e.CONNECT:this.onconnect();break;case e.EVENT:case e.BINARY_EVENT:this.onevent(a);break;case e.ACK:case e.BINARY_ACK:this.onack(a);break;case e.DISCONNECT:this.ondisconnect();break;case e.ERROR:this.emit("error",a.data)}},d.prototype.onevent=function(a){var b=a.data||[];j("emitting event %j",b),null!=a.id&&(j("attaching ack callback to event"),b.push(this.ack(a.id))),this.connected?m.apply(this,b):this.receiveBuffer.push(b)},d.prototype.ack=function(a){var b=this,c=!1;return function(){if(!c){c=!0;var d=g(arguments);j("sending ack %j",d);var f=k(d)?e.BINARY_ACK:e.ACK;b.packet({type:f,id:a,data:d})}}},d.prototype.onack=function(a){var b=this.acks[a.id];"function"==typeof b?(j("calling ack %s with %j",a.id,a.data),b.apply(this,a.data),delete this.acks[a.id]):j("bad ack %s",a.id)},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var a;for(a=0;a<this.receiveBuffer.length;a++)m.apply(this,this.receiveBuffer[a]);for(this.receiveBuffer=[],a=0;a<this.sendBuffer.length;a++)this.packet(this.sendBuffer[a]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){j("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var a=0;a<this.subs.length;a++)this.subs[a].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(j("performing disconnect (%s)",this.nsp),this.packet({type:e.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},d.prototype.compress=function(a){return this.flags=this.flags||{},this.flags.compress=a,this}},{"./on":219,"component-bind":8,"component-emitter":9,debug:222,"has-binary":28,"socket.io-parser":226,"to-array":233}],221:[function(a,b,c){(function(c){function d(a,b){var d=a;b=b||c.location,null==a&&(a=b.protocol+"//"+b.host),"string"==typeof a&&("/"===a.charAt(0)&&(a="/"===a.charAt(1)?b.protocol+a:b.host+a),/^(https?|wss?):\/\//.test(a)||(f("protocol-less url %s",a),a=void 0!==b?b.protocol+"//"+a:"https://"+a),f("parse %s",a),d=e(a)),d.port||(/^(http|ws)$/.test(d.protocol)?d.port="80":/^(http|ws)s$/.test(d.protocol)&&(d.port="443")),d.path=d.path||"/";var g=-1!==d.host.indexOf(":"),h=g?"["+d.host+"]":d.host;return d.id=d.protocol+"://"+h+":"+d.port,d.href=d.protocol+"://"+h+(b&&b.port===d.port?"":":"+d.port),d}var e=a("parseuri"),f=a("debug")("socket.io-client:url");b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:222,parseuri:39}],222:[function(a,b,c){(function(d){function e(){return"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function f(){var a=arguments,b=this.useColors;if(a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+c.humanize(this.diff),!b)return a;var d="color: "+this.color;a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,1));var e=0,f=0;return a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(f=e))}),a.splice(f,0,d),a}function g(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function h(a){try{null==a?c.storage.removeItem("debug"):c.storage.debug=a}catch(a){}}function i(){try{return c.storage.debug}catch(a){}if(void 0!==d&&"env"in d)return d.env.DEBUG}c=b.exports=a("./debug"),c.log=g,c.formatArgs=f,c.save=h,c.load=i,c.useColors=e,c.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(a){}}(),c.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],c.formatters.j=function(a){try{return JSON.stringify(a)}catch(a){return"[UnexpectedJSONParseError]: "+a.message}},c.enable(i())}).call(this,a("_process"))},{"./debug":223,_process:206}],223:[function(a,b,c){arguments[4][23][0].apply(c,arguments)},{dup:23,ms:224}],224:[function(a,b,c){arguments[4][24][0].apply(c,arguments)},{dup:24}],225:[function(a,b,c){(function(b){var d=a("isarray"),e=a("./is-buffer");c.deconstructPacket=function(a){function b(a){if(!a)return a;if(e(a)){var f={_placeholder:!0,num:c.length};return c.push(a),f}if(d(a)){for(var g=new Array(a.length),h=0;h<a.length;h++)g[h]=b(a[h]);return g}if("object"==typeof a&&!(a instanceof Date)){var g={};for(var i in a)g[i]=b(a[i]);return g}return a}var c=[],f=a.data,g=a;return g.data=b(f),g.attachments=c.length,{packet:g,buffers:c}},c.reconstructPacket=function(a,b){function c(a){if(a&&a._placeholder){return b[a.num]}if(d(a)){for(var e=0;e<a.length;e++)a[e]=c(a[e]);return a}if(a&&"object"==typeof a){for(var f in a)a[f]=c(a[f]);return a}return a}return a.data=c(a.data),a.attachments=void 0,a},c.removeBlobs=function(a,c){function f(a,i,j){if(!a)return a;if(b.Blob&&a instanceof Blob||b.File&&a instanceof File){g++;var k=new FileReader;k.onload=function(){j?j[i]=this.result:h=this.result,--g||c(h)},k.readAsArrayBuffer(a)}else if(d(a))for(var l=0;l<a.length;l++)f(a[l],l,a);else if(a&&"object"==typeof a&&!e(a))for(var m in a)f(a[m],m,a)}var g=0,h=a;f(h),g||c(h)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":227,isarray:231}],226:[function(a,b,c){function d(){}function e(a){var b="",d=!1;return b+=a.type,c.BINARY_EVENT!=a.type&&c.BINARY_ACK!=a.type||(b+=a.attachments,b+="-"),a.nsp&&"/"!=a.nsp&&(d=!0,b+=a.nsp),null!=a.id&&(d&&(b+=",",d=!1),b+=a.id),null!=a.data&&(d&&(b+=","),b+=m.stringify(a.data)),l("encoded %j as %s",a,b),b}function f(a,b){function c(a){var c=o.deconstructPacket(a),d=e(c.packet),f=c.buffers;f.unshift(d),b(f)}o.removeBlobs(a,c)}function g(){this.reconstructor=null}function h(a){var b={},d=0;if(b.type=Number(a.charAt(0)),null==c.types[b.type])return k();if(c.BINARY_EVENT==b.type||c.BINARY_ACK==b.type){for(var e="";"-"!=a.charAt(++d)&&(e+=a.charAt(d),d!=a.length););if(e!=Number(e)||"-"!=a.charAt(d))throw new Error("Illegal attachments");b.attachments=Number(e)}if("/"==a.charAt(d+1))for(b.nsp="";++d;){var f=a.charAt(d);if(","==f)break;if(b.nsp+=f,d==a.length)break}else b.nsp="/";var g=a.charAt(d+1);if(""!==g&&Number(g)==g){for(b.id="";++d;){var f=a.charAt(d);if(null==f||Number(f)!=f){--d;break}if(b.id+=a.charAt(d),d==a.length)break}b.id=Number(b.id)}return a.charAt(++d)&&(b=i(b,a.substr(d))),l("decoded %s as %j",a,b),b}function i(a,b){try{a.data=m.parse(b)}catch(a){return k()}return a}function j(a){this.reconPack=a,this.buffers=[]}function k(a){return{type:c.ERROR,data:"parser error"}}var l=a("debug")("socket.io-parser"),m=a("json3"),n=a("component-emitter"),o=a("./binary"),p=a("./is-buffer");c.protocol=4,c.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],c.CONNECT=0,c.DISCONNECT=1,c.EVENT=2,c.ACK=3,c.ERROR=4,c.BINARY_EVENT=5,c.BINARY_ACK=6,c.Encoder=d,c.Decoder=g,d.prototype.encode=function(a,b){if(l("encoding packet %j",a),c.BINARY_EVENT==a.type||c.BINARY_ACK==a.type)f(a,b);else{b([e(a)])}},n(g.prototype),g.prototype.add=function(a){var b;if("string"==typeof a)b=h(a),c.BINARY_EVENT==b.type||c.BINARY_ACK==b.type?(this.reconstructor=new j(b),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",b)):this.emit("decoded",b);else{if(!p(a)&&!a.base64)throw new Error("Unknown type: "+a);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(b=this.reconstructor.takeBinaryData(a))&&(this.reconstructor=null,this.emit("decoded",b))}},g.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},j.prototype.takeBinaryData=function(a){if(this.buffers.push(a),this.buffers.length==this.reconPack.attachments){var b=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),b}return null},j.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":225,"./is-buffer":227,"component-emitter":228,debug:229,json3:33}],227:[function(a,b,c){(function(a){function c(b){return a.Buffer&&a.Buffer.isBuffer(b)||a.ArrayBuffer&&b instanceof ArrayBuffer}b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],228:[function(a,b,c){function d(a){if(a)return e(a)}function e(a){for(var b in d.prototype)a[b]=d.prototype[b];return a}b.exports=d,d.prototype.on=d.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks[a]=this._callbacks[a]||[]).push(b),this},d.prototype.once=function(a,b){function c(){d.off(a,c),b.apply(this,arguments)}var d=this;return this._callbacks=this._callbacks||{},c.fn=b,this.on(a,c),this},d.prototype.off=d.prototype.removeListener=d.prototype.removeAllListeners=d.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c=this._callbacks[a];if(!c)return this;if(1==arguments.length)return delete this._callbacks[a],this;for(var d,e=0;e<c.length;e++)if((d=c[e])===b||d.fn===b){c.splice(e,1);break}return this},d.prototype.emit=function(a){this._callbacks=this._callbacks||{};var b=[].slice.call(arguments,1),c=this._callbacks[a];if(c){c=c.slice(0);for(var d=0,e=c.length;d<e;++d)c[d].apply(this,b)}return this},d.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks[a]||[]},d.prototype.hasListeners=function(a){return!!this.listeners(a).length}},{}],229:[function(a,b,c){function d(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function e(){var a=arguments,b=this.useColors;if(a[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+a[0]+(b?"%c ":" ")+"+"+c.humanize(this.diff),!b)return a;var d="color: "+this.color;a=[a[0],d,"color: inherit"].concat(Array.prototype.slice.call(a,1));var e=0,f=0;return a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(e++,"%c"===a&&(f=e))}),a.splice(f,0,d),a}function f(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function g(a){try{null==a?c.storage.removeItem("debug"):c.storage.debug=a}catch(a){}}function h(){var a;try{a=c.storage.debug}catch(a){}return a}c=b.exports=a("./debug"),c.log=f,c.formatArgs=e,c.save=g,c.load=h,c.useColors=d,c.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(a){}}(),c.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],c.formatters.j=function(a){return JSON.stringify(a)},c.enable(h())},{"./debug":230}],230:[function(a,b,c){function d(){return c.colors[k++%c.colors.length]}function e(a){function b(){}function e(){var a=e,b=+new Date,f=b-(j||b);a.diff=f,a.prev=j,a.curr=b,j=b,null==a.useColors&&(a.useColors=c.useColors()),null==a.color&&a.useColors&&(a.color=d());var g=Array.prototype.slice.call(arguments);g[0]=c.coerce(g[0]),"string"!=typeof g[0]&&(g=["%o"].concat(g));var h=0;g[0]=g[0].replace(/%([a-z%])/g,function(b,d){if("%%"===b)return b;h++;var e=c.formatters[d];if("function"==typeof e){var f=g[h];b=e.call(a,f),g.splice(h,1),h--}return b}),"function"==typeof c.formatArgs&&(g=c.formatArgs.apply(a,g)),(e.log||c.log||console.log.bind(console)).apply(a,g)}b.enabled=!1,e.enabled=!0;var f=c.enabled(a)?e:b;return f.namespace=a,f}function f(a){c.save(a);for(var b=(a||"").split(/[\s,]+/),d=b.length,e=0;e<d;e++)b[e]&&(a=b[e].replace(/\*/g,".*?"),"-"===a[0]?c.skips.push(new RegExp("^"+a.substr(1)+"$")):c.names.push(new RegExp("^"+a+"$")))}function g(){c.enable("")}function h(a){var b,d;for(b=0,d=c.skips.length;b<d;b++)if(c.skips[b].test(a))return!1;for(b=0,d=c.names.length;b<d;b++)if(c.names[b].test(a))return!0;return!1}function i(a){return a instanceof Error?a.stack||a.message:a}c=b.exports=e,c.coerce=i,c.disable=g,c.enable=f,c.enabled=h,c.humanize=a("ms"),c.names=[],c.skips=[],c.formatters={};var j,k=0},{ms:232}],231:[function(a,b,c){arguments[4][29][0].apply(c,arguments)},{dup:29}],232:[function(a,b,c){function d(a){if(a=""+a,!(a.length>1e4)){var b=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(a);if(b){var c=parseFloat(b[1])
;switch((b[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*l;case"days":case"day":case"d":return c*k;case"hours":case"hour":case"hrs":case"hr":case"h":return c*j;case"minutes":case"minute":case"mins":case"min":case"m":return c*i;case"seconds":case"second":case"secs":case"sec":case"s":return c*h;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c}}}}function e(a){return a>=k?Math.round(a/k)+"d":a>=j?Math.round(a/j)+"h":a>=i?Math.round(a/i)+"m":a>=h?Math.round(a/h)+"s":a+"ms"}function f(a){return g(a,k,"day")||g(a,j,"hour")||g(a,i,"minute")||g(a,h,"second")||a+" ms"}function g(a,b,c){if(!(a<b))return a<1.5*b?Math.floor(a/b)+" "+c:Math.ceil(a/b)+" "+c+"s"}var h=1e3,i=60*h,j=60*i,k=24*j,l=365.25*k;b.exports=function(a,b){return b=b||{},"string"==typeof a?d(a):b.long?f(a):e(a)}},{}],233:[function(a,b,c){function d(a,b){var c=[];b=b||0;for(var d=b||0;d<a.length;d++)c[d-b]=a[d];return c}b.exports=d},{}],234:[function(a,b,c){"use strict";function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&j.isObject(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}function f(a){return j.isString(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)}function g(a,b){return e(a,!1,!0).resolve(b)}function h(a,b){return a?e(a,!1,!0).resolveObject(b):b}var i=a("punycode"),j=a("./util");c.parse=e,c.resolve=g,c.resolveObject=h,c.format=f,c.Url=d;var k=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,m=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,n=["<",">",'"',"`"," ","\r","\n","\t"],o=["{","}","|","\\","^","`"].concat(n),p=["'"].concat(o),q=["%","/","?",";","#"].concat(p),r=["/","?","#"],s={javascript:!0,"javascript:":!0},t={javascript:!0,"javascript:":!0},u={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=a("querystring");d.prototype.parse=function(a,b,c){if(!j.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var d=a.indexOf("?"),e=-1!==d&&d<a.indexOf("#")?"?":"#",f=a.split(e);f[0]=f[0].replace(/\\/g,"/"),a=f.join(e);var g=a;if(g=g.trim(),!c&&1===a.split("#").length){var h=m.exec(g);if(h)return this.path=g,this.href=g,this.pathname=h[1],h[2]?(this.search=h[2],this.query=b?v.parse(this.search.substr(1)):this.search.substr(1)):b&&(this.search="",this.query={}),this}var l=k.exec(g);if(l){l=l[0];var n=l.toLowerCase();this.protocol=n,g=g.substr(l.length)}if(c||l||g.match(/^\/\/[^@\/]+@[^@\/]+/)){var o="//"===g.substr(0,2);!o||l&&t[l]||(g=g.substr(2),this.slashes=!0)}if(!t[l]&&(o||l&&!u[l])){for(var w=-1,x=0;x<r.length;x++){var y=g.indexOf(r[x]);-1!==y&&(-1===w||y<w)&&(w=y)}var z,A;A=-1===w?g.lastIndexOf("@"):g.lastIndexOf("@",w),-1!==A&&(z=g.slice(0,A),g=g.slice(A+1),this.auth=decodeURIComponent(z)),w=-1;for(var x=0;x<q.length;x++){var y=g.indexOf(q[x]);-1!==y&&(-1===w||y<w)&&(w=y)}-1===w&&(w=g.length),this.host=g.slice(0,w),g=g.slice(w),this.parseHost(),this.hostname=this.hostname||"";var B="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!B)for(var C=this.hostname.split(/\./),x=0,D=C.length;x<D;x++){var E=C[x];if(E&&!E.match(/^[+a-z0-9A-Z_-]{0,63}$/)){for(var F="",G=0,H=E.length;G<H;G++)E.charCodeAt(G)>127?F+="x":F+=E[G];if(!F.match(/^[+a-z0-9A-Z_-]{0,63}$/)){var I=C.slice(0,x),J=C.slice(x+1),K=E.match(/^([+a-z0-9A-Z_-]{0,63})(.*)$/);K&&(I.push(K[1]),J.unshift(K[2])),J.length&&(g="/"+J.join(".")+g),this.hostname=I.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),B||(this.hostname=i.toASCII(this.hostname));var L=this.port?":"+this.port:"",M=this.hostname||"";this.host=M+L,this.href+=this.host,B&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==g[0]&&(g="/"+g))}if(!s[n])for(var x=0,D=p.length;x<D;x++){var N=p[x];if(-1!==g.indexOf(N)){var O=encodeURIComponent(N);O===N&&(O=escape(N)),g=g.split(N).join(O)}}var P=g.indexOf("#");-1!==P&&(this.hash=g.substr(P),g=g.slice(0,P));var Q=g.indexOf("?");if(-1!==Q?(this.search=g.substr(Q),this.query=g.substr(Q+1),b&&(this.query=v.parse(this.query)),g=g.slice(0,Q)):b&&(this.search="",this.query={}),g&&(this.pathname=g),u[n]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var L=this.pathname||"",R=this.search||"";this.path=L+R}return this.href=this.format(),this},d.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&j.isObject(this.query)&&Object.keys(this.query).length&&(f=v.stringify(this.query));var g=this.search||f&&"?"+f||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||u[b])&&!1!==e?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e=""),d&&"#"!==d.charAt(0)&&(d="#"+d),g&&"?"!==g.charAt(0)&&(g="?"+g),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),g=g.replace("#","%23"),b+e+c+g+d},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){if(j.isString(a)){var b=new d;b.parse(a,!1,!0),a=b}for(var c=new d,e=Object.keys(this),f=0;f<e.length;f++){var g=e[f];c[g]=this[g]}if(c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol){for(var h=Object.keys(a),i=0;i<h.length;i++){var k=h[i];"protocol"!==k&&(c[k]=a[k])}return u[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c}if(a.protocol&&a.protocol!==c.protocol){if(!u[a.protocol]){for(var l=Object.keys(a),m=0;m<l.length;m++){var n=l[m];c[n]=a[n]}return c.href=c.format(),c}if(c.protocol=a.protocol,a.host||t[a.protocol])c.pathname=a.pathname;else{for(var o=(a.pathname||"").split("/");o.length&&!(a.host=o.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),c.pathname=o.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var p=c.pathname||"",q=c.search||"";c.path=p+q}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var r=c.pathname&&"/"===c.pathname.charAt(0),s=a.host||a.pathname&&"/"===a.pathname.charAt(0),v=s||r||c.host&&a.pathname,w=v,x=c.pathname&&c.pathname.split("/")||[],o=a.pathname&&a.pathname.split("/")||[],y=c.protocol&&!u[c.protocol];if(y&&(c.hostname="",c.port=null,c.host&&(""===x[0]?x[0]=c.host:x.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===o[0]?o[0]=a.host:o.unshift(a.host)),a.host=null),v=v&&(""===o[0]||""===x[0])),s)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,x=o;else if(o.length)x||(x=[]),x.pop(),x=x.concat(o),c.search=a.search,c.query=a.query;else if(!j.isNullOrUndefined(a.search)){if(y){c.hostname=c.host=x.shift();var z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return c.search=a.search,c.query=a.query,j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c}if(!x.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(var A=x.slice(-1)[0],B=(c.host||a.host||x.length>1)&&("."===A||".."===A)||""===A,C=0,D=x.length;D>=0;D--)A=x[D],"."===A?x.splice(D,1):".."===A?(x.splice(D,1),C++):C&&(x.splice(D,1),C--);if(!v&&!w)for(;C--;C)x.unshift("..");!v||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),B&&"/"!==x.join("/").substr(-1)&&x.push("");var E=""===x[0]||x[0]&&"/"===x[0].charAt(0);if(y){c.hostname=c.host=E?"":x.length?x.shift():"";var z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return v=v||c.host&&x.length,v&&!E&&x.unshift(""),x.length?c.pathname=x.join("/"):(c.pathname=null,c.path=null),j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},d.prototype.parseHost=function(){var a=this.host,b=l.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},{"./util":235,punycode:207,querystring:210}],235:[function(a,b,c){"use strict";b.exports={isString:function(a){return"string"==typeof a},isObject:function(a){return"object"==typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==a}}},{}],236:[function(a,b,c){(function(a){!function(d){function e(a){for(var b,c,d=[],e=0,f=a.length;e<f;)b=a.charCodeAt(e++),b>=55296&&b<=56319&&e<f?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function f(a){for(var b,c=a.length,d=-1,e="";++d<c;)b=a[d],b>65535&&(b-=65536,e+=s(b>>>10&1023|55296),b=56320|1023&b),e+=s(b);return e}function g(a,b){return s(a>>b&63|128)}function h(a){if(0==(4294967168&a))return s(a);var b="";return 0==(4294965248&a)?b=s(a>>6&31|192):0==(4294901760&a)?(b=s(a>>12&15|224),b+=g(a,6)):0==(4292870144&a)&&(b=s(a>>18&7|240),b+=g(a,12),b+=g(a,6)),b+=s(63&a|128)}function i(a){for(var b,c=e(a),d=c.length,f=-1,g="";++f<d;)b=c[f],g+=h(b);return g}function j(){if(r>=q)throw Error("Invalid byte index");var a=255&p[r];if(r++,128==(192&a))return 63&a;throw Error("Invalid continuation byte")}function k(){var a,b,c,d,e;if(r>q)throw Error("Invalid byte index");if(r==q)return!1;if(a=255&p[r],r++,0==(128&a))return a;if(192==(224&a)){var b=j();if((e=(31&a)<<6|b)>=128)return e;throw Error("Invalid continuation byte")}if(224==(240&a)){if(b=j(),c=j(),(e=(15&a)<<12|b<<6|c)>=2048)return e;throw Error("Invalid continuation byte")}if(240==(248&a)&&(b=j(),c=j(),d=j(),(e=(15&a)<<18|b<<12|c<<6|d)>=65536&&e<=1114111))return e;throw Error("Invalid WTF-8 detected")}function l(a){p=e(a),q=p.length,r=0;for(var b,c=[];!1!==(b=k());)c.push(b);return f(c)}var m="object"==typeof c&&c,n="object"==typeof b&&b&&b.exports==m&&b,o="object"==typeof a&&a;o.global!==o&&o.window!==o||(d=o);var p,q,r,s=String.fromCharCode,t={version:"1.0.0",encode:i,decode:l};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return t});else if(m&&!m.nodeType)if(n)n.exports=t;else{var u={},v=u.hasOwnProperty;for(var w in t)v.call(t,w)&&(m[w]=t[w])}else d.wtf8=t}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],237:[function(a,b,c){"use strict";function d(a){var b="";do{b=h[a%i]+b,a=Math.floor(a/i)}while(a>0);return b}function e(a){var b=0;for(l=0;l<a.length;l++)b=b*i+j[a.charAt(l)];return b}function f(){var a=d(+new Date);return a!==g?(k=0,g=a):a+"."+d(k++)}for(var g,h="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i=64,j={},k=0,l=0;l<i;l++)j[h[l]]=l;f.encode=d,f.decode=e,b.exports=f},{}],238:[function(a,b,c){"use strict";c.__esModule=!0;var d=a("socket.io-client"),e=function(){function a(a){var b=this;b.socket=d(a,{autoConnect:!1,reconnection:!0}),b.socket.on("connect",function(){console.log("connected")}),b.socket.on("ping",function(a){console.log("ping",a),console.log("ponging back",a),b.socket.emit("pong",a,function(){console.log("received ak")})}),b.socket.emit("getSomeData",function(a){console.log(a)}),b.socket.on("disconnect",function(){console.log("disconnect")}),b.socket.open()}return a.prototype.emit=function(a,b){this.socket.emit(a,b)},a}();c.SocketConnection=e},{"socket.io-client":217}],239:[function(a,b,c){"use strict";function d(){h.render(i),requestAnimationFrame(d)}c.__esModule=!0;var e=a("pixi.js"),f=a("./SocketConnection"),g=new f.SocketConnection(window.document.location.href.replace("http","ws"));e.utils.skipHello();var h=new e.WebGLRenderer(800,600);document.body.appendChild(h.view);var i=new e.Container,j=e.Texture.fromImage("bunny.png"),k=new e.Sprite(j);k.position.x=400,k.position.y=300,k.scale.x=2,k.scale.y=2,k.interactive=!0,console.log("test"),k.on("pointerdown",function(){console.log("clicked"),g.emit("pong","test")}),i.addChild(k),requestAnimationFrame(d)},{"./SocketConnection":238,"pixi.js":172}]},{},[239,238]);
//# sourceMappingURL=bundle.min.js.map</script>
    </body>
</html>